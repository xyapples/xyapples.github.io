{
    "version": "https://jsonfeed.org/version/1",
    "title": "LinuxSre云原生 • All posts by \"linux\" tag",
    "description": "专注于 Linux 运维、云计算、云原⽣等技术",
    "home_page_url": "http://ixuyong.cn",
    "items": [
        {
            "id": "http://ixuyong.cn/posts/269104229.html",
            "url": "http://ixuyong.cn/posts/269104229.html",
            "title": "Samba服务实践",
            "date_published": "2025-06-20T14:12:07.000Z",
            "content_html": "<h3 id=\"samba服务实践\"><a class=\"anchor\" href=\"#samba服务实践\">#</a> Samba 服务实践</h3>\n",
            "tags": [
                "Linux"
            ]
        },
        {
            "id": "http://ixuyong.cn/posts/2889248111.html",
            "url": "http://ixuyong.cn/posts/2889248111.html",
            "title": "Vsftp服务实践",
            "date_published": "2025-06-20T14:12:00.000Z",
            "content_html": "<h3 id=\"vsftp服务实践\"><a class=\"anchor\" href=\"#vsftp服务实践\">#</a> Vsftp 服务实践</h3>\n<h4 id=\"一-vsftp-概述\"><a class=\"anchor\" href=\"#一-vsftp-概述\">#</a> 一、VSFTP 概述</h4>\n<p>FTP 是 File Transfer Protocol（文件传输协议）的英文简称，用于 Internet 上的文件的双向传输。使用 FTP 来传输时，是具有一定程度的危险性， 因为数据在因特网上面是完全没有受到保护的明文传输方式。</p>\n<p>VSFTP 是一个基于 GPL 发布的类 Unix 系统上使用的 FTP 服务器软件，它的全称是 Very Secure FTP，从名称定义上基本可以看出，这是为了解决 ftp 传输安全性问题的。</p>\n<h4 id=\"二-vsftp-工作模式\"><a class=\"anchor\" href=\"#二-vsftp-工作模式\">#</a> 二、VSFTP 工作模式</h4>\n<h5 id=\"21-port模式\"><a class=\"anchor\" href=\"#21-port模式\">#</a> 2.1 Port 模式</h5>\n<p>FTP 客户端首先和服务器的 TCP 21 端口建立连接，用来发送命令，客户端需要接收数据的时候在这个通道上发送 PORT 命令。PORT 命令包含了客户端用什么端口接收数据。在传送数据的时候，服务器端通过自己的 TCP 20 端口连接至客户端的指定端口发送数据。FTP server 必须和客户端建立一个新的连接用来传送数据。</p>\n<p><img loading=\"lazy\" data-src=\"https://wp-cdn.4ce.cn/v2/YAl4LqQ.jpeg\" alt=\"1.jpg\" /></p>\n<h5 id=\"22-passive模式\"><a class=\"anchor\" href=\"#22-passive模式\">#</a> 2.2 Passive 模式</h5>\n<p>FTP 客户端首先和服务器的 TCP 21 端口建立连接，用来建立控制通道发送命令，但建立连接后客户端发送 Pasv 命令。服务器收到 Pasv 命令后，打开一个临时端口（端口大于 1023 小于 65535）并且通知客户端在这个端口上传送数据的请求，客户端连接 FTP 服务器的临时端口，然后 FTP 服务器将通过这个端口传输数据。</p>\n<p><img loading=\"lazy\" data-src=\"https://wp-cdn.4ce.cn/v2/7mKqSbg.jpeg\" alt=\"2.jpg\" /></p>\n<h4 id=\"三-vsftp部署\"><a class=\"anchor\" href=\"#三-vsftp部署\">#</a> 三、VSFTP 部署</h4>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#1. 安装 vsftp</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># yum install vsftpd -y</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># systemctl start vsftpd &amp;&amp; systemctl enable vsftpd</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">#2.vsftp 相关文件</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># ll /etc/vsftpd/</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>-rw------- <span class=\"token number\">1</span> root root  <span class=\"token number\">125</span> Jun <span class=\"token number\">10</span>  <span class=\"token number\">2021</span> ftpusers       <span class=\"token comment\">#黑名单</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>-rw------- <span class=\"token number\">1</span> root root  <span class=\"token number\">361</span> Jun <span class=\"token number\">10</span>  <span class=\"token number\">2021</span> user_list      <span class=\"token comment\">#默认为黑名单，如将 userlist_deny=NO 则为白名单</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>-rw------- <span class=\"token number\">1</span> root root <span class=\"token number\">5116</span> Jun <span class=\"token number\">10</span>  <span class=\"token number\">2021</span> vsftpd.conf    <span class=\"token comment\">#主配置文件</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>-rwxr--r-- <span class=\"token number\">1</span> root root  <span class=\"token number\">338</span> Jun <span class=\"token number\">10</span>  <span class=\"token number\">2021</span> vsftpd_conf_migrate.sh</pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">#3. 验证 vsftp 明文传输，tcpdump 抓包可以看到密码</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># useradd xuyong</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># echo \"123456\" | passwd --stdin xuyong</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># tcpdump -i eth0 -nnX port 21</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token number\">15</span>:05:40.187871 IP <span class=\"token number\">192.168</span>.40.1.54319 <span class=\"token operator\">></span> <span class=\"token number\">192.168</span>.40.50.21: Flags <span class=\"token punctuation\">[</span>P.<span class=\"token punctuation\">]</span>, <span class=\"token function\">seq</span> <span class=\"token number\">1</span>:14, ack <span class=\"token number\">21</span>, win <span class=\"token number\">1023</span>, length <span class=\"token number\">13</span>: FTP: <span class=\"token environment constant\">USER</span> xuyong  <span class=\"token comment\">#用户名</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>\t0x0000:  <span class=\"token number\">4500</span> 0035 36d8 <span class=\"token number\">4000</span> <span class=\"token number\">8006</span> f266 c0a8 <span class=\"token number\">2801</span>  E<span class=\"token punctuation\">..</span><span class=\"token number\">56</span>.@<span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span>f<span class=\"token punctuation\">..</span><span class=\"token punctuation\">(</span>.</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>\t0x0010:  c0a8 <span class=\"token number\">2832</span> d42f 0015 b46e 2af8 bd8d d6ef  <span class=\"token punctuation\">..</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span>./<span class=\"token punctuation\">..</span>.n*<span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span>.</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>\t0x0020:  <span class=\"token number\">5018</span> 03ff <span class=\"token number\">8100</span> 0000 <span class=\"token number\">5553</span> <span class=\"token number\">4552</span> <span class=\"token number\">2078</span> <span class=\"token number\">7579</span>  P<span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span>.<span class=\"token environment constant\">USER</span>.xuy</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>\t0x0030:  6f6e 670d 0a                             ong<span class=\"token punctuation\">..</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token number\">15</span>:05:40.188149 IP <span class=\"token number\">192.168</span>.40.1.54319 <span class=\"token operator\">></span> <span class=\"token number\">192.168</span>.40.50.21: Flags <span class=\"token punctuation\">[</span>P.<span class=\"token punctuation\">]</span>, <span class=\"token function\">seq</span> <span class=\"token number\">14</span>:27, ack <span class=\"token number\">55</span>, win <span class=\"token number\">1023</span>, length <span class=\"token number\">13</span>: FTP: PASS <span class=\"token number\">123456</span>  <span class=\"token comment\">#密码</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>\t0x0000:  <span class=\"token number\">4500</span> 0035 36db <span class=\"token number\">4000</span> <span class=\"token number\">8006</span> f263 c0a8 <span class=\"token number\">2801</span>  E<span class=\"token punctuation\">..</span><span class=\"token number\">56</span>.@<span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span>c<span class=\"token punctuation\">..</span><span class=\"token punctuation\">(</span>.</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>\t0x0010:  c0a8 <span class=\"token number\">2832</span> d42f 0015 b46e 2b05 bd8d d711  <span class=\"token punctuation\">..</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span>./<span class=\"token punctuation\">..</span>.n+<span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span>.</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>\t0x0020:  <span class=\"token number\">5018</span> 03ff 27a9 0000 <span class=\"token number\">5041</span> <span class=\"token number\">5353</span> <span class=\"token number\">2031</span> <span class=\"token number\">3233</span>  P<span class=\"token punctuation\">..</span>.'<span class=\"token punctuation\">..</span>.PASS.123</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>\t0x0030:  <span class=\"token number\">3435</span> 360d 0a                             <span class=\"token number\">456</span><span class=\"token punctuation\">..</span></pre></td></tr></table></figure><h4 id=\"四-登录验证方式\"><a class=\"anchor\" href=\"#四-登录验证方式\">#</a> 四、登录验证方式</h4>\n<p><strong>1. 匿名用户验证：</strong></p>\n<ul>\n<li>用户账号名称：ftp 或 anonymous</li>\n<li>用户账号密码：无密码</li>\n<li>工作目录：/var/ftp</li>\n<li>默认权限：默认可下载不可上传，上传权限由两部分组成（主配置文件和文件系统）</li>\n</ul>\n<p><strong>2. 本地用户验证：</strong></p>\n<ul>\n<li>用户账号名称：本地用户（/etc/passwd）</li>\n<li>用户账号密码：用户密码（/etc/shadow）</li>\n<li>工作目录：登录用户的家目录</li>\n<li>权限：最大权限（drwx------）</li>\n</ul>\n<p><strong>3. 虚拟（virtual）用户验证：</strong></p>\n<ul>\n<li>创建虚拟用户用来代替本地用户，减少本地用户曝光率</li>\n<li>使用本地用户作为虚拟用户的映射用户，为虚拟用户提供工作目录和权限控制</li>\n<li>能够设置严格的权限（为每一个用户生成单独的配置文件）</li>\n</ul>\n<h4 id=\"五-vsftp配置文件详解\"><a class=\"anchor\" href=\"#五-vsftp配置文件详解\">#</a> 五、VSFTP 配置文件详解</h4>\n<h5 id=\"51-vsftp默认配置文件\"><a class=\"anchor\" href=\"#51-vsftp默认配置文件\">#</a> 5.1 VSFTP 默认配置文件</h5>\n<ul>\n<li>允许匿名用户和本地用户登陆。anonymous_enable=YES 、local_enable=YES</li>\n<li>匿名用户使用的登陆名为 ftp 或 anonymous，口令为空；匿名用户不能离开匿名用户家目录 /var/ftp，且只能下载不能上传。</li>\n<li>本地用户的登录名为本地用户名，口令为此本地用户的口令；本地用户可以在自 己家目录中进行读写操作；本地用户可以离开自家目录切换至有权限访问的其他目录，并在权限允许的情况下进行上传 / 下载。write_enable=YES</li>\n<li>写在文件 /etc/vsftpd.ftpusers 中的本地用户禁止登陆。</li>\n</ul>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\">#  egrep -v \"^#|^$\" /etc/vsftpd/vsftpd.conf </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token assign-left variable\">anonymous_enable</span><span class=\"token operator\">=</span>YES         <span class=\"token comment\">#允许匿名用户登录</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token assign-left variable\">local_enable</span><span class=\"token operator\">=</span>YES             <span class=\"token comment\">#允许本地用户登录</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token assign-left variable\">write_enable</span><span class=\"token operator\">=</span>YES             <span class=\"token comment\">#允许本地用户上传</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token assign-left variable\">local_umask</span><span class=\"token operator\">=</span>022              <span class=\"token comment\">#umask 权限，上传默认文件权限 644，默认目录权限 755</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token assign-left variable\">dirmessage_enable</span><span class=\"token operator\">=</span>YES        <span class=\"token comment\">#用户进入目录时，显示 message 文件中信息</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token assign-left variable\">xferlog_enable</span><span class=\"token operator\">=</span>YES           <span class=\"token comment\">#激活记录日志</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token assign-left variable\">connect_from_port_20</span><span class=\"token operator\">=</span>YES     <span class=\"token comment\">#主动模式数据传输端口</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token assign-left variable\">xferlog_std_format</span><span class=\"token operator\">=</span>YES       <span class=\"token comment\">#使用标准的 ftp 日志格式</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token assign-left variable\">listen</span><span class=\"token operator\">=</span>NO\t\t\t\t\t <span class=\"token comment\">#允许被监听</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token assign-left variable\">listen_ipv6</span><span class=\"token operator\">=</span>YES              <span class=\"token comment\">#允许被监听</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token assign-left variable\">pam_service_name</span><span class=\"token operator\">=</span>vsftpd      <span class=\"token comment\">#开启 pam 认证</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token assign-left variable\">userlist_enable</span><span class=\"token operator\">=</span>YES          <span class=\"token comment\">#用户登入限制</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token assign-left variable\">tcp_wrappers</span><span class=\"token operator\">=</span>YES             <span class=\"token comment\">#主机访问控制模式</span></pre></td></tr></table></figure><h5 id=\"52-常用全局配置\"><a class=\"anchor\" href=\"#52-常用全局配置\">#</a> 5.2 常用全局配置</h5>\n<h6 id=\"521-匿名用户anonymous设置\"><a class=\"anchor\" href=\"#521-匿名用户anonymous设置\">#</a> 5.2.1 匿名用户（anonymous）设置</h6>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token assign-left variable\">anonymous_enable</span><span class=\"token operator\">=</span>YES         </pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">#控制是否允许匿名用户登入，YES 为允许匿名登入，NO 为不允许。默认值为 YES。</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token assign-left variable\">write_enable</span><span class=\"token operator\">=</span>YES             </pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">#是否允许登陆用户有写权限。属于全局设置，默认值为 YES。</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token assign-left variable\">no_anon_password</span><span class=\"token operator\">=</span>NO          </pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">#若是启动这项功能，则使用匿名登入时，不会询问密码。默认值为 NO。</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token assign-left variable\">ftp_username</span><span class=\"token operator\">=</span>ftp             </pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">#定义匿名登入的使用者名称。默认值为 ftp。</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token assign-left variable\">anon_root</span><span class=\"token operator\">=</span>/var/ftp          </pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\">#使用匿名登入时，所登入的目录。默认值为 /var/ftp。注意 ftp 目录不能是 777 的权限属性，即匿名用户的家目录不能有 777 的权限。</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token assign-left variable\">anon_upload_enable</span><span class=\"token operator\">=</span>NO        </pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\">#如果设为 YES，则允许匿名登入者有上传文件（非目录）的权限，只有在 write_enable=YES 时，此项才有效。当然，匿名用户必须要有对上层目录的写入权。默认值为 NO。</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token assign-left variable\">anon_world_readable_only</span><span class=\"token operator\">=</span>YES </pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\">#如果设为 YES，则允许匿名登入者下载可阅读的档案（可以下载到本机阅读，不能直接在 FTP 服务器中打开阅读）。默认值为 YES。</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token assign-left variable\">anon_mkdir_write_enable</span><span class=\"token operator\">=</span>NO   </pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\">#如果设为 YES，则允许匿名登入者有新增目录的权限，只有在 write_enable=YES 时，此项才有效。当然，匿名用户必须要有对上层目录的写入权。默认值为 NO。</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token assign-left variable\">anon_other_write_enable</span><span class=\"token operator\">=</span>NO   </pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token comment\">#如果设为 YES，则允许匿名登入者更多于上传或者建立目录之外的权限，譬如删除或者重命名。（如果 anon_upload_enable=NO，则匿名用户不能上传文件，但可以删除或者重命名已经存在的文件；如果 anon_mkdir_write_enable=NO，则匿名用户不能上传或者新建文件夹，但可以删除或者重命名已经存在的文件夹。）默认值为 NO。</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token assign-left variable\">chown_uploads</span><span class=\"token operator\">=</span>NO            </pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token comment\">#设置是否改变匿名用户上传文件（非目录）的属主。默认值为 NO。</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token assign-left variable\">chown_username</span><span class=\"token operator\">=</span>username     </pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token comment\">#设置匿名用户上传文件（非目录）的属主名。建议不要设置为 root。</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token assign-left variable\">anon_umask</span><span class=\"token operator\">=</span>077             </pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token comment\">#设置匿名登入者新增或上传档案时的 umask 值。默认值为 077，则新建档案的对应权限为 700。</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token assign-left variable\">deny_email_enable</span><span class=\"token operator\">=</span>NO        </pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token comment\">#若是启动这项功能，则必须提供一个档案 /etc/vsftpd/banner_emails，内容为 email address。若是使用匿名登入，则会要求输入 email address，若输入的 email address 在此档案内，则不允许进入。默认值为 NO。</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token assign-left variable\">banned_email_file</span><span class=\"token operator\">=</span>/etc/vsftpd/banner_emails</pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token comment\">#此文件用来输入 email address，只有在 deny_email_enable=YES 时，才会使用到此档案。若是使用匿名登入，则会要求输入 email address，若输入的 email address 在此档案内，则不允许进入。</span></pre></td></tr></table></figure><h6 id=\"522-本地用户设置\"><a class=\"anchor\" href=\"#522-本地用户设置\">#</a> 5.2.2 本地用户设置</h6>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token assign-left variable\">local_enable</span><span class=\"token operator\">=</span>YES/NO（YES）</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">#控制是否允许本地用户登入，YES 为允许本地用户登入，NO 为不允许。默认值为 YES。</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token assign-left variable\">local_root</span><span class=\"token operator\">=</span>/home/username</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">#当本地用户登入时，将被更换到定义的目录下。默认值为各用户的家目录。</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token assign-left variable\">write_enable</span><span class=\"token operator\">=</span>YES/NO（YES）</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">#是否允许登陆用户有写权限。属于全局设置，默认值为 YES。</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token assign-left variable\">local_umask</span><span class=\"token operator\">=</span>022</pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">#本地用户新增档案时的 umask 值。默认值为 077。</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token assign-left variable\">file_open_mode</span><span class=\"token operator\">=</span>0755</pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\">#本地用户上传档案后的档案权限，与 chmod 所使用的数值相同。默认值为 0666。</span></pre></td></tr></table></figure><h6 id=\"523-欢迎语设置\"><a class=\"anchor\" href=\"#523-欢迎语设置\">#</a> 5.2.3 欢迎语设置</h6>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token assign-left variable\">dirmessage_enable</span><span class=\"token operator\">=</span>YES/NO（YES）</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">#如果启动这个选项，那么使用者第一次进入一个目录时，会检查该目录下是否有.message 这个档案，如果有，则会出现此档案的内容，通常这个档案会放置欢迎话语，或是对该目录的说明。默认值为开启。</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token assign-left variable\">message_file</span><span class=\"token operator\">=</span>.message</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">#设置目录消息文件，可将要显示的信息写入该文件。默认值为.message。</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token assign-left variable\">banner_file</span><span class=\"token operator\">=</span>/etc/vsftpd/banner</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">#当使用者登入时，会显示此设定所在的档案内容，通常为欢迎话语或是说明。默认值为无。如果欢迎信息较多，则使用该配置项。</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token assign-left variable\">ftpd_banner</span><span class=\"token operator\">=</span>Welcome to BOB's FTP server</pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">#这里用来定义欢迎话语的字符串，banner_file 是档案的形式，而 ftpd_banner 则是字符串的形式。预设为无。</span></pre></td></tr></table></figure><h6 id=\"524-控制用户是否允许切换到上级目录\"><a class=\"anchor\" href=\"#524-控制用户是否允许切换到上级目录\">#</a> 5.2.4 控制用户是否允许切换到上级目录</h6>\n<p>在默认配置下，本地用户登入 FTP 后可以使用 cd 命令切换到其他目录，这样会对系统带来安全隐患。可以通过以下三条配置文件来控制用户切换目录。</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token assign-left variable\">chroot_list_enable</span><span class=\"token operator\">=</span>NO                     <span class=\"token comment\">#设置是否启用 chroot_list_file 配置项指定的用户列表文件。默认值为 NO</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token assign-left variable\">chroot_list_file</span><span class=\"token operator\">=</span>/etc/vsftpd.chroot_list  <span class=\"token comment\">#用于指定用户列表文件，该文件用于控制哪些用户可以切换到用户家目录的上级目录</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token assign-left variable\">chroot_local_user</span><span class=\"token operator\">=</span>NO                      <span class=\"token comment\">#用于指定用户列表文件中的用户是否允许切换到上级目录。默认值为 NO</span></pre></td></tr></table></figure><p>通过搭配能实现以下几种效果：</p>\n<ul>\n<li>当 chroot_list_enable=YES，chroot_local_user=YES 时，在 /etc/vsftpd.chroot_list 文件中列出的用户，可以切换到其他目录；未在文件中列出的用户，不能切换到其他目录。</li>\n<li>当 chroot_list_enable=YES，chroot_local_user=NO 时，在 /etc/vsftpd.chroot_list 文件中列出的用户，不能切换到其他目录；未在文件中列出的用户，可以切换到其他目录。</li>\n<li>当 chroot_list_enable=NO，chroot_local_user=YES 时，所有的用户均不能切换到其他目录。</li>\n<li>当 chroot_list_enable=NO，chroot_local_user=NO 时，所有的用户均可以切换到其他目录。</li>\n</ul>\n<h6 id=\"525-数据传输模式设置\"><a class=\"anchor\" href=\"#525-数据传输模式设置\">#</a> 5.2.5 数据传输模式设置</h6>\n<p>FTP 在传输数据时，可以使用二进制方式，也可以使用 ASCII 模式来上传或下载数据。</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token assign-left variable\">ascii_upload_enable</span><span class=\"token operator\">=</span>YES/NO（NO）</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">#设置是否启用 ASCII 模式上传数据。默认值为 NO。</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token assign-left variable\">ascii_download_enable</span><span class=\"token operator\">=</span>YES/NO（NO）</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">#设置是否启用 ASCII 模式下载数据。默认值为 NO。</span></pre></td></tr></table></figure><h6 id=\"526-访问控制设置\"><a class=\"anchor\" href=\"#526-访问控制设置\">#</a> 5.2.6 访问控制设置</h6>\n<p>两种控制方式：一种控制主机访问，另一种控制用户访问。</p>\n<p>1、控制主机访问：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token assign-left variable\">tcp_wrappers</span><span class=\"token operator\">=</span>YES/NO（YES）</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">#设置 vsftpd 是否与 tcp wrapper 相结合来进行主机的访问控制。默认值为 YES。如果启用，则 vsftpd 服务器会检查 /etc/hosts.allow 和 /etc/hosts.deny 中的设置，来决定请求连接的主机，是否允许访问该 FTP 服务器。这两个文件可以起到简易的防火墙功能。比如：若要仅允许 192.168.0.1—192.168.0.254 的用户可以连接 FTP 服务器，则在 /etc/hosts.allow 文件中添加以下内容：</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>vsftpd:192.168.0. :allow</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>all:all :deny</pre></td></tr></table></figure><p>2、控制用户访问</p>\n<p>对于用户的访问控制可以通过 /etc 目录下的 vsftpd.user_list 和 ftpusers 文件来实现。</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token assign-left variable\">userlist_file</span><span class=\"token operator\">=</span>/etc/vsftpd.user_list</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">#控制用户访问 FTP 的文件，里面写着用户名称。一个用户名称一行。</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token assign-left variable\">userlist_enable</span><span class=\"token operator\">=</span>YES/NO（NO）</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">#是否启用 vsftpd.user_list 文件。</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token assign-left variable\">userlist_deny</span><span class=\"token operator\">=</span>YES/NO（YES）</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">#决定 vsftpd.user_list 文件中的用户是否能够访问 FTP 服务器。若设置为 YES，则 vsftpd.user_list 文件中的用户不允许访问 FTP，若设置为 NO，则只有 vsftpd.user_list 文件中的用户才能访问 FTP。/etc/vsftpd/ftpusers 文件专门用于定义不允许访问 FTP 服务器的用户列表（注意：如果 userlist_enable=YES,userlist_deny=NO, 此时如果在 vsftpd.user_list 和 ftpusers 中都有某个用户时，那么这个用户是不能够访问 FTP 的，即 ftpusers 的优先级要高）。默认情况下 vsftpd.user_list 和 ftpusers，这两个文件已经预设置了一些不允许访问 FTP 服务器的系统内部账户。如果系统没有这两个文件，那么新建这两个文件，将用户添加进去即可。</span></pre></td></tr></table></figure><h6 id=\"527-访问速率设置\"><a class=\"anchor\" href=\"#527-访问速率设置\">#</a> 5.2.7 访问速率设置</h6>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token assign-left variable\">anon_max_rate</span><span class=\"token operator\">=</span><span class=\"token number\">0</span>                   <span class=\"token comment\">#设置匿名登入者使用的最大传输速度，单位为 B/s，0 表示不限制速度。默认值为 0</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token assign-left variable\">local_max_rate</span><span class=\"token operator\">=</span><span class=\"token number\">0</span>                  <span class=\"token comment\">#本地用户使用的最大传输速度，单位为 B/s，0 表示不限制速度。预设值为 0。</span></pre></td></tr></table></figure><h6 id=\"528-超时时间设置\"><a class=\"anchor\" href=\"#528-超时时间设置\">#</a> 5.2.8 超时时间设置</h6>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token assign-left variable\">accept_timeout</span><span class=\"token operator\">=</span><span class=\"token number\">60</span>                 <span class=\"token comment\">#被动模式设置建立 FTP 连接的超时时间，单位为秒。默认值为 60</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token assign-left variable\">connect_timeout</span><span class=\"token operator\">=</span><span class=\"token number\">60</span>                <span class=\"token comment\">#PORT 主动模式下建立数据连接的超时时间，单位为秒。默认值为 60</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token assign-left variable\">data_connection_timeout</span><span class=\"token operator\">=</span><span class=\"token number\">120</span>       <span class=\"token comment\">#设置建立 FTP 数据连接的超时时间，单位为秒。默认值为 120</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token assign-left variable\">idle_session_timeout</span><span class=\"token operator\">=</span><span class=\"token number\">300</span>          <span class=\"token comment\">#设置多长时间不对 FTP 服务器进行任何操作，则断开该 FTP 连接，默认值为 300 秒</span></pre></td></tr></table></figure><h6 id=\"529-日志文件设置\"><a class=\"anchor\" href=\"#529-日志文件设置\">#</a> 5.2.9 日志文件设置</h6>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token assign-left variable\">xferlog_enable</span><span class=\"token operator\">=</span> YES/NO（YES）</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">#是否启用上传 / 下载日志记录。如果启用，则上传与下载的信息将被完整纪录在 xferlog_file 所定义的档案中。预设为开启。</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token assign-left variable\">xferlog_file</span><span class=\"token operator\">=</span>/var/log/vsftpd.log</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">#设置日志文件名和路径，默认值为 /var/log/vsftpd.log。</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token assign-left variable\">xferlog_std_format</span><span class=\"token operator\">=</span>YES/NO（NO）</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">#如果启用，则日志文件将会写成 xferlog 的标准格式，如同 wu-ftpd 一般。默认值为关闭。</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token assign-left variable\">log_ftp_protocol</span><span class=\"token operator\">=</span>YES<span class=\"token operator\">|</span>NO（NO）</pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">#如果启用此选项，所有的 FTP 请求和响应都会被记录到日志中，默认日志文件在 /var/log/vsftpd.log。启用此选项时，xferlog_std_format 不能被激活。这个选项有助于调试。默认值为 NO。</span></pre></td></tr></table></figure><h6 id=\"5210-ftp工作模式与端口设置\"><a class=\"anchor\" href=\"#5210-ftp工作模式与端口设置\">#</a> 5.2.10 FTP 工作模式与端口设置</h6>\n<p>FTP 有两种工作方式：PORT FTP（主动模式）和 PASV FTP（被动模式）</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token assign-left variable\">listen_port</span><span class=\"token operator\">=</span><span class=\"token number\">21</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">#设置 FTP 服务器建立连接所监听的端口，默认值为 21。</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token assign-left variable\">connect_from_port_20</span><span class=\"token operator\">=</span>YES/NO</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">#指定 FTP 使用 20 端口进行数据传输，默认值为 YES。</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token assign-left variable\">ftp_data_port</span><span class=\"token operator\">=</span><span class=\"token number\">20</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">#设置在 PORT 方式下，FTP 数据连接使用的端口，默认值为 20。</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token assign-left variable\">pasv_enable</span><span class=\"token operator\">=</span>YES/NO（YES）</pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">#若设置为 YES，则使用 PASV 被动模式；若设置为 NO，则使用 PORT 模式。默认值为 YES，即使用 PASV 被动模式。</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token assign-left variable\">pasv_max_port</span><span class=\"token operator\">=</span><span class=\"token number\">24800</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\">#在 PASV 工作模式下，数据连接可以使用的端口范围的最大端口，0 表示任意端口。默认值为 0。</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token assign-left variable\">pasv_min_port</span><span class=\"token operator\">=</span><span class=\"token number\">24500</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\">#在 PASV 工作模式下，数据连接可以使用的端口范围的最小端口，0 表示任意端口。默认值为 0。</span></pre></td></tr></table></figure><h6 id=\"5211-与连接相关的设置\"><a class=\"anchor\" href=\"#5211-与连接相关的设置\">#</a> 5.2.11 与连接相关的设置</h6>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token assign-left variable\">listen</span><span class=\"token operator\">=</span>YES/NO（YES）</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">#设置 vsftpd 服务器是否以 standalone 模式运行。以 standalone 模式运行是一种较好的方式，此时 listen 必须设置为 YES，此为默认值。建议不要更改，有很多与服务器运行相关的配置命令，需要在此模式下才有效。若设置为 NO，则 vsftpd 不是以独立的服务运行，要受到 xinetd 服务的管控，功能上会受到限制。</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token assign-left variable\">max_clients</span><span class=\"token operator\">=</span><span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">#设置 vsftpd 允许的最大连接数，默认值为 0，表示不受限制。若设置为 100 时，则同时允许有 100 连接，超出的将被拒绝。只有在 standalone 模式运行才有效。</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token assign-left variable\">max_per_ip</span><span class=\"token operator\">=</span><span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">#设置每个 IP 允许与 FTP 服务器同时建立连接的数目。默认值为 0，表示不受限制。只有在 standalone 模式运行才有效。</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token assign-left variable\">listen_address</span><span class=\"token operator\">=</span>IP 地址</pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">#设置 FTP 服务器在指定的 IP 地址上侦听用户的 FTP 请求。若不设置，则对服务器绑定的所有 IP 地址进行侦听。只有在 standalone 模式运行才有效。</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token assign-left variable\">setproctitle_enable</span><span class=\"token operator\">=</span>YES/NO（NO）</pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\">#设置每个与 FTP 服务器的连接，是否以不同的进程表现出来。默认值为 NO，此时使用 ps aux |grep ftp 只会有一个 vsftpd 的进程。若设置为 YES，则每个连接都会有一个 vsftpd 的进程。</span></pre></td></tr></table></figure><h6 id=\"5212-虚拟用户设置\"><a class=\"anchor\" href=\"#5212-虚拟用户设置\">#</a> 5.2.12 虚拟用户设置</h6>\n<p>虚拟用户使用 PAM 认证方式。</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token assign-left variable\">pam_service_name</span><span class=\"token operator\">=</span>vsftpd</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">#设置 PAM 使用的名称，默认值为 /etc/pam.d/vsftpd。</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token assign-left variable\">guest_enable</span><span class=\"token operator\">=</span> YES/NO（NO）</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">#启用虚拟用户。默认值为 NO。</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token assign-left variable\">guest_username</span><span class=\"token operator\">=</span>ftp</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">#这里用来映射虚拟用户。默认值为 ftp。</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token assign-left variable\">virtual_use_local_privs</span><span class=\"token operator\">=</span>YES/NO（NO）</pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">#当该参数激活（YES）时，虚拟用户使用与本地用户相同的权限。当此参数关闭（NO）时，虚拟用户使用与匿名用户相同的权限。默认情况下此参数是关闭的（NO）。</span></pre></td></tr></table></figure><h6 id=\"5213-定义用户配置文件\"><a class=\"anchor\" href=\"#5213-定义用户配置文件\">#</a> 5.2.13 定义用户配置文件</h6>\n<p>在 vsftpd 中，可以通过定义用户配置文件来实现不同的用户使用不同的配置。</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token assign-left variable\">user_config_dir</span><span class=\"token operator\">=</span>/etc/vsftpd/userconf</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">#设置用户配置文件所在的目录。当设置了该配置项后，用户登陆服务器后，系统就会到 /etc/vsftpd/userconf 目录下，读取与当前用户名相同的文件，并根据文件中的配置命令，对当前用户进行更进一步的配置。</span></pre></td></tr></table></figure><p><em>例如：定义 user_config_dir=/etc/vsftpd/userconf，且主机上有使用者 test1,test2，那么我们就在 user_config_dir 的目录新增文件名为 test1 和 test2 两个文件。若是 test1 登入，则会读取 user_config_dir 下的 test1 这个档案内的设定。默认值为无。利用用户配置文件，可以实现对不同用户进行访问速度的控制，在各用户配置文件中定义 local_max_rate=XX，即可。</em></p>\n<h4 id=\"六-vsftp匿名用户访问\"><a class=\"anchor\" href=\"#六-vsftp匿名用户访问\">#</a> 六、VSFTP 匿名用户访问</h4>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#1. 注释中带 * 为修改项或增加项 </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># egrep -v \"^#|^$\" /etc/vsftpd/vsftpd.conf </span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token assign-left variable\">anonymous_enable</span><span class=\"token operator\">=</span>YES         <span class=\"token comment\">#允许匿名用户登录       ***</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token assign-left variable\">local_enable</span><span class=\"token operator\">=</span>YES             <span class=\"token comment\">#允许本地用户登录</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token assign-left variable\">write_enable</span><span class=\"token operator\">=</span>YES             <span class=\"token comment\">#允许本地用户上传</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token assign-left variable\">local_umask</span><span class=\"token operator\">=</span>022              <span class=\"token comment\">#umask 权限，上传文件权限默认 644，目录 755</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token assign-left variable\">anon_upload_enable</span><span class=\"token operator\">=</span>YES       <span class=\"token comment\">#允许匿名用户上传       ***</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token assign-left variable\">anon_mkdir_write_enable</span><span class=\"token operator\">=</span>YES  <span class=\"token comment\">#允许匿名用户新建目录   ***</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token assign-left variable\">anon_other_write_enable</span><span class=\"token operator\">=</span>YES  <span class=\"token comment\">#允许匿名用户删除或上传 ***</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token assign-left variable\">dirmessage_enable</span><span class=\"token operator\">=</span>YES        <span class=\"token comment\">#用户进入目录时，显示 message 文件中信息</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token assign-left variable\">xferlog_enable</span><span class=\"token operator\">=</span>YES           <span class=\"token comment\">#激活记录日志</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token assign-left variable\">connect_from_port_20</span><span class=\"token operator\">=</span>YES     <span class=\"token comment\">#主动模式数据传输端口</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token assign-left variable\">xferlog_std_format</span><span class=\"token operator\">=</span>YES       <span class=\"token comment\">#使用标准的 ftp 日志格式</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token assign-left variable\">listen</span><span class=\"token operator\">=</span>NO\t\t\t\t\t <span class=\"token comment\">#允许被监听</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token assign-left variable\">listen_ipv6</span><span class=\"token operator\">=</span>YES              <span class=\"token comment\">#允许被监听</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token assign-left variable\">pam_service_name</span><span class=\"token operator\">=</span>vsftpd      <span class=\"token comment\">#开启 pam 认证</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token assign-left variable\">userlist_enable</span><span class=\"token operator\">=</span>YES          <span class=\"token comment\">#用户登入限制</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token assign-left variable\">tcp_wrappers</span><span class=\"token operator\">=</span>YES             <span class=\"token comment\">#主机访问控制模式</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\">#2. 匿名用户访问路径</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># systemctl restat vsftpd</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cd /var/ftp/</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token comment\">#3. 此时 ftp 无法上传文件，因为匿名登录为系统用户 ftp，对 /var/ftp/pub 目录没有写入权限</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># ll /var/ftp/pub -d</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>drwxr-xr-x <span class=\"token number\">3</span> root root <span class=\"token number\">30</span> Nov  <span class=\"token number\">4</span> <span class=\"token number\">23</span>:05 /var/ftp/</pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># chown ftp /var/ftp/pub</span></pre></td></tr></table></figure><h4 id=\"七-vsftp系统用户访问\"><a class=\"anchor\" href=\"#七-vsftp系统用户访问\">#</a> 七、VSFTP 系统用户访问</h4>\n<h5 id=\"71-vsftp配置文件\"><a class=\"anchor\" href=\"#71-vsftp配置文件\">#</a> 7.1 VSFTP 配置文件</h5>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># egrep -v \"^#|^$\" /etc/vsftpd/vsftpd.conf </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token assign-left variable\">anonymous_enable</span><span class=\"token operator\">=</span>YES         <span class=\"token comment\">#允许匿名用户登录       </span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token assign-left variable\">local_enable</span><span class=\"token operator\">=</span>YES             <span class=\"token comment\">#允许本地用户登录</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token assign-left variable\">write_enable</span><span class=\"token operator\">=</span>YES             <span class=\"token comment\">#允许本地用户上传</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token assign-left variable\">local_umask</span><span class=\"token operator\">=</span>022              <span class=\"token comment\">#umask 权限，上传文件权限默认 644，目录 755</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token assign-left variable\">dirmessage_enable</span><span class=\"token operator\">=</span>YES        <span class=\"token comment\">#用户进入目录时，显示 message 文件中信息</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token assign-left variable\">xferlog_enable</span><span class=\"token operator\">=</span>YES           <span class=\"token comment\">#激活记录日志</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token assign-left variable\">connect_from_port_20</span><span class=\"token operator\">=</span>YES     <span class=\"token comment\">#主动模式数据传输端口</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token assign-left variable\">xferlog_std_format</span><span class=\"token operator\">=</span>YES       <span class=\"token comment\">#使用标准的 ftp 日志格式</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token assign-left variable\">listen</span><span class=\"token operator\">=</span>NO\t\t\t\t\t <span class=\"token comment\">#允许被监听</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token assign-left variable\">listen_ipv6</span><span class=\"token operator\">=</span>YES              <span class=\"token comment\">#允许被监听</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token assign-left variable\">pam_service_name</span><span class=\"token operator\">=</span>vsftpd      <span class=\"token comment\">#开启 pam 认证</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token assign-left variable\">userlist_enable</span><span class=\"token operator\">=</span>YES          <span class=\"token comment\">#用户登入限制</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token assign-left variable\">tcp_wrappers</span><span class=\"token operator\">=</span>YES             <span class=\"token comment\">#主机访问控制模式</span></pre></td></tr></table></figure><h5 id=\"72-新建系统用户\"><a class=\"anchor\" href=\"#72-新建系统用户\">#</a> 7.2 新建系统用户</h5>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># useradd xuyong</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># passwd zhangshan</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># useradd xuyong</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># echo \"123456\" | passwd --stdin zhangshan</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># userdel -d zhangsan</span></pre></td></tr></table></figure><h5 id=\"73-vsftp基本配置\"><a class=\"anchor\" href=\"#73-vsftp基本配置\">#</a> 7.3 VSFTP 基本配置</h5>\n<p>vsftp 登录路径默认为用户家目录，可以通过修改配置文件自定义主目录，修改后所有用户登录的工作目录都是该路径 /share_home。</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token assign-left variable\">local_root</span><span class=\"token operator\">=</span>/share_home      <span class=\"token comment\">#当本地用户登入时，将被更换到定义的目录下。默认值为各用户的家目录。\t</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token assign-left variable\">local_max_rate</span><span class=\"token operator\">=</span><span class=\"token number\">0</span>            <span class=\"token comment\">#限制最大传输速率 (字节 / 秒)</span></pre></td></tr></table></figure><p>此时用户登录后没有写入权限，原因为虽然 VSFTP 服务开启了写权限，但是 /share_home 目录属主属组为 root，用户没有目录写权限。</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># groupadd caiwu</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># id xuyong</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token assign-left variable\">uid</span><span class=\"token operator\">=</span><span class=\"token number\">1000</span><span class=\"token punctuation\">(</span>xuyong<span class=\"token punctuation\">)</span> <span class=\"token assign-left variable\">gid</span><span class=\"token operator\">=</span><span class=\"token number\">1000</span><span class=\"token punctuation\">(</span>xuyong<span class=\"token punctuation\">)</span> <span class=\"token assign-left variable\">groups</span><span class=\"token operator\">=</span><span class=\"token number\">1000</span><span class=\"token punctuation\">(</span>xuyong<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># gpasswd -a xuyong caiwu    #已存在用户加入到 caiwu 组</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># id xuyong</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token assign-left variable\">uid</span><span class=\"token operator\">=</span><span class=\"token number\">1000</span><span class=\"token punctuation\">(</span>xuyong<span class=\"token punctuation\">)</span> <span class=\"token assign-left variable\">gid</span><span class=\"token operator\">=</span><span class=\"token number\">1000</span><span class=\"token punctuation\">(</span>xuyong<span class=\"token punctuation\">)</span> <span class=\"token assign-left variable\">groups</span><span class=\"token operator\">=</span><span class=\"token number\">1000</span><span class=\"token punctuation\">(</span>xuyong<span class=\"token punctuation\">)</span>,1003<span class=\"token punctuation\">(</span>caiwu<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># mkdir /share_home</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># ll /share_home/ -d</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>drwxr-xr-x <span class=\"token number\">2</span> root root <span class=\"token number\">6</span> Nov  <span class=\"token number\">5</span> 09:59 /share_home/</pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">[</span>root@manager ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># chown root.caiwu /share_home/</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># chmod 775 /share_home</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># ll /share_home/ -d</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>drwxrwxr-x <span class=\"token number\">2</span> root caiwu <span class=\"token number\">6</span> Jun <span class=\"token number\">22</span> <span class=\"token number\">16</span>:39 /share_home/</pre></td></tr></table></figure><h5 id=\"74-限制登录用户切换家目录\"><a class=\"anchor\" href=\"#74-限制登录用户切换家目录\">#</a> 7.4 限制登录用户切换家目录</h5>\n<p>1、限制所有登录用户切换家目录</p>\n<p>从 2.3.5 之后，vsftpd 增强了安全检查，如果用户被限定在了其主目录下，则该用户的主目录不能再具有写权限了！如果检查发现还有写权限，就会报该错误。</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token assign-left variable\">chroot_local_user</span><span class=\"token operator\">=</span>YES                </pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token assign-left variable\">allow_writeable_chroot</span><span class=\"token operator\">=</span>YES</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">#开启用户限制在家目录 (只开启以上行，把所有用户都限制在用户家目录中)</span></pre></td></tr></table></figure><p>2、仅允许写入 /etc/vsftpd/chroot_list 文件中的用户可以切换目录，其他用户都限制在用户主目录</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token assign-left variable\">chroot_local_user</span><span class=\"token operator\">=</span>YES                </pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token assign-left variable\">allow_writeable_chroot</span><span class=\"token operator\">=</span>YES</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token assign-left variable\">chroot_list_enable</span><span class=\"token operator\">=</span>YES</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token assign-left variable\">chroot_list_file</span><span class=\"token operator\">=</span>/etc/vsftpd/chroot_list  </pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">#开启以上 4 行，写入 /etc/vsftpd/chroot_list 文件中的用户可以切换目录，其他用户都限制在用户主目录</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># vim /etc/vsftpd/chroot_list</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>xuyong</pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># systemctl restart vsftpd</span></pre></td></tr></table></figure><h5 id=\"75-vsftp用户访问控制\"><a class=\"anchor\" href=\"#75-vsftp用户访问控制\">#</a> 7.5 VSFTP 用户访问控制</h5>\n<p>1、配置文件</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@manager ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># ll /etc/vsftpd/</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>total <span class=\"token number\">36</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>-rw------- <span class=\"token number\">1</span> root root   <span class=\"token number\">125</span> Jun <span class=\"token number\">10</span>  <span class=\"token number\">2021</span> ftpusers         <span class=\"token comment\">#黑名单</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>-rw------- <span class=\"token number\">1</span> root root   <span class=\"token number\">361</span> Jun <span class=\"token number\">10</span>  <span class=\"token number\">2021</span> user_list        <span class=\"token comment\">#默认为黑名单，如将 userlist_deny=NO 则为白名单，仅允许该配置文件中用户可以访问</span></pre></td></tr></table></figure><p>2、将用户 xuyong 加入 user_list 文件中后默认为黑名单，不能登入 vsftp 服务器</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@manager ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat /etc/vsftpd/user_list </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># vsftpd userlist</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># If userlist_deny=NO, only allow users in this file</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># If userlist_deny=YES (default), never allow users in this file, and</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># do not even prompt for a password.</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># Note that the default vsftpd pam config also checks /etc/vsftpd/ftpusers</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># for users that are denied.</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>root</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>bin</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>daemon</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>adm</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>lp</pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token function\">sync</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token function\">shutdown</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token function\">halt</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>mail</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>news</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>uucp</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>operator</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>games</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>nobody</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>xuyong              <span class=\"token comment\">#用户加入黑名单</span></pre></td></tr></table></figure><p>3、通过修改配置文件 /etc/vsftpd/vsftpd.conf，仅写入 /etc/vsftpd/user_list 中的用户可以访问 vsftp 服务器，其他用户不可以访问。此时该文件为白名单。</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token assign-left variable\">userlist_enable</span><span class=\"token operator\">=</span>YES                 <span class=\"token comment\">#开启用户访问控制，默认开启状态</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token assign-left variable\">userlist_deny</span><span class=\"token operator\">=</span>NO                    <span class=\"token comment\">#开启白名单功能</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token assign-left variable\">Userlist_file</span><span class=\"token operator\">=</span>/etc/vsftpd/user_list</pre></td></tr></table></figure><h4 id=\"八-vsftp虚拟用户访问\"><a class=\"anchor\" href=\"#八-vsftp虚拟用户访问\">#</a> 八、VSFTP 虚拟用户访问</h4>\n<h5 id=\"81-创建虚拟用户口令文件\"><a class=\"anchor\" href=\"#81-创建虚拟用户口令文件\">#</a> 8.1 创建虚拟用户口令文件</h5>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat /etc/vsftpd/vusers </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>xuyong    <span class=\"token comment\">#用户名</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token number\">123456</span>    <span class=\"token comment\">#密码</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>zhaomin</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token number\">123456</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>zhangwuji</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token number\">123456</span></pre></td></tr></table></figure><h5 id=\"82-生成虚拟用户已口令认证文件\"><a class=\"anchor\" href=\"#82-生成虚拟用户已口令认证文件\">#</a> 8.2 生成虚拟用户已口令认证文件</h5>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#1. 安装口令认证命令</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># yum install db4-utils -y</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre> </pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">#2. 生成 Vsftpd 虚拟用户数据库认证文件，</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># db_load -T -t hash -f /etc/vsftpd/vusers /etc/vsftpd/vusers.db</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># chmod 700 /etc/vsftpd/vusers.db</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># ll /etc/vsftpd/vusers.db </span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>-rw-r--r-- <span class=\"token number\">1</span> root root <span class=\"token number\">12288</span> Jun <span class=\"token number\">22</span> <span class=\"token number\">20</span>:41 /etc/vsftpd/vusers.db</pre></td></tr></table></figure><h5 id=\"83-编辑vsftp的pam认证文件\"><a class=\"anchor\" href=\"#83-编辑vsftp的pam认证文件\">#</a> 8.3 编辑 VSFTP 的 PAM 认证文件</h5>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#配置 PAM 认证文件，/etc/pam.d/vsftpd 行尾加入如下两行，其余行注释掉，此时系统本地用户无法登入</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat /etc/pam.d/vsftpd</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">#%PAM-1.0</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">#session    optional     pam_keyinit.so    force revoke</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">#auth       required\tpam_listfile.so item=user sense=deny file=/etc/vsftpd/ftpusers onerr=succeed</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">#auth       required\tpam_shells.so</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">#auth       include\tpassword-auth</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">#account    include\tpassword-auth</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">#session    required     pam_loginuid.so</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">#session    include\tpassword-auth</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>auth       required     pam_userdb.so  <span class=\"token assign-left variable\">db</span><span class=\"token operator\">=</span>/etc/vsftpd/vusers</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>account    required     pam_userdb.so  <span class=\"token assign-left variable\">db</span><span class=\"token operator\">=</span>/etc/vsftpd/vusers</pre></td></tr></table></figure><h5 id=\"84-建立本地映射用户并设置宿主目录权限\"><a class=\"anchor\" href=\"#84-建立本地映射用户并设置宿主目录权限\">#</a> 8.4 建立本地映射用户并设置宿主目录权限</h5>\n<ul>\n<li>所有 Vsftpd 虚拟用户需要映射到一个系统用户，该系统用户不需要密码，也不需要登录，主要用于虚拟用户映射使用；</li>\n<li>用户名必须和下一步配置文件中一致；</li>\n</ul>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># useradd -d /home/vftproot -s /sbin/nologin vuser</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># chmod 755 /home/vftproot</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># ll /home/vftproot -d</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>drwxr-xr-x <span class=\"token number\">2</span> vuser vuser <span class=\"token number\">62</span> Jun <span class=\"token number\">22</span> <span class=\"token number\">20</span>:58 /home/vftproot</pre></td></tr></table></figure><h5 id=\"85-修改配置文件\"><a class=\"anchor\" href=\"#85-修改配置文件\">#</a> 8.5 修改配置文件</h5>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># vim /etc/vsftpd/vsftpd.conf </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">..</span>.</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token assign-left variable\">guest_enable</span><span class=\"token operator\">=</span>YES              <span class=\"token comment\">#开启虚拟用户</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token assign-left variable\">guest_username</span><span class=\"token operator\">=</span>vuser          <span class=\"token comment\">#FTP 虚拟用户对应的系统用户</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token assign-left variable\">pam_service_name</span><span class=\"token operator\">=</span>vsftpd       <span class=\"token comment\">#PAM 认证文件（默认存在）</span></pre></td></tr></table></figure><h5 id=\"86-重启vsftp服务并测试\"><a class=\"anchor\" href=\"#86-重启vsftp服务并测试\">#</a> 8.6 重启 VSFTP 服务并测试</h5>\n<ul>\n<li>此时虚拟用户可以登录、查看、下载，不能上传</li>\n<li>默认上传文件的位置是宿主用户的家目录</li>\n<li>权限使用的是匿名用户权限进行管理</li>\n</ul>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># systemctl restart vsftpd</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">#验证并测试，此时虚拟用户可以登录、查看、下载，不能上传报错</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp vftproot<span class=\"token punctuation\">]</span><span class=\"token comment\"># pwd</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>/home/vftproot</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp vftproot<span class=\"token punctuation\">]</span><span class=\"token comment\"># ls</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>a.txt</pre></td></tr></table></figure><p><img loading=\"lazy\" data-src=\"https://wp-cdn.4ce.cn/v2/WPjrX3b.jpeg\" alt=\"1.jpg\" /></p>\n<h5 id=\"87-调整虚拟用户权限\"><a class=\"anchor\" href=\"#87-调整虚拟用户权限\">#</a> 8.7 调整虚拟用户权限</h5>\n<ul>\n<li>给虚拟用户设定权限，允许所有虚拟用上传</li>\n<li>关闭匿名用户登录，更加安全（不影响虚拟用户登录）</li>\n</ul>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># vim /etc/vsftpd/vsftpd.conf </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token assign-left variable\">anonymous_enable</span><span class=\"token operator\">=</span>NO          <span class=\"token comment\">#允许匿名用户登录       ***</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token assign-left variable\">anon_upload_enable</span><span class=\"token operator\">=</span>YES       <span class=\"token comment\">#允许匿名用户上传       ***</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token assign-left variable\">anon_mkdir_write_enable</span><span class=\"token operator\">=</span>YES  <span class=\"token comment\">#允许匿名用户新建目录    ***</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token assign-left variable\">anon_other_write_enable</span><span class=\"token operator\">=</span>YES  <span class=\"token comment\">#允许匿名用户删除或上传  ***</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp vftproot<span class=\"token punctuation\">]</span><span class=\"token comment\"># systemctl restart vsftpd</span></pre></td></tr></table></figure><p><img loading=\"lazy\" data-src=\"https://wp-cdn.4ce.cn/v2/AH9dxIX.jpeg\" alt=\"2.jpg\" /></p>\n<h5 id=\"88-单独定义虚拟用户权限\"><a class=\"anchor\" href=\"#88-单独定义虚拟用户权限\">#</a> 8.8 单独定义虚拟用户权限</h5>\n<p>为每个虚拟用户建立自己的配置文件，每个虚拟用户都有自己的共享目录，并单独定义权限；</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#1. 修改配置文件，指定保存虚拟用户配置文件的目录</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># vim /etc/vsftpd/vsftpd.conf</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token assign-left variable\">user_config_dir</span><span class=\"token operator\">=</span>/etc/vsftpd/vusers_dir       <span class=\"token comment\">#指定保存虚拟用户配置文件的目录</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">#2. 建立目录</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># mkdir /etc/vsftpd/vusers_dir</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">#3. 为每个虚拟用户建立配置文件，配置文件名称与虚拟用户一致，系统会读取与当前用户名相同的配置文件</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># vim /etc/vsftpd/vusers_dir/xuyong</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token assign-left variable\">anon_upload_enable</span><span class=\"token operator\">=</span>YES       <span class=\"token comment\">#允许匿名用户上传       ***</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token assign-left variable\">anon_mkdir_write_enable</span><span class=\"token operator\">=</span>YES  <span class=\"token comment\">#允许匿名用户新建目录    ***</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token assign-left variable\">anon_other_write_enable</span><span class=\"token operator\">=</span>YES  <span class=\"token comment\">#允许匿名用户删除       ***</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token assign-left variable\">local_root</span><span class=\"token operator\">=</span>/data/xuyong      <span class=\"token comment\">#xuyong 指定独立的上传目录</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># vim /etc/vsftpd/vusers_dir/zhangwuji</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token assign-left variable\">anon_upload_enable</span><span class=\"token operator\">=</span>YES       <span class=\"token comment\">#允许匿名用户上传       ***</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token assign-left variable\">anon_mkdir_write_enable</span><span class=\"token operator\">=</span>YES  <span class=\"token comment\">#允许匿名用户新建目录    ***</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token assign-left variable\">anon_other_write_enable</span><span class=\"token operator\">=</span>NO   <span class=\"token comment\">#允许匿名用户删除       ***</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token assign-left variable\">local_root</span><span class=\"token operator\">=</span>/data/zhangwuji   <span class=\"token comment\">#zhangwuji 指定独立的上传目录</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># vim /etc/vsftpd/vusers_dir/zhaomin</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token assign-left variable\">anon_upload_enable</span><span class=\"token operator\">=</span>YES       <span class=\"token comment\">#允许匿名用户上传       ***</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token assign-left variable\">anon_mkdir_write_enable</span><span class=\"token operator\">=</span>NO   <span class=\"token comment\">#允许匿名用户新建目录    ***</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token assign-left variable\">anon_other_write_enable</span><span class=\"token operator\">=</span>NO   <span class=\"token comment\">#允许匿名用户删除       ***</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token assign-left variable\">local_root</span><span class=\"token operator\">=</span>/data/zhaomin     <span class=\"token comment\">#zhaomin 指定独立的上传目录</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token comment\">#4. 新建上传目录并配置虚拟用户系统权限</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># mkdir /data/xuyong</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># mkdir /data/zhangwuji</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># mkdir /data/zhaomin</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># chown vuser:vuser /data/xuyong</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># chown vuser:vuser /data/zhangwuji</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># chown vuser:vuser /data/zhaomi</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token comment\">#5. 重启服务验证并测试</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token punctuation\">[</span>root@vsftp vftproot<span class=\"token punctuation\">]</span><span class=\"token comment\"># systemctl restart vsftpd</span></pre></td></tr></table></figure><ul>\n<li>用户 xuyong 可以登录、查看、下载，删除、创建目录和文件、上传</li>\n<li>用户 zhangwuji 可以登录、查看、下载、创建目录和文件，上传，无法删除</li>\n<li>用户 zhangwuji 可以登录、查看、下载、上传，无法删除、创建目录和文件</li>\n</ul>\n",
            "tags": [
                "Linux"
            ]
        },
        {
            "id": "http://ixuyong.cn/posts/581151773.html",
            "url": "http://ixuyong.cn/posts/581151773.html",
            "title": "100个运维相关技术官网汇总",
            "date_published": "2025-06-19T13:16:37.000Z",
            "content_html": "<h3 id=\"100个运维相关技术官网大汇总\"><a class=\"anchor\" href=\"#100个运维相关技术官网大汇总\">#</a> 100 个运维相关技术官网大汇总</h3>\n<h4 id=\"1-操作系统官网\"><a class=\"anchor\" href=\"#1-操作系统官网\">#</a> <strong>1. 操作系统官网</strong></h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">名称</th>\n<th style=\"text-align:left\">官网链接</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">Ubuntu</td>\n<td style=\"text-align:left\"><a href=\"https://ubuntu.com\">https://ubuntu.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Debian</td>\n<td style=\"text-align:left\"><a href=\"https://www.debian.org\">https://www.debian.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">RHEL</td>\n<td style=\"text-align:left\"><a href=\"https://www.redhat.com\">https://www.redhat.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Rocky Linux</td>\n<td style=\"text-align:left\"><a href=\"https://rockylinux.org\">https://rockylinux.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">AlmaLinux</td>\n<td style=\"text-align:left\"><a href=\"https://almalinux.org\">https://almalinux.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Arch Wiki</td>\n<td style=\"text-align:left\"><a href=\"https://wiki.archlinux.org\">https://wiki.archlinux.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">麒麟系统</td>\n<td style=\"text-align:left\"><a href=\"https://www.kylinos.cn/\">https://www.kylinos.cn/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">统信系统</td>\n<td style=\"text-align:left\"><a href=\"https://uniontech.com/\">https://uniontech.com/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">openEuler</td>\n<td style=\"text-align:left\"><a href=\"https://www.openeuler.org/zh/\">https://www.openeuler.org/zh/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">正版操作系统</td>\n<td style=\"text-align:left\"><a href=\"https://msdn.itellyou.cn/\">https://msdn.itellyou.cn/</a></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"2-开源镜像站\"><a class=\"anchor\" href=\"#2-开源镜像站\">#</a> <strong>2. 开源镜像站</strong></h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">镜像源名称</th>\n<th style=\"text-align:left\">官网链接</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">清华大学镜像站</td>\n<td style=\"text-align:left\"><a href=\"https://mirrors.tuna.tsinghua.edu.cn\">https://mirrors.tuna.tsinghua.edu.cn</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">中科大镜像站</td>\n<td style=\"text-align:left\"><a href=\"https://mirrors.ustc.edu.cn\">https://mirrors.ustc.edu.cn</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">阿里云镜像站</td>\n<td style=\"text-align:left\"><a href=\"https://developer.aliyun.com/mirror\">https://developer.aliyun.com/mirror</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">华为云镜像站</td>\n<td style=\"text-align:left\"><a href=\"https://mirrors.huaweicloud.com\">https://mirrors.huaweicloud.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">中国科技网镜像</td>\n<td style=\"text-align:left\"><a href=\"https://mirrors.cstcloud.cn\">https://mirrors.cstcloud.cn</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">网易开源镜像站</td>\n<td style=\"text-align:left\"><a href=\"http://mirrors.163.com\">http://mirrors.163.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">腾讯云镜像站</td>\n<td style=\"text-align:left\"><a href=\"https://mirrors.cloud.tencent.com\">https://mirrors.cloud.tencent.com</a></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"3-容器与-kubernetes\"><a class=\"anchor\" href=\"#3-容器与-kubernetes\">#</a> <strong>3. 容器与 Kubernetes</strong></h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">名称</th>\n<th style=\"text-align:left\">官网链接</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">Docker</td>\n<td style=\"text-align:left\"><a href=\"https://www.docker.com\">https://www.docker.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Kubernetes</td>\n<td style=\"text-align:left\"><a href=\"https://kubernetes.io\">https://kubernetes.io</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Helm</td>\n<td style=\"text-align:left\"><a href=\"https://helm.sh\">https://helm.sh</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Podman</td>\n<td style=\"text-align:left\"><a href=\"https://podman.io\">https://podman.io</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">containerd</td>\n<td style=\"text-align:left\"><a href=\"https://containerd.io\">https://containerd.io</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">K3s</td>\n<td style=\"text-align:left\"><a href=\"https://k3s.io\">https://k3s.io</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Rancher</td>\n<td style=\"text-align:left\"><a href=\"https://www.rancher.com/\">https://www.rancher.com/</a></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"4-云平台\"><a class=\"anchor\" href=\"#4-云平台\">#</a> <strong>4. 云平台</strong></h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">名称</th>\n<th style=\"text-align:left\">官网链接</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">AWS</td>\n<td style=\"text-align:left\"><a href=\"https://aws.amazon.com\">https://aws.amazon.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Azure</td>\n<td style=\"text-align:left\"><a href=\"https://azure.microsoft.com\">https://azure.microsoft.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">阿里云</td>\n<td style=\"text-align:left\"><a href=\"https://www.aliyun.com\">https://www.aliyun.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">腾讯云</td>\n<td style=\"text-align:left\"><a href=\"https://cloud.tencent.com\">https://cloud.tencent.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">华为云</td>\n<td style=\"text-align:left\"><a href=\"https://www.huaweicloud.com\">https://www.huaweicloud.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">天翼云</td>\n<td style=\"text-align:left\"><a href=\"https://www.ctyun.cn/\">https://www.ctyun.cn/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">OpenStack</td>\n<td style=\"text-align:left\"><a href=\"https://www.openstack.org\">https://www.openstack.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">CNCF Landscape</td>\n<td style=\"text-align:left\"><a href=\"https://landscape.cncf.io\">https://landscape.cncf.io</a></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"5-数据库\"><a class=\"anchor\" href=\"#5-数据库\">#</a> <strong>5. 数据库</strong></h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">名称</th>\n<th style=\"text-align:left\">官网链接</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">MySQL</td>\n<td style=\"text-align:left\"><a href=\"https://www.mysql.com\">https://www.mysql.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Oracle</td>\n<td style=\"text-align:left\"><a href=\"https://www.oracle.com/\">https://www.oracle.com/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">PostgreSQL</td>\n<td style=\"text-align:left\"><a href=\"https://www.postgresql.org\">https://www.postgresql.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">MariaDB</td>\n<td style=\"text-align:left\"><a href=\"https://mariadb.org\">https://mariadb.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">MongoDB</td>\n<td style=\"text-align:left\"><a href=\"https://www.mongodb.com\">https://www.mongodb.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Redis</td>\n<td style=\"text-align:left\"><a href=\"https://redis.io\">https://redis.io</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Memcached</td>\n<td style=\"text-align:left\"><a href=\"https://memcached.org\">https://memcached.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">达梦数据库</td>\n<td style=\"text-align:left\"><a href=\"https://www.dameng.com/\">https://www.dameng.com/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">OceanBase</td>\n<td style=\"text-align:left\"><a href=\"https://www.oceanbase.com/\">https://www.oceanbase.com/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Elasticsearch</td>\n<td style=\"text-align:left\"><a href=\"https://www.elastic.co/elasticsearch/\">https://www.elastic.co/elasticsearch/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ClickHouse</td>\n<td style=\"text-align:left\"><a href=\"https://clickhouse.com\">https://clickhouse.com</a></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"6-基础服务\"><a class=\"anchor\" href=\"#6-基础服务\">#</a> <strong>6. 基础服务</strong></h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">名称</th>\n<th style=\"text-align:left\">官网链接</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">Nginx</td>\n<td style=\"text-align:left\"><a href=\"https://nginx.org\">https://nginx.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Apache HTTPD</td>\n<td style=\"text-align:left\"><a href=\"https://httpd.apache.org\">https://httpd.apache.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Tomcat</td>\n<td style=\"text-align:left\"><a href=\"https://tomcat.apache.org/\">https://tomcat.apache.org/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">HAProxy</td>\n<td style=\"text-align:left\"><a href=\"https://www.haproxy.org\">https://www.haproxy.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Dnsmasq</td>\n<td style=\"text-align:left\"><a href=\"https://thekelleys.org.uk/dnsmasq/doc.html\">https://thekelleys.org.uk/dnsmasq/doc.html</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">CoreDNS</td>\n<td style=\"text-align:left\"><a href=\"https://coredns.io\">https://coredns.io</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">RabbitMQ</td>\n<td style=\"text-align:left\"><a href=\"https://www.rabbitmq.com\">https://www.rabbitmq.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Kafka</td>\n<td style=\"text-align:left\"><a href=\"https://kafka.apache.org\">https://kafka.apache.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Etcd</td>\n<td style=\"text-align:left\"><a href=\"https://etcd.io\">https://etcd.io</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Consul</td>\n<td style=\"text-align:left\"><a href=\"https://www.consul.io\">https://www.consul.io</a></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"7-cicd-与服务网格\"><a class=\"anchor\" href=\"#7-cicd-与服务网格\">#</a> <strong>7. CI/CD 与服务网格</strong></h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">名称</th>\n<th style=\"text-align:left\">官网链接</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">Jenkins</td>\n<td style=\"text-align:left\"><a href=\"https://www.jenkins.io\">https://www.jenkins.io</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">GitLab CI/CD</td>\n<td style=\"text-align:left\"><a href=\"https://about.gitlab.com\">https://about.gitlab.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">GitHub Actions</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/features/actions\">https://github.com/features/actions</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ArgoCD</td>\n<td style=\"text-align:left\"><a href=\"https://argo-cd.readthedocs.io/\">https://argo-cd.readthedocs.io/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Spinnaker</td>\n<td style=\"text-align:left\"><a href=\"https://spinnaker.io\">https://spinnaker.io</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Istio</td>\n<td style=\"text-align:left\"><a href=\"https://istio.io/\">https://istio.io/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Envoy Proxy</td>\n<td style=\"text-align:left\"><a href=\"https://www.envoyproxy.io\">https://www.envoyproxy.io</a></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"8-监控与日志系统\"><a class=\"anchor\" href=\"#8-监控与日志系统\">#</a> <strong>8. 监控与日志系统</strong></h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">名称</th>\n<th style=\"text-align:left\">官网链接</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">Prometheus</td>\n<td style=\"text-align:left\"><a href=\"https://prometheus.io\">https://prometheus.io</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Grafana</td>\n<td style=\"text-align:left\"><a href=\"https://grafana.com\">https://grafana.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Loki</td>\n<td style=\"text-align:left\"><a href=\"https://grafana.com/oss/loki/\">https://grafana.com/oss/loki/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ELK Stack</td>\n<td style=\"text-align:left\"><a href=\"https://www.elastic.co/what-is/elk-stack\">https://www.elastic.co/what-is/elk-stack</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Kibana</td>\n<td style=\"text-align:left\"><a href=\"https://www.elastic.co/kibana/\">https://www.elastic.co/kibana/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Fluentd</td>\n<td style=\"text-align:left\"><a href=\"https://www.fluentd.org\">https://www.fluentd.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Zabbix</td>\n<td style=\"text-align:left\"><a href=\"https://www.zabbix.com\">https://www.zabbix.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Netdata</td>\n<td style=\"text-align:left\"><a href=\"https://www.netdata.cloud\">https://www.netdata.cloud</a></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"9-自动化运维工具\"><a class=\"anchor\" href=\"#9-自动化运维工具\">#</a> <strong>9. 自动化运维工具</strong></h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">名称</th>\n<th style=\"text-align:left\">官网链接</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">Ansible</td>\n<td style=\"text-align:left\"><a href=\"https://docs.ansible.com/\">https://docs.ansible.com/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Terraform</td>\n<td style=\"text-align:left\"><a href=\"https://developer.hashicorp.com/terraform/docs\">https://developer.hashicorp.com/terraform/docs</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">SaltStack</td>\n<td style=\"text-align:left\"><a href=\"https://docs.saltproject.io/\">https://docs.saltproject.io/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Puppet</td>\n<td style=\"text-align:left\"><a href=\"https://puppet.com/docs/\">https://puppet.com/docs/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Chef</td>\n<td style=\"text-align:left\"><a href=\"https://docs.chef.io/\">https://docs.chef.io/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Packer</td>\n<td style=\"text-align:left\"><a href=\"https://developer.hashicorp.com/packer/docs\">https://developer.hashicorp.com/packer/docs</a></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"10-运维常用工具\"><a class=\"anchor\" href=\"#10-运维常用工具\">#</a> <strong>10. 运维常用工具</strong></h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">工具名称</th>\n<th style=\"text-align:left\">官网链接</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">Xshell</td>\n<td style=\"text-align:left\"><a href=\"https://www.netsarang.com/zh/xshell/\">https://www.netsarang.com/zh/xshell/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Xftp</td>\n<td style=\"text-align:left\"><a href=\"https://www.netsarang.com/en/xftp/\">https://www.netsarang.com/en/xftp/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">MobaXterm</td>\n<td style=\"text-align:left\"><a href=\"https://mobaxterm.mobatek.net\">https://mobaxterm.mobatek.net</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">PuTTY</td>\n<td style=\"text-align:left\"><a href=\"https://www.putty.org\">https://www.putty.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">SecureCRT</td>\n<td style=\"text-align:left\"><a href=\"https://www.vandyke.com/products/securecrt/\">https://www.vandyke.com/products/securecrt/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">WinSCP</td>\n<td style=\"text-align:left\"><a href=\"https://winscp.net\">https://winscp.net</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">FileZilla</td>\n<td style=\"text-align:left\"><a href=\"https://filezilla-project.org\">https://filezilla-project.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">FastCopy</td>\n<td style=\"text-align:left\"><a href=\"https://fastcopy.jp/en/\">https://fastcopy.jp/en/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Everything</td>\n<td style=\"text-align:left\"><a href=\"https://www.voidtools.com\">https://www.voidtools.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Wireshark</td>\n<td style=\"text-align:left\"><a href=\"https://www.wireshark.org\">https://www.wireshark.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">VirtualBox</td>\n<td style=\"text-align:left\"><a href=\"https://www.virtualbox.org/\">https://www.virtualbox.org/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">VMware Workstation</td>\n<td style=\"text-align:left\"><a href=\"https://www.vmware.com/products/workstation-pro.html\">https://www.vmware.com/products/workstation-pro.html</a></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"11-数据库可视化连接工具\"><a class=\"anchor\" href=\"#11-数据库可视化连接工具\">#</a> <strong>11. 数据库可视化连接工具</strong></h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">工具名称</th>\n<th style=\"text-align:left\">官网链接</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">DBeaver</td>\n<td style=\"text-align:left\"><a href=\"https://dbeaver.io\">https://dbeaver.io</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Navicat</td>\n<td style=\"text-align:left\"><a href=\"https://www.navicat.com\">https://www.navicat.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">HeidiSQL</td>\n<td style=\"text-align:left\"><a href=\"https://www.heidisql.com\">https://www.heidisql.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">SSMS</td>\n<td style=\"text-align:left\"><a href=\"https://learn.microsoft.com/sql/ssms/\">https://learn.microsoft.com/sql/ssms/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Toad for Oracle</td>\n<td style=\"text-align:left\"><a href=\"https://www.toadworld.com/products/toad-for-oracle\">https://www.toadworld.com/products/toad-for-oracle</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">SQL Developer</td>\n<td style=\"text-align:left\"><a href=\"https://www.oracle.com/database/sqldeveloper/\">https://www.oracle.com/database/sqldeveloper/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">DbVisualizer</td>\n<td style=\"text-align:left\"><a href=\"https://www.dbvis.com\">https://www.dbvis.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">SQL Workbench</td>\n<td style=\"text-align:left\"><a href=\"https://www.sql-workbench.eu\">https://www.sql-workbench.eu</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">phpMyAdmin</td>\n<td style=\"text-align:left\"><a href=\"https://www.phpmyadmin.net\">https://www.phpmyadmin.net</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">pgAdmin</td>\n<td style=\"text-align:left\"><a href=\"https://www.pgadmin.org\">https://www.pgadmin.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">MongoDB Compass</td>\n<td style=\"text-align:left\"><a href=\"https://www.mongodb.com/products/compass\">https://www.mongodb.com/products/compass</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">RedisInsight</td>\n<td style=\"text-align:left\"><a href=\"https://redis.com/redis-enterprise/redis-insight/\">https://redis.com/redis-enterprise/redis-insight/</a></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"12-实用工具\"><a class=\"anchor\" href=\"#12-实用工具\">#</a> 12. 实用工具</h4>\n<table>\n<thead>\n<tr>\n<th>工具名称</th>\n<th>官网链接</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>图床工具</td>\n<td><a href=\"https://wp-cdn.4ce.cn/\">https://wp-cdn.4ce.cn/</a></td>\n</tr>\n<tr>\n<td>科学上网</td>\n<td><a href=\"https://ikuuu.one/auth/register\">https://ikuuu.one/auth/register</a></td>\n</tr>\n<tr>\n<td>截图工具</td>\n<td><a href=\"https://pixpin.cn/\">https://pixpin.cn/</a></td>\n</tr>\n<tr>\n<td>FileZilla</td>\n<td><a href=\"https://www.filezilla.cn/download/client\">https://www.filezilla.cn/download/client</a></td>\n</tr>\n</tbody>\n</table>\n",
            "tags": [
                "Linux"
            ]
        },
        {
            "id": "http://ixuyong.cn/posts/2260957686.html",
            "url": "http://ixuyong.cn/posts/2260957686.html",
            "title": "Linux—Centos7修改网卡名称",
            "date_published": "2025-06-07T02:40:25.000Z",
            "content_html": "<h3 id=\"linuxcentos7修改网卡名称\"><a class=\"anchor\" href=\"#linuxcentos7修改网卡名称\">#</a> Linux—Centos7 修改网卡名称</h3>\n<p>首先我们先了解不同网卡名称对应的内核参数：</p>\n<ol>\n<li>biosdevname=0  net.ifnames=1：网卡名 “enp<em>s</em>” 此内核参数一般为默认</li>\n<li>biosdevname=1  net.ifnames=0：网卡名 “em*”</li>\n<li>biosdevname=0  net.ifnames=0：网卡名 “eth*”</li>\n</ol>\n<p>本次以将网卡名命名为 eth * 格式作示例</p>\n<h4 id=\"1-查看当前网卡的信息\"><a class=\"anchor\" href=\"#1-查看当前网卡的信息\">#</a> 1. 查看当前网卡的信息</h4>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@manager ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># ifconfig</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>ens33: <span class=\"token assign-left variable\">flags</span><span class=\"token operator\">=</span><span class=\"token number\">416</span><span class=\"token operator\"><span class=\"token file-descriptor important\">3</span>&lt;</span>UP,BROADCAST,RUNNING,MULTICAST<span class=\"token operator\">></span>  mtu <span class=\"token number\">1500</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        inet <span class=\"token number\">192.168</span>.40.88  netmask <span class=\"token number\">255.255</span>.255.0  broadcast <span class=\"token number\">192.168</span>.40.255</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        inet6 fe80::b92f:3dd3:19e7:1311  prefixlen <span class=\"token number\">64</span>  scopeid 0x2<span class=\"token operator\"><span class=\"token file-descriptor important\">0</span>&lt;</span>link<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        ether 00:0c:29:5e:a0:59  txqueuelen <span class=\"token number\">1000</span>  <span class=\"token punctuation\">(</span>Ethernet<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        RX packets <span class=\"token number\">75</span>  bytes <span class=\"token number\">8065</span> <span class=\"token punctuation\">(</span><span class=\"token number\">7.8</span> KiB<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        RX errors <span class=\"token number\">0</span>  dropped <span class=\"token number\">0</span>  overruns <span class=\"token number\">0</span>  frame <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        TX packets <span class=\"token number\">63</span>  bytes <span class=\"token number\">7754</span> <span class=\"token punctuation\">(</span><span class=\"token number\">7.5</span> KiB<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        TX errors <span class=\"token number\">0</span>  dropped <span class=\"token number\">0</span> overruns <span class=\"token number\">0</span>  carrier <span class=\"token number\">0</span>  collisions <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>lo: <span class=\"token assign-left variable\">flags</span><span class=\"token operator\">=</span><span class=\"token number\">7</span><span class=\"token operator\"><span class=\"token file-descriptor important\">3</span>&lt;</span>UP,LOOPBACK,RUNNING<span class=\"token operator\">></span>  mtu <span class=\"token number\">65536</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        inet <span class=\"token number\">127.0</span>.0.1  netmask <span class=\"token number\">255.0</span>.0.0</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        inet6 ::1  prefixlen <span class=\"token number\">128</span>  scopeid 0x1<span class=\"token operator\"><span class=\"token file-descriptor important\">0</span>&lt;</span>host<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        loop  txqueuelen <span class=\"token number\">1000</span>  <span class=\"token punctuation\">(</span>Local Loopback<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        RX packets <span class=\"token number\">0</span>  bytes <span class=\"token number\">0</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.0</span> B<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        RX errors <span class=\"token number\">0</span>  dropped <span class=\"token number\">0</span>  overruns <span class=\"token number\">0</span>  frame <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        TX packets <span class=\"token number\">0</span>  bytes <span class=\"token number\">0</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.0</span> B<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        TX errors <span class=\"token number\">0</span>  dropped <span class=\"token number\">0</span> overruns <span class=\"token number\">0</span>  carrier <span class=\"token number\">0</span>  collisions <span class=\"token number\">0</span></pre></td></tr></table></figure><h4 id=\"2-修改配置文件\"><a class=\"anchor\" href=\"#2-修改配置文件\">#</a> 2 . 修改配置文件</h4>\n<p>（1）在下列路径下找到 ifcgf-ens33</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@manager ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cd /etc/sysconfig/network-scripts/</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@manager network-scripts<span class=\"token punctuation\">]</span><span class=\"token comment\"># ls</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>ifcfg-ens33  ifdown-ippp  ifdown-routes    <span class=\"token function\">ifup</span>          ifup-ipv6   ifup-ppp       ifup-tunnel</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>ifcfg-lo     ifdown-ipv6  ifdown-sit       ifup-aliases  ifup-isdn   ifup-routes    ifup-wireless</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">ifdown</span>       ifdown-isdn  ifdown-Team      ifup-bnep     ifup-plip   ifup-sit       init.ipv6-global</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>ifdown-bnep  ifdown-post  ifdown-TeamPort  ifup-eth      ifup-plusb  ifup-Team      network-functions</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>ifdown-eth   ifdown-ppp   ifdown-tunnel    ifup-ippp     ifup-post   ifup-TeamPort  network-functions-ipv6</pre></td></tr></table></figure><p>（2）使用 MV 命令，修改当前网卡的名称</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@manager ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># mv ifcfg-ens33 ifcfg-eth0</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@manager network-scripts<span class=\"token punctuation\">]</span><span class=\"token comment\"># ls</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>ifcfg-eth0   ifdown-ippp  ifdown-routes    <span class=\"token function\">ifup</span>          ifup-ipv6   ifup-ppp       ifup-tunnel</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>ifcfg-lo     ifdown-ipv6  ifdown-sit       ifup-aliases  ifup-isdn   ifup-routes    ifup-wireless</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">ifdown</span>       ifdown-isdn  ifdown-Team      ifup-bnep     ifup-plip   ifup-sit       init.ipv6-global</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>ifdown-bnep  ifdown-post  ifdown-TeamPort  ifup-eth      ifup-plusb  ifup-Team      network-functions</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>ifdown-eth   ifdown-ppp   ifdown-tunnel    ifup-ippp     ifup-post   ifup-TeamPort  network-functions-ipv6</pre></td></tr></table></figure><p>（3）同步修改网卡配置文件中的 name 和 device，修改为需要配置网卡的名字</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token assign-left variable\">NAME</span><span class=\"token operator\">=</span><span class=\"token string\">\"ens33\"</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token assign-left variable\">DEVICE</span><span class=\"token operator\">=</span><span class=\"token string\">\"ens33\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre> </pre></td></tr><tr><td data-num=\"4\"></td><td><pre>将上列命令修改为</pre></td></tr><tr><td data-num=\"5\"></td><td><pre> </pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token assign-left variable\">NAME</span><span class=\"token operator\">=</span><span class=\"token string\">\"eth0\"</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token assign-left variable\">DEVICE</span><span class=\"token operator\">=</span><span class=\"token string\">\"eth0\"</span></pre></td></tr></table></figure><p>（4）修改 grub</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@manager ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cd /etc/default/</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">#编辑内核信息，在 GRUB_CMDLINE_LINUX 行添加字段 net.ifnames=0 biosdevname=0</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">[</span>root@manager default<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat grub </span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token assign-left variable\">GRUB_TIMEOUT</span><span class=\"token operator\">=</span><span class=\"token number\">5</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token assign-left variable\">GRUB_DISTRIBUTOR</span><span class=\"token operator\">=</span><span class=\"token string\">\"<span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">sed</span> <span class=\"token string\">'s, release .*$,,g'</span> /etc/system-release<span class=\"token variable\">)</span></span>\"</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token assign-left variable\">GRUB_DEFAULT</span><span class=\"token operator\">=</span>saved</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token assign-left variable\">GRUB_DISABLE_SUBMENU</span><span class=\"token operator\">=</span>true</pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token assign-left variable\">GRUB_TERMINAL_OUTPUT</span><span class=\"token operator\">=</span><span class=\"token string\">\"console\"</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token assign-left variable\">GRUB_CMDLINE_LINUX</span><span class=\"token operator\">=</span><span class=\"token string\">\"crashkernel=auto rhgb net.ifnames=0 biosdevname=0 quiet\"</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token assign-left variable\">GRUB_DISABLE_RECOVERY</span><span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\">#生成启动菜单</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">[</span>root@manager default<span class=\"token punctuation\">]</span><span class=\"token comment\"># grub2-mkconfig -o /boot/grub2/grub.cfg</span></pre></td></tr></table></figure><p>（5）完成之后 reboot 重启系统即可</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@manager default<span class=\"token punctuation\">]</span><span class=\"token comment\"># reboot</span></pre></td></tr></table></figure><p>（6）使用 ifconfig 即可查看</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@manager ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># ifconfig</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>eth0: <span class=\"token assign-left variable\">flags</span><span class=\"token operator\">=</span><span class=\"token number\">416</span><span class=\"token operator\"><span class=\"token file-descriptor important\">3</span>&lt;</span>UP,BROADCAST,RUNNING,MULTICAST<span class=\"token operator\">></span>  mtu <span class=\"token number\">1500</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        inet <span class=\"token number\">192.168</span>.40.88  netmask <span class=\"token number\">255.255</span>.255.0  broadcast <span class=\"token number\">192.168</span>.40.255</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        inet6 fe80::63d4:467f:9b76:e34f  prefixlen <span class=\"token number\">64</span>  scopeid 0x2<span class=\"token operator\"><span class=\"token file-descriptor important\">0</span>&lt;</span>link<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        inet6 fe80::1856:7b0:9d1e:7208  prefixlen <span class=\"token number\">64</span>  scopeid 0x2<span class=\"token operator\"><span class=\"token file-descriptor important\">0</span>&lt;</span>link<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        ether 00:0c:29:5e:a0:59  txqueuelen <span class=\"token number\">1000</span>  <span class=\"token punctuation\">(</span>Ethernet<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        RX packets <span class=\"token number\">77</span>  bytes <span class=\"token number\">8117</span> <span class=\"token punctuation\">(</span><span class=\"token number\">7.9</span> KiB<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        RX errors <span class=\"token number\">0</span>  dropped <span class=\"token number\">0</span>  overruns <span class=\"token number\">0</span>  frame <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        TX packets <span class=\"token number\">62</span>  bytes <span class=\"token number\">7842</span> <span class=\"token punctuation\">(</span><span class=\"token number\">7.6</span> KiB<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        TX errors <span class=\"token number\">0</span>  dropped <span class=\"token number\">0</span> overruns <span class=\"token number\">0</span>  carrier <span class=\"token number\">0</span>  collisions <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>lo: <span class=\"token assign-left variable\">flags</span><span class=\"token operator\">=</span><span class=\"token number\">7</span><span class=\"token operator\"><span class=\"token file-descriptor important\">3</span>&lt;</span>UP,LOOPBACK,RUNNING<span class=\"token operator\">></span>  mtu <span class=\"token number\">65536</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        inet <span class=\"token number\">127.0</span>.0.1  netmask <span class=\"token number\">255.0</span>.0.0</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        inet6 ::1  prefixlen <span class=\"token number\">128</span>  scopeid 0x1<span class=\"token operator\"><span class=\"token file-descriptor important\">0</span>&lt;</span>host<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        loop  txqueuelen <span class=\"token number\">1000</span>  <span class=\"token punctuation\">(</span>Local Loopback<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        RX packets <span class=\"token number\">0</span>  bytes <span class=\"token number\">0</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.0</span> B<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        RX errors <span class=\"token number\">0</span>  dropped <span class=\"token number\">0</span>  overruns <span class=\"token number\">0</span>  frame <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        TX packets <span class=\"token number\">0</span>  bytes <span class=\"token number\">0</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.0</span> B<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        TX errors <span class=\"token number\">0</span>  dropped <span class=\"token number\">0</span> overruns <span class=\"token number\">0</span>  carrier <span class=\"token number\">0</span>  collisions <span class=\"token number\">0</span></pre></td></tr></table></figure>",
            "tags": [
                "Linux"
            ]
        }
    ]
}