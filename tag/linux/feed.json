{
    "version": "https://jsonfeed.org/version/1",
    "title": "LinuxSre云原生 • All posts by \"linux\" tag",
    "description": "专注于 Linux 运维、云计算、云原⽣等技术",
    "home_page_url": "http://ixuyong.cn",
    "items": [
        {
            "id": "http://ixuyong.cn/posts/4120829732.html",
            "url": "http://ixuyong.cn/posts/4120829732.html",
            "title": "DNS域名解析服务",
            "date_published": "2025-09-19T14:12:25.000Z",
            "content_html": "<h3 id=\"dns域名解析服务\"><a class=\"anchor\" href=\"#dns域名解析服务\">#</a> DNS 域名解析服务</h3>\n<h4 id=\"1-dns基本概述\"><a class=\"anchor\" href=\"#1-dns基本概述\">#</a> 1. DNS 基本概述</h4>\n<h5 id=\"11-为什么需要域名\"><a class=\"anchor\" href=\"#11-为什么需要域名\">#</a> 1.1 为什么需要域名</h5>\n<p>在互联网中，使用 IP 地址与服务器进行通信根本行不通，原因如下：</p>\n<ul>\n<li>1、不好记忆，例如：学校官网的 IP 地址是 &quot;39.104.16.126&quot; ，难以记忆；</li>\n<li>2、IP 地址会经常变更，所以通过 IP 地址去访问某台机器就会发生访不到的问题；</li>\n</ul>\n<p>此时 DNS 协议就应运而生了，那 DNS 解决了什么问题？DNS 主要用来管理域名（比较好记忆的字符）与 IP 地址（比较难记忆）的对应关系表。</p>\n<h5 id=\"12-什么是dns\"><a class=\"anchor\" href=\"#12-什么是dns\">#</a> 1.2 什么是 DNS</h5>\n<p>DNS（Domain Name System） 是 ” 域名系统 “英文缩写，它所提供的服务是用来将域名转换为 IP 地址的工作。 DNS 就是一位” 翻译官 “，它的基本工作原理可以用下图来表示；</p>\n<p><img loading=\"lazy\" data-src=\"https://wp-cdn.4ce.cn/v2/S1Ee9BX.jpeg\" alt=\"1.jpg\" /></p>\n<h5 id=\"13-dns域名结构\"><a class=\"anchor\" href=\"#13-dns域名结构\">#</a> 1.3 DNS 域名结构</h5>\n<p>由于因特网的用户数量较多，所以因特网在命名时采用的是层次树状结构的命名方法。</p>\n<ul>\n<li>1. 互联网中的域名是有结构有规划的；</li>\n<li>2. 由于域名进行了分级，在进行域名和 IP 地址解析时能更容易找到；</li>\n<li>3. 其次域名具备全球唯一性；</li>\n</ul>\n<p><img loading=\"lazy\" data-src=\"https://wp-cdn.4ce.cn/v2/ec0zOe9.png\" alt=\"918540-20230506205656234-525954592.png\" /></p>\n<h5 id=\"14-域名分类\"><a class=\"anchor\" href=\"#14-域名分类\">#</a> 1.4 域名分类</h5>\n<ul>\n<li>\n<p>根域：知道所有顶级域名服务器的域名和地址全世界只有 13 组根服务器，其中 10 台设置在美国，另外的三台设置与英国，瑞典，日本；</p>\n</li>\n<li>\n<p>顶级域：知道所有顶级域名服务器下注册的所有二级域名的 IP 地址。</p>\n<ul>\n<li>\n<p>顶级域有两种：通用域 （com） 域和国家域 （cn【包括 hk/tw】、jp）。</p>\n</li>\n<li>\n<p>顶级域名由 ICANN （互联网名称与数字地址分配机构）委任的注册机构负责运行。</p>\n</li>\n</ul>\n</li>\n<li>\n<p>二级域：负责一个区的域名服务器 （<a href=\"http://hmallleasing.com\">hmallleasing.com</a>）</p>\n<ul>\n<li>无需到 ICANN 进行申请，只需要到运行顶级域的注册机构（阿里、腾讯）去申请即可。</li>\n<li>如果申请的域名没有被注册，也没有被注册为商标，仅需要缴纳一笔年费即可得到心仪的域名。</li>\n</ul>\n</li>\n<li>\n<p>三级域或主机名：根据服务器所提供的业务功能，选择配置对应的主机名称解析记录，比如（www、ops）</p>\n</li>\n</ul>\n<h5 id=\"15-dns查询原理\"><a class=\"anchor\" href=\"#15-dns查询原理\">#</a> 1.5 DNS 查询原理</h5>\n<p>DNS 查询的结果通常会在本地域名服务器中进行缓存，如果本地域名服务器中有缓存的情况下，则会跳过如下 DNS 查询步骤，很快返回解析结果。<br />\n下面的示例则概述了本地域名服务器没有缓存的情况下， DNS 查询所需的步骤：</p>\n<ul>\n<li>1、用户在浏览器中输入 <a href=\"http://example.com\">example.com</a> ， 则由本地域名服务器开始进行递归查询。</li>\n<li>2、本地域名服务器采用迭代查询的方法，向根域名服务器进行查询。</li>\n<li>3、根域名服务器告诉本地域名服务器，下一步应该查询的顶级域名服务器 .TLD 的 IP 地址。</li>\n<li>4、本地域名服务器向顶级域名服务器 .com TLD 进行查询。</li>\n<li>5、.com TLD 服务器告诉本地域名服务器，下一步查询 <a href=\"http://example.com\">example.com</a> 权威域名服务器的 IP 地址。</li>\n<li>6、本地域名服务器向 <a href=\"http://example.com\">example.com</a> 权威域名服务器发送查询。</li>\n<li>7、<a href=\"http://example.com\">example.com</a> 权威域名服务器告诉本地域名服务器所查询的主机 IP 地址。</li>\n<li>8、本地域名服务器最后把查询的 IP 地址响应给浏览器。</li>\n</ul>\n<p><img loading=\"lazy\" data-src=\"https://wp-cdn.4ce.cn/v2/tskD255.jpeg\" alt=\"Snipaste_2025-09-19_22-27-08.jpg\" /></p>\n<h6 id=\"151-递归查询\"><a class=\"anchor\" href=\"#151-递归查询\">#</a> 1.5.1 递归查询</h6>\n<p>递归查询是指 DNS 服务器在收到用户发起的请求时，必须向用户返回一个准确的查询结果。<br />\n如果 DNS 服务器本地没有存储与之对应的信息，则该服务器需要询问其他服务器，并将返回的查询结构提交给用户。</p>\n<h6 id=\"152-迭代查询\"><a class=\"anchor\" href=\"#152-迭代查询\">#</a> 1.5.2 迭代查询</h6>\n<p>迭代查询是指 DNS 服务器在收到用户发起的请求时，并不直接回复查询结果，而是告诉另一台 DNS 服务器的地址，用户再向这台 DNS 服务器提交请求，这样依次反复，直到返回查询结果。</p>\n<h5 id=\"16-dns解析类型\"><a class=\"anchor\" href=\"#16-dns解析类型\">#</a> 1.6 DNS 解析类型</h5>\n<h6 id=\"161-a\"><a class=\"anchor\" href=\"#161-a\">#</a> 1.6.1 A</h6>\n<ul>\n<li>A 记录可实现将域名指向 IP 地址，也称为正向解析；</li>\n<li>正向解析：域名 --&gt; DNS 服务返回 IP；</li>\n</ul>\n<p><img loading=\"lazy\" data-src=\"https://wp-cdn.4ce.cn/v2/3WCbtLs.jpeg\" alt=\"1.jpg\" /></p>\n<h6 id=\"162-ptr\"><a class=\"anchor\" href=\"#162-ptr\">#</a> 1.6.2 PTR</h6>\n<ul>\n<li>PTR 记录可以实现 IP 查找域名，也称为反向解析；</li>\n<li>反向解析： IP--&gt;DNS 服务返回域名；</li>\n</ul>\n<p><img loading=\"lazy\" data-src=\"https://wp-cdn.4ce.cn/v2/BWcFQtl.jpeg\" alt=\"2.jpg\" /></p>\n<h6 id=\"163-cname\"><a class=\"anchor\" href=\"#163-cname\">#</a> 1.6.3 CNAME</h6>\n<ul>\n<li>当需要将域名指向另一个域名，再由另一个域名提供 IP 地址，就需要添加 CNAME 记录；</li>\n<li>最常用 CNAME 的场景有 WAF (Web Application Firewall)、CDN；</li>\n</ul>\n<p><img loading=\"lazy\" data-src=\"https://wp-cdn.4ce.cn/v2/icO0aXj.jpeg\" alt=\"3.jpg\" /></p>\n<h6 id=\"164-ns\"><a class=\"anchor\" href=\"#164-ns\">#</a> 1.6.4 NS</h6>\n<ul>\n<li>1、客户端查询 DNS 服务，如当前 DNS 无法提供权威解析，则返回一条 NS 记录；</li>\n<li>2、客户端在通过 NS 记录中提供的 DNS 权威服务器进行解析；</li>\n</ul>\n<p><img loading=\"lazy\" data-src=\"https://wp-cdn.4ce.cn/v2/e8xVQa8.jpeg\" alt=\"4.jpg\" /></p>\n<h6 id=\"165-mx\"><a class=\"anchor\" href=\"#165-mx\">#</a> 1.6.5 MX</h6>\n<p>MX 记录用于说明哪台服务器是当前区域的邮件服务器，包含内容：</p>\n<ul>\n<li>name：域名</li>\n<li>IN MX：表示是邮件服务器的记录</li>\n<li>数字：代表优先级</li>\n<li>邮件服务器的完整域名：FQDN</li>\n</ul>\n<h5 id=\"17-企业自建dns方式\"><a class=\"anchor\" href=\"#17-企业自建dns方式\">#</a> 1.7 企业自建 DNS 方式</h5>\n<p>企业常规做法：购买域名、完成 ICP 备案，并使用公网 DNS 服务（万网..）进行免费（付费）解析。</p>\n<p>为什么需要自建 DNS？</p>\n<ul>\n<li>1、内网 web 服务，例如： jenkins、jumpserver、wiki 等，不适合解析至公网；</li>\n<li>2、内网中间件服务 db、mq 等，由于会经常迁移或扩缩容，应该使用域名对外提供，便于维护；</li>\n<li>3、服务器都有 hostname ， hostname 应该设置为 FQDN ，如何维护主机名和主机的内网 IP 的关系；</li>\n</ul>\n<p>综上：我们需要构建至少一套企业内部的 DNS 服务；</p>\n<h4 id=\"2-bind基础应用\"><a class=\"anchor\" href=\"#2-bind基础应用\">#</a> 2. BIND 基础应用</h4>\n<h5 id=\"21-什么是bind\"><a class=\"anchor\" href=\"#21-什么是bind\">#</a> 2.1 什么是 BIND</h5>\n<p>BIND （由美国加州大学开发并且维护的）、BIND 是一个开源、稳定、且应用广泛的 DNS 服务。</p>\n<ul>\n<li>开源：指 BIND 服务源代码是开放的；</li>\n<li>稳定：指 BIND 服务运行非常稳定；</li>\n<li>广泛：政府企业、单位机构、学校、等；</li>\n</ul>\n<h5 id=\"22-bind的组成\"><a class=\"anchor\" href=\"#22-bind的组成\">#</a> 2.2 BIND 的组成</h5>\n<p>BIND 提供（域名解析服务、权威域名服务、DNS 调试工具）</p>\n<ul>\n<li>域名解析服务：将域名解析为 IP 地址；</li>\n<li>权威域名服务：能从该服务器查询到完整域名对应的 IP 地址，则这台服务器就算权威解析；</li>\n<li>DNS 调试工具：主要提供 DNS 客户端调试工具，供客户端使用；</li>\n</ul>\n<h5 id=\"23-bind服务实战\"><a class=\"anchor\" href=\"#23-bind服务实战\">#</a> 2.3 BIND 服务实战</h5>\n<h6 id=\"231-bind环境准备\"><a class=\"anchor\" href=\"#231-bind环境准备\">#</a> 2.3.1 BIND 环境准备</h6>\n<table>\n<thead>\n<tr>\n<th>系统版本</th>\n<th>外网地址</th>\n<th>内网地址</th>\n<th>功能及作用</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Centos7</td>\n<td>eth0：192.168.40.91</td>\n<td>eth1：172.16.1.91</td>\n<td>DNS-Master</td>\n</tr>\n<tr>\n<td>Centos7</td>\n<td>eth0：192.168.40.92</td>\n<td>eth1：172.16.1.92</td>\n<td>DNS-Slave</td>\n</tr>\n<tr>\n<td>Centos7</td>\n<td>eth0：192.168.40.93</td>\n<td>eth1：172.16.1.93</td>\n<td>DNS-Son【子域】</td>\n</tr>\n</tbody>\n</table>\n<h6 id=\"232-bind服务安装\"><a class=\"anchor\" href=\"#232-bind服务安装\">#</a> 2.3.2 BIND 服务安装</h6>\n<p>Bind 的安装非常简单，只需要通过 yum 即可完成安装；</p>\n<ul>\n<li>1、bind 提供主程序包；</li>\n<li>2、bind-utils 提供工具包；</li>\n</ul>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># yum install bind bind-utils -y</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># systemctl start named &amp;&amp; systemctl enable named</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># rndc-confgen -r /dev/urandom -a</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># chown root:named /etc/rndc.key</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># chmod 640 /etc/rndc.key </span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># systemctl restart named</span></pre></td></tr></table></figure><h6 id=\"233-bind配置文件\"><a class=\"anchor\" href=\"#233-bind配置文件\">#</a> 2.3.3 BIND 配置文件</h6>\n<ol>\n<li>主配置文件格式</li>\n</ol>\n<ul>\n<li>options {} ：全局选项（监听端口、数据文件存储位置、缓存位置、权限等）</li>\n<li>logging {} ：服务日志选项</li>\n<li>zone . {}：自定义区域配置</li>\n<li>include：包含别的文件</li>\n</ul>\n<ol start=\"2\">\n<li>主配置文件注意事项</li>\n</ol>\n<ul>\n<li>语法非常严格；</li>\n<li>文件权限属主 root ，属组 named ，文件权限 640</li>\n</ul>\n<ol start=\"3\">\n<li>配置文件解析</li>\n</ol>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat /etc/named.conf </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>options <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t// ipv4监听地址及端口</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\tlisten-on port <span class=\"token number\">53</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token number\">127.0</span>.0.1<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre> \t// ipv6监听地址及端口</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\tlisten-on-v6 port <span class=\"token number\">53</span> <span class=\"token punctuation\">&#123;</span> ::1<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t// 区域配置存储目录</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\tdirectory \t<span class=\"token string\">\"/var/named\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t// DNS解析过内容的缓存文件</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\tdump-file \t<span class=\"token string\">\"/var/named/data/cache_dump.db\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\t// 静态解析文件（几乎不用）</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>\tstatistics-file <span class=\"token string\">\"/var/named/data/named_stats.txt\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>\t// 内存的统计信息</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>\tmemstatistics-file <span class=\"token string\">\"/var/named/data/named_mem_stats.txt\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>\trecursing-file  <span class=\"token string\">\"/var/named/data/named.recursing\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>\tsecroots-file   <span class=\"token string\">\"/var/named/data/named.secroots\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>\t// 允许谁本台DNS发起查询请求（localhost<span class=\"token operator\">|</span><span class=\"token function\">ip</span><span class=\"token operator\">|</span>any）</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>\tallow-query     <span class=\"token punctuation\">&#123;</span> localhost<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>\t/* </pre></td></tr><tr><td data-num=\"21\"></td><td><pre>\t - If you are building an AUTHORITATIVE DNS server, <span class=\"token keyword\">do</span> NOT <span class=\"token builtin class-name\">enable</span> recursion.</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>\t - If you are building a RECURSIVE <span class=\"token punctuation\">(</span>caching<span class=\"token punctuation\">)</span> DNS server, you need to <span class=\"token builtin class-name\">enable</span> </pre></td></tr><tr><td data-num=\"23\"></td><td><pre>\t   recursion. </pre></td></tr><tr><td data-num=\"24\"></td><td><pre>\t - If your recursive DNS server has a public IP address, you MUST <span class=\"token builtin class-name\">enable</span> access </pre></td></tr><tr><td data-num=\"25\"></td><td><pre>\t   control to limit queries to your legitimate users. Failing to <span class=\"token keyword\">do</span> so will</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>\t   cause your server to become part of large scale DNS amplification </pre></td></tr><tr><td data-num=\"27\"></td><td><pre>\t   attacks. Implementing BCP38 within your network would greatly</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>\t   reduce such attack surface </pre></td></tr><tr><td data-num=\"29\"></td><td><pre>\t*/</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>\t//递归查询</pre></td></tr><tr><td data-num=\"31\"></td><td><pre>\trecursion <span class=\"token function\">yes</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>\t//安全校验相关的</pre></td></tr><tr><td data-num=\"33\"></td><td><pre>\tdnssec-enable <span class=\"token function\">yes</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>\t//安全校验相关的</pre></td></tr><tr><td data-num=\"35\"></td><td><pre>\tdnssec-validation <span class=\"token function\">yes</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>\t/* Path to ISC DLV key */</pre></td></tr><tr><td data-num=\"38\"></td><td><pre>\tbindkeys-file <span class=\"token string\">\"/etc/named.root.key\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>\tmanaged-keys-directory <span class=\"token string\">\"/var/named/dynamic\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>\tpid-file <span class=\"token string\">\"/run/named/named.pid\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>\tsession-keyfile <span class=\"token string\">\"/run/named/session.key\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>// 控制日志输出的级别以及输出的位置</pre></td></tr><tr><td data-num=\"47\"></td><td><pre>logging <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>        channel default_debug <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>                <span class=\"token function\">file</span> <span class=\"token string\">\"data/named.run\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>                severity dynamic<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>//默认可以对任何域名提供解析服务，因为named.ca中存储的是全球根域服务器<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>zone <span class=\"token string\">\".\"</span> IN <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>\t<span class=\"token builtin class-name\">type</span> hint<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>\t<span class=\"token function\">file</span> <span class=\"token string\">\"named.ca\"</span><span class=\"token punctuation\">;</span>  //区域配置文件名称</pre></td></tr><tr><td data-num=\"58\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>//包含其他文件</pre></td></tr><tr><td data-num=\"61\"></td><td><pre>include <span class=\"token string\">\"/etc/named.rfc1912.zones\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>include <span class=\"token string\">\"/etc/named.root.key\"</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h6 id=\"234-客户端验证dns解析的配置\"><a class=\"anchor\" href=\"#234-客户端验证dns解析的配置\">#</a> 2.3.4 客户端验证 DNS 解析的配置</h6>\n<p>1. 配置 DNS 服务器指向，在 /etc/resolv.conf 里配置 dns 的 IP 地址</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-son ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat /etc/resolv.conf </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># Generated by NetworkManager</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>nameserver <span class=\"token number\">223.5</span>.5.5</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>nameserver <span class=\"token number\">192.168</span>.40.91</pre></td></tr></table></figure><ol start=\"2\">\n<li>使用 ping 命令验证解析</li>\n</ol>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-son ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># ping www.baidu.com</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>PING www.a.shifen.com <span class=\"token punctuation\">(</span><span class=\"token number\">183.2</span>.172.17<span class=\"token punctuation\">)</span> <span class=\"token number\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data.</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token number\">64</span> bytes from <span class=\"token number\">183.2</span>.172.17 <span class=\"token punctuation\">(</span><span class=\"token number\">183.2</span>.172.17<span class=\"token punctuation\">)</span>: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">128</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">12.4</span> ms</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token number\">64</span> bytes from <span class=\"token number\">183.2</span>.172.17 <span class=\"token punctuation\">(</span><span class=\"token number\">183.2</span>.172.17<span class=\"token punctuation\">)</span>: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">128</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">14.8</span> ms</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token number\">64</span> bytes from <span class=\"token number\">183.2</span>.172.17 <span class=\"token punctuation\">(</span><span class=\"token number\">183.2</span>.172.17<span class=\"token punctuation\">)</span>: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">3</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">128</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">16.7</span> ms</pre></td></tr></table></figure><h5 id=\"24-自定义区域\"><a class=\"anchor\" href=\"#24-自定义区域\">#</a> 2.4 自定义区域</h5>\n<p>自定义域分为如下两类：</p>\n<p>主机域（内网）</p>\n<ul>\n<li>1、主机域其实是一个假域；</li>\n<li>2、主机域其实是不能解析到互联网上；</li>\n<li>3、主机域它只对局域网（内网）提供服务；</li>\n</ul>\n<p>业务域（外网）</p>\n<ul>\n<li>1、业务域一般都是真实可用的；</li>\n<li>2、业务域则为一个真正需要对外提供服务的域名；</li>\n</ul>\n<h6 id=\"241-自定义区域配置文件解析\"><a class=\"anchor\" href=\"#241-自定义区域配置文件解析\">#</a> 2.4.1 自定义区域配置文件解析</h6>\n<ul>\n<li>区域 zone 文件定义在 /etc/named.conf 配置；</li>\n<li>也可以配置在自定义的其他文件里，并在 named.conf 里 include</li>\n<li>注意文件的权限，属主 root 属组 named 文件权限 640</li>\n</ul>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>zone <span class=\"token string\">\"hmallleasing.com\"</span> IN <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token builtin class-name\">type</span> master<span class=\"token operator\">|</span>slave<span class=\"token punctuation\">;</span>      // 自定义区域类型</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token function\">file</span> /path/to/zonefile<span class=\"token punctuation\">;</span> // 绝对路径和相对路径</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\tallow-update <span class=\"token punctuation\">&#123;</span>ip<span class=\"token operator\">|</span>none<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span> // 允许哪个ip可以使用nsupdate动态更新区域文件</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h6 id=\"242-自定义区域数据库文件\"><a class=\"anchor\" href=\"#242-自定义区域数据库文件\">#</a> 2.4.2 自定义区域数据库文件</h6>\n<p>范例以及编写注意事项：</p>\n<ul>\n<li>1、严格注意语法书写，其格式非常严格；</li>\n<li>2、记录不准许折行书写；</li>\n<li>3、单行记录开头不准许空格或 tab 开头；</li>\n</ul>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat /var/named/example.com.zone</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token variable\">$TTL</span> <span class=\"token number\">600</span> <span class=\"token punctuation\">;</span> DNS失效时间，单位秒<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>hmallleasing.com. IN SOA ns.hmallleasinge.com. xuyong.hmallleasing.com. <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">;</span> 区域名称 IN SOA dns.hmallleasing.com. 管理员邮箱</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">;</span> 区域名称可以使用过@表示，@表示当前域</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t<span class=\"token number\">2021041514</span> <span class=\"token punctuation\">;</span> 序列号<span class=\"token punctuation\">(</span>serial number<span class=\"token punctuation\">)</span> 十进制，不能超过10位，通常使用日期时间戳，例如2018121601</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t<span class=\"token number\">10800</span>      <span class=\"token punctuation\">;</span> 刷新时间<span class=\"token punctuation\">(</span>refresh <span class=\"token function\">time</span><span class=\"token punctuation\">)</span> 即每隔多久到主服务器检查一次</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t<span class=\"token number\">900</span>        <span class=\"token punctuation\">;</span> 重试时间<span class=\"token punctuation\">(</span>retry <span class=\"token function\">time</span><span class=\"token punctuation\">)</span> 即刷新不成功多久后重试，应该小于refresh <span class=\"token function\">time</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\t<span class=\"token number\">604800</span>     <span class=\"token punctuation\">;</span> 过期时间<span class=\"token punctuation\">(</span>expire <span class=\"token function\">time</span><span class=\"token punctuation\">)</span> 当辅助DNS无法联系主DNS时，辅助DNS在多长时间内认为其缓存是有效的。</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\t<span class=\"token number\">86400</span>      <span class=\"token punctuation\">;</span> 权威应答的ttl<span class=\"token punctuation\">(</span>netgative answer ttl<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span>缓存DNS服务器可以缓存记录多长时间</pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">;</span> 给客户端返回NS记录，hmallleasing.com. 域名由哪几台权威服务器提供解析</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>hmallleasing.com. IN NS ns1.hmallleasing.com.</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>hmallleasing.com. IN NS ns2.hmallleasing.com.</pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">;</span> A记录，配置权威域名的真实IP地址；</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>ns1.hmallleasing.com. IN A <span class=\"token number\">172.16</span>.1.91</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>ns2.hmallleasing.com. IN A <span class=\"token number\">172.16</span>.1.92</pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token punctuation\">;</span> 真正的域名解析</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>www.hmallleasing.com. IN A <span class=\"token number\">1.1</span>.1.1</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>web.hmallleasing.com. IN A <span class=\"token number\">2.2</span>.2.2</pre></td></tr></table></figure><h5 id=\"25-bind增加a记录正向解析实战\"><a class=\"anchor\" href=\"#25-bind增加a记录正向解析实战\">#</a> 2.5 BIND 增加 A 记录正向解析实战</h5>\n<p>用户通过 DNS 服务器 172.16.1.91 解析 <a href=\"http://www.hmalleasing.com\">www.hmalleasing.com</a></p>\n<ul>\n<li>1、添加 <a href=\"http://hmallleasing.com\">hmallleasing.com</a> 区域配置文件</li>\n<li>2、添加区域数据库文件，配置 NS 记录，返回 DNS 权威服务器地址</li>\n<li>3、该域的 DNS 权威服务器为 172.16.1.91</li>\n<li>4、添加该域的 A 记录解析</li>\n</ul>\n<h6 id=\"251-新增区域配置文件\"><a class=\"anchor\" href=\"#251-新增区域配置文件\">#</a> 2.5.1 新增区域配置文件</h6>\n<p>1. 在主配置文件 /etc/named.conf，新增一个 hmallleasing.com 区域配置</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat /etc/named.conf</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">..</span>.</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>options <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t// ipv4监听地址及端口</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\tlisten-on port <span class=\"token number\">53</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token number\">127.0</span>.0.1<span class=\"token punctuation\">;</span><span class=\"token number\">172.16</span>.1.91<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">..</span>.</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t// 允许谁本台DNS发起查询请求（localhost<span class=\"token operator\">|</span><span class=\"token function\">ip</span><span class=\"token operator\">|</span>any）</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\tallow-query     <span class=\"token punctuation\">&#123;</span> localhost<span class=\"token punctuation\">;</span> <span class=\"token number\">172.16</span>.1.0/24<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">..</span>.</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>//自行配置权威域名解析hmallleaing.com</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>zone <span class=\"token string\">\"hmallleasing.com\"</span> IN <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre> \t <span class=\"token builtin class-name\">type</span> master<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre> \t <span class=\"token function\">file</span> <span class=\"token string\">\"hmallleasing.com.zone\"</span><span class=\"token punctuation\">;</span>    //具体解析记录配置存储至哪个文件</pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">..</span>.</pre></td></tr></table></figure><p>2. 检查配置文件语法是否正常</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># named-checkconf</span></pre></td></tr></table></figure><h6 id=\"252-新增区域数据库文件\"><a class=\"anchor\" href=\"#252-新增区域数据库文件\">#</a> 2.5.2 新增区域数据库文件</h6>\n<p>1. 添加区域数据库文件</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat /var/named/hmallleasing.com.zone</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token variable\">$TTL</span> <span class=\"token number\">600</span> <span class=\"token punctuation\">;</span> DNS失效时间，单位秒<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>hmallleasing.com. IN SOA ns.hmallleasing.com. xuy.nf-leasing.com. <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">;</span> 区域名称 IN SOA dns.hmallleasing.com. 管理员邮箱</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">;</span> 区域名称可以使用过@表示，@表示当前域</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t<span class=\"token number\">2025092018</span> <span class=\"token punctuation\">;</span> 序列号<span class=\"token punctuation\">(</span>serial number<span class=\"token punctuation\">)</span> 十进制，不能超过10位，通常使用日期时间戳，例如2018121601</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t<span class=\"token number\">10800</span>      <span class=\"token punctuation\">;</span> 刷新时间<span class=\"token punctuation\">(</span>refresh <span class=\"token function\">time</span><span class=\"token punctuation\">)</span> 即每隔多久到主服务器检查一次</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t<span class=\"token number\">900</span>        <span class=\"token punctuation\">;</span> 重试时间<span class=\"token punctuation\">(</span>retry <span class=\"token function\">time</span><span class=\"token punctuation\">)</span> 即刷新不成功多久后重试，应该小于refresh <span class=\"token function\">time</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\t<span class=\"token number\">604800</span>     <span class=\"token punctuation\">;</span> 过期时间<span class=\"token punctuation\">(</span>expire <span class=\"token function\">time</span><span class=\"token punctuation\">)</span> 当辅助DNS无法联系主DNS时，辅助DNS在多长时间内认为其缓存是有效的。</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\t<span class=\"token number\">86400</span>      <span class=\"token punctuation\">;</span> 权威应答的ttl<span class=\"token punctuation\">(</span>netgative answer ttl<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span>缓存DNS服务器可以缓存记录多长时间</pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">;</span> 给客户端返回NS记录，hmallleasing.com. 域名由哪几台权威服务器提供解析</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>hmallleasing.com. IN NS ns1.hmallleasing.com.</pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">;</span> A记录，配置权威域名的真实IP地址；</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>ns1.hmallleasing.com. IN A <span class=\"token number\">172.16</span>.1.91</pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token punctuation\">;</span> 真正的域名解析</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>www.hmallleasing.com. IN A <span class=\"token number\">1.1</span>.1.1</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>web.hmallleasing.com. IN A <span class=\"token number\">2.2</span>.2.2</pre></td></tr></table></figure><p>2. 检查区域数据库文件</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># named-checkzone hmallleasing.com  /var/named/hmallleasing.com.zone</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>zone hmallleasing.com/IN: loaded serial <span class=\"token number\">2025092018</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>OK</pre></td></tr></table></figure><p>3. 重载 DNS 服务器</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># rndc reload</span></pre></td></tr></table></figure><h6 id=\"253-客户端测试域名解析\"><a class=\"anchor\" href=\"#253-客户端测试域名解析\">#</a> 2.5.3 客户端测试域名解析</h6>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@client ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># yum install bind-utils -y</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@client ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># dig web.hmallleasing.com @172.16.1.91 +short</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token number\">2.2</span>.2.2</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">[</span>root@client ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># dig www.hmallleasing.com @172.16.1.91 +short</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token number\">1.1</span>.1.1</pre></td></tr></table></figure><h5 id=\"26-bind增加cname记录实战\"><a class=\"anchor\" href=\"#26-bind增加cname记录实战\">#</a> 2.6 BIND 增加 CNAME 记录实战</h5>\n<p>用户通过 DNS 服务器 172.16.1.91 解析 <a href=\"http://www.job.com\">www.job.com</a></p>\n<p>1、添加 <a href=\"http://job.com\">job.com</a> 区域配置文件</p>\n<p>2、添加区域数据库文件，配置 NS 记录，返回 DNS 权威服务器地址</p>\n<p>3、该域的 DNS 权威服务器为 172.16.1.91</p>\n<p>4、添加该域的 CNAME 解析记录，解析至 <a href=\"http://www.hmallleasing.com\">www.hmallleasing.com</a> 域名上</p>\n<p><img loading=\"lazy\" data-src=\"https://wp-cdn.4ce.cn/v2/RBrxONj.jpeg\" alt=\"1.jpg\" /></p>\n<h6 id=\"261-新增区域配置文件\"><a class=\"anchor\" href=\"#261-新增区域配置文件\">#</a> 2.6.1 新增区域配置文件</h6>\n<p>1. 在主配置文件 /etc/named.conf，新增一个 hmallleasing.com 区域配置</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat /etc/named.conf</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">..</span>.</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>options <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t// ipv4监听地址及端口</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\tlisten-on port <span class=\"token number\">53</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token number\">127.0</span>.0.1<span class=\"token punctuation\">;</span><span class=\"token number\">172.16</span>.1.91<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">..</span>.</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t// 允许谁本台DNS发起查询请求（localhost<span class=\"token operator\">|</span><span class=\"token function\">ip</span><span class=\"token operator\">|</span>any）</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\tallow-query     <span class=\"token punctuation\">&#123;</span> localhost<span class=\"token punctuation\">;</span> <span class=\"token number\">172.16</span>.1.0/24<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">..</span>.</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>//自行配置权威域名解析job.com</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>zone <span class=\"token string\">\"job.com\"</span> IN <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre> \t <span class=\"token builtin class-name\">type</span> master<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre> \t <span class=\"token function\">file</span> <span class=\"token string\">\"job.com.zone\"</span><span class=\"token punctuation\">;</span>    //具体解析记录配置存储至哪个文件</pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">..</span>.</pre></td></tr></table></figure><p>2. 检查配置文件语法是否正常</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># named-checkconf</span></pre></td></tr></table></figure><h6 id=\"262-新增区域数据库文件\"><a class=\"anchor\" href=\"#262-新增区域数据库文件\">#</a> 2.6.2 新增区域数据库文件</h6>\n<p>1. 添加区域数据库文件</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat /var/named/job.com.zone</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token variable\">$TTL</span> <span class=\"token number\">600</span> <span class=\"token punctuation\">;</span> DNS失效时间，单位秒<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>job.com. IN SOA ns.job.com. xuy.nf-leasing.com. <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">;</span> 区域名称 IN SOA dns.hmallleasing.com. 管理员邮箱</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">;</span> 区域名称可以使用过@表示，@表示当前域</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t<span class=\"token number\">2025092018</span> <span class=\"token punctuation\">;</span> 序列号<span class=\"token punctuation\">(</span>serial number<span class=\"token punctuation\">)</span> 十进制，不能超过10位，通常使用日期时间戳，例如2018121601</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t<span class=\"token number\">10800</span>      <span class=\"token punctuation\">;</span> 刷新时间<span class=\"token punctuation\">(</span>refresh <span class=\"token function\">time</span><span class=\"token punctuation\">)</span> 即每隔多久到主服务器检查一次</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t<span class=\"token number\">900</span>        <span class=\"token punctuation\">;</span> 重试时间<span class=\"token punctuation\">(</span>retry <span class=\"token function\">time</span><span class=\"token punctuation\">)</span> 即刷新不成功多久后重试，应该小于refresh <span class=\"token function\">time</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\t<span class=\"token number\">604800</span>     <span class=\"token punctuation\">;</span> 过期时间<span class=\"token punctuation\">(</span>expire <span class=\"token function\">time</span><span class=\"token punctuation\">)</span> 当辅助DNS无法联系主DNS时，辅助DNS在多长时间内认为其缓存是有效的。</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\t<span class=\"token number\">86400</span>      <span class=\"token punctuation\">;</span> 权威应答的ttl<span class=\"token punctuation\">(</span>netgative answer ttl<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span>缓存DNS服务器可以缓存记录多长时间</pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">;</span> 给客户端返回NS记录，hmallleasing.com. 域名由哪几台权威服务器提供解析</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>job.com. IN NS ns1.job.com.</pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">;</span> A记录，配置权威域名的真实IP地址；</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>ns1.job.com. IN A <span class=\"token number\">172.16</span>.1.91</pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token punctuation\">;</span> 真正的域名解析</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>www.job.com. IN CNAME www.hmallleasing.com.</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>dev.job.com. IN A <span class=\"token number\">2.2</span>.2.3</pre></td></tr></table></figure><p>2. 检查区域数据库文件</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># named-checkzone job.com  /var/named/job.com.zone</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>zone job.com/IN: loaded serial <span class=\"token number\">2025092018</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>OK</pre></td></tr></table></figure><p>3. 重载 DNS 服务器</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># rndc reload</span></pre></td></tr></table></figure><h6 id=\"263-客户端测试域名解析\"><a class=\"anchor\" href=\"#263-客户端测试域名解析\">#</a> 2.6.3 客户端测试域名解析</h6>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@client ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># dig www.job.com @172.16.1.91 +short</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>www.hmallleasing.com.</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token number\">1.1</span>.1.1</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">[</span>root@client ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># dig dev.job.com @172.16.1.91 +short</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token number\">2.2</span>.2.3</pre></td></tr></table></figure><h5 id=\"27-bind增加ptr记录反向解析实战\"><a class=\"anchor\" href=\"#27-bind增加ptr记录反向解析实战\">#</a> 2.7 BIND 增加 PTR 记录反向解析实战</h5>\n<p>配置反向解析 PTR：IP--&gt;FQDN</p>\n<ul>\n<li>1、反向区域文件名称为逆向网络地址 加  .in-addr.arpa. 后缀组成</li>\n<li>2、反向区域数据库文件，例如 172.16.1.200 的 name 为 200 ，完全格式为：1.16.172.in-addr.arpa.</li>\n</ul>\n<h6 id=\"271-新增区域配置文件\"><a class=\"anchor\" href=\"#271-新增区域配置文件\">#</a> 2.7.1 新增区域配置文件</h6>\n<p>1. 在主配置文件 /etc/named.conf，新增一个反向区域配置</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat /etc/named.conf</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">..</span>.</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>options <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t// ipv4监听地址及端口</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\tlisten-on port <span class=\"token number\">53</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token number\">127.0</span>.0.1<span class=\"token punctuation\">;</span><span class=\"token number\">172.16</span>.1.91<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">..</span>.</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t// 允许谁本台DNS发起查询请求（localhost<span class=\"token operator\">|</span><span class=\"token function\">ip</span><span class=\"token operator\">|</span>any）</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\tallow-query     <span class=\"token punctuation\">&#123;</span> localhost<span class=\"token punctuation\">;</span> <span class=\"token number\">172.16</span>.1.0/24<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">..</span>.</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>//配置反向解析</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>zone <span class=\"token string\">\"1.16.172.in-addr.arpa\"</span> IN <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token builtin class-name\">type</span> master<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token function\">file</span> <span class=\"token string\">\"1.16.172.zone\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">..</span>.</pre></td></tr></table></figure><p>2. 检查配置文件语法是否正常</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># named-checkconf</span></pre></td></tr></table></figure><h6 id=\"272-新增区域数据库文件\"><a class=\"anchor\" href=\"#272-新增区域数据库文件\">#</a> 2.7.2 新增区域数据库文件</h6>\n<p>1. 添加反向解析区域数据库文件</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat /var/named/1.16.172.zone</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token variable\">$TTL</span> <span class=\"token number\">600</span> <span class=\"token punctuation\">;</span> DNS失效时间，单位秒<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>@ IN SOA <span class=\"token number\">1.16</span>.172.in-addr.arpa. xuy.nf-leasing.com. <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t<span class=\"token number\">2025092018</span> <span class=\"token punctuation\">;</span> 序列号<span class=\"token punctuation\">(</span>serial number<span class=\"token punctuation\">)</span> 十进制，不能超过10位，通常使用日期时间戳，例如2018121601</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t<span class=\"token number\">10800</span>      <span class=\"token punctuation\">;</span> 刷新时间<span class=\"token punctuation\">(</span>refresh <span class=\"token function\">time</span><span class=\"token punctuation\">)</span> 即每隔多久到主服务器检查一次</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token number\">900</span>        <span class=\"token punctuation\">;</span> 重试时间<span class=\"token punctuation\">(</span>retry <span class=\"token function\">time</span><span class=\"token punctuation\">)</span> 即刷新不成功多久后重试，应该小于refresh <span class=\"token function\">time</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t<span class=\"token number\">604800</span>     <span class=\"token punctuation\">;</span> 过期时间<span class=\"token punctuation\">(</span>expire <span class=\"token function\">time</span><span class=\"token punctuation\">)</span> 当辅助DNS无法联系主DNS时，辅助DNS在多长时间内认为其缓存是有效的。</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t<span class=\"token number\">86400</span>      <span class=\"token punctuation\">;</span> 权威应答的ttl<span class=\"token punctuation\">(</span>netgative answer ttl<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span>缓存DNS服务器可以缓存记录多长时间</pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">;</span>ns反向解析</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>@ IN NS ns1.hmallleasing.com.</pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">;</span>权威DNS反向解析</pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token number\">91</span> IN PTR ns1.hmallleasing.com.</pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">;</span>www反向解析</pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token number\">200</span> IN PTR route.hmallleasing.com.</pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token number\">5</span> IN PTR lb.hmallleasing.com.</pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token number\">7</span> IN PTR web01.hmallleasing.com.</pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token number\">8</span> IN PTR web02.hmallleasing.com.</pre></td></tr></table></figure><p>2. 检查区域数据库文件</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># named-checkzone job.com /var/named/1.16.172.zone</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>zone job.com/IN: loaded serial <span class=\"token number\">2025092018</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>OK</pre></td></tr></table></figure><p>3. 重载 DNS 服务器</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># rndc reload</span></pre></td></tr></table></figure><h6 id=\"273-客户端测试域名解析\"><a class=\"anchor\" href=\"#273-客户端测试域名解析\">#</a> 2.7.3 客户端测试域名解析</h6>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@client ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># dig -x 172.16.1.200 @172.16.1.91 +short</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>route.hmallleasing.com.</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">[</span>root@client ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># dig -x 172.16.1.7 @172.16.1.91 +short</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>web01.hmallleasing.com.</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">[</span>root@client ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># dig -x 172.16.1.8 @172.16.1.91 +short</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>web02.hmallleasing.com.</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">[</span>root@client ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># dig -x 172.16.1.5 @172.16.1.91 +short</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>lb.hmallleasing.com.</pre></td></tr></table></figure><h4 id=\"3-递归查询\"><a class=\"anchor\" href=\"#3-递归查询\">#</a> 3. 递归查询</h4>\n<h5 id=\"31-什么是递归查询\"><a class=\"anchor\" href=\"#31-什么是递归查询\">#</a> 3.1 什么是递归查询</h5>\n<p><img loading=\"lazy\" data-src=\"https://wp-cdn.4ce.cn/v2/zLPqMP3.jpeg\" alt=\"3.jpg\" /></p>\n<ul>\n<li>如果你要建立一个【授权域名】服务器，仅提供本地已存在域名解析即可；那么不要开启 recursion 功能。</li>\n<li>如果你要建立一个递归 DNS 服务器，那么需要开启 recursion 功能。</li>\n<li>如果你的递归 DNS 服务器有公网 IP 地址，你必须开启访问控制功能，只有合法用户才可以发询问。</li>\n</ul>\n<h5 id=\"32-递归查询配置参数\"><a class=\"anchor\" href=\"#32-递归查询配置参数\">#</a> 3.2 递归查询配置参数</h5>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>选项</th>\n<th>作用</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>recurison</td>\n<td>yes/no</td>\n<td>是否开启递归查询请求</td>\n</tr>\n<tr>\n<td>allow-recursion</td>\n<td>{address_match_list | any | none };</td>\n<td>限制客户端递归请求的范围</td>\n</tr>\n</tbody>\n</table>\n<h5 id=\"33-递归查询配置场景\"><a class=\"anchor\" href=\"#33-递归查询配置场景\">#</a> 3.3 递归查询配置场景</h5>\n<h6 id=\"331-开启递归查询\"><a class=\"anchor\" href=\"#331-开启递归查询\">#</a> 3.3.1 开启递归查询</h6>\n<p>BIND 默认配置中的 recurison 参数是启用的；</p>\n<ul>\n<li>1、配置仅允许 172.16.1.0 网段用户可以查询（可选）；</li>\n<li>2、使用客户端查询系统中存在的域名；</li>\n<li>3、使用客户端查询系统中不存在的域名（让 BIND 进行递归查询）；</li>\n</ul>\n<p>1. 修改 /etc/named.conf 配置文件</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat /etc/named.conf </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">..</span>.</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t//递归查询</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\trecursion <span class=\"token function\">yes</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\tallow-recursion <span class=\"token punctuation\">&#123;</span> <span class=\"token number\">192.168</span>.40.0/24<span class=\"token punctuation\">;</span><span class=\"token number\">172.16</span>.1.0/24<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">..</span>.</pre></td></tr></table></figure><p>2. 语法检查且重新加载 named</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># named-checkconf </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># rndc reload</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>server reload successful</pre></td></tr></table></figure><p>3. 查询存在 BIND 服务中的域名</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@client ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># dig web.hmallleasing.com @172.16.1.91 +short</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token number\">2.2</span>.2.2</pre></td></tr></table></figure><p>4. 查询不在 BIND 服务中的域名，可以获取正确返回，原因是 BIND 进行了递归查询</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@client ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># dig www.qq.com @172.16.1.91 +short</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>ins-r23tsuuf.ias.tencent-cloud.net.</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token number\">121.14</span>.77.221</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token number\">121.14</span>.77.201</pre></td></tr></table></figure><h6 id=\"332-关闭递归查询\"><a class=\"anchor\" href=\"#332-关闭递归查询\">#</a> 3.3.2 关闭递归查询</h6>\n<p>1. 修改 /etc/named.conf 配置文件</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat /etc/named.conf </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">..</span>.</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t//递归查询</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\trecursion no<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t<span class=\"token comment\">#allow-recursion &#123; 192.168.40.0/24;172.16.1.0/24; &#125;;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">..</span>.</pre></td></tr></table></figure><p>2. 语法检查且重新加载 named</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># named-checkconf </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># rndc reload</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>server reload successful</pre></td></tr></table></figure><p>3. 查询存在 BIND 服务中的域名会返回权威结果，因为本地无需进行递归查询，即可返回权威解析</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@client ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># dig web.hmallleasing.com @172.16.1.91 +short</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token number\">2.2</span>.2.2</pre></td></tr></table></figure><p>4. 由于本地无法返回权威结果，同时也禁用了递归查询，所以查询本地不存在域名会有 WARNING 提示</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@client ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># dig www.qq.com @172.16.1.91</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">;</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> DiG <span class=\"token number\">9.11</span>.4-P2-RedHat-9.11.4-26.P2.el7_9.16 <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> www.qq.com @172.16.1.91</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> global options: +cmd</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Got answer:</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> -<span class=\"token operator\">>></span>HEADER<span class=\"token operator\">&lt;&lt;-</span> opcode: QUERY, status: REFUSED, id: <span class=\"token number\">30635</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> flags: qr rd<span class=\"token punctuation\">;</span> QUERY: <span class=\"token number\">1</span>, ANSWER: <span class=\"token number\">0</span>, AUTHORITY: <span class=\"token number\">0</span>, ADDITIONAL: <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> WARNING: recursion requested but not available   <span class=\"token comment\">#递归查询不可用</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> OPT PSEUDOSECTION:</pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">;</span> EDNS: version: <span class=\"token number\">0</span>, flags:<span class=\"token punctuation\">;</span> udp: <span class=\"token number\">4096</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> QUESTION SECTION:</pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">;</span>www.qq.com.\t\t\tIN\tA</pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Query time: <span class=\"token number\">0</span> msec</pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> SERVER: <span class=\"token number\">172.16</span>.1.91<span class=\"token comment\">#53(172.16.1.91)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> WHEN: Sat Sep <span class=\"token number\">20</span> <span class=\"token number\">21</span>:33:54 CST <span class=\"token number\">2025</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> MSG SIZE  rcvd: <span class=\"token number\">39</span></pre></td></tr></table></figure><h4 id=\"4-dns主辅同步\"><a class=\"anchor\" href=\"#4-dns主辅同步\">#</a> 4. DNS 主辅同步</h4>\n<h5 id=\"41-dns主辅同步概念\"><a class=\"anchor\" href=\"#41-dns主辅同步概念\">#</a> 4.1 DNS 主辅同步概念</h5>\n<p>辅助 DNS 是 DNS 容灾备份服务：在主 DNS 和辅 DNS 之间建立区域数据传输机制，当主 DNS 遇到故障或者服务中断时，辅 DNS 仍可以继续提供解析服务，因此保障业务稳定运行。</p>\n<p>辅助 DNS 的优势：</p>\n<ul>\n<li>容灾备份，降低业务中断风险：主 DNS 系统故障，辅助 DNS 可继续提供域名解析服务，保障业务可用性。</li>\n<li>负责均衡，流量均摊降低负载：当辅助 DNS 与主 DNS 同时对外提供解析服务时，可以达到流量负载均衡的效果。</li>\n</ul>\n<h5 id=\"42-dns主从同步原理\"><a class=\"anchor\" href=\"#42-dns主从同步原理\">#</a> 4.2 DNS 主从同步原理</h5>\n<p><img loading=\"lazy\" data-src=\"https://wp-cdn.4ce.cn/v2/4XJrCeP.jpeg\" alt=\"918540-20230508112130365-444561605.jpg\" /></p>\n<h5 id=\"43-dns主从同步场景\"><a class=\"anchor\" href=\"#43-dns主从同步场景\">#</a> 4.3 DNS 主从同步场景</h5>\n<h6 id=\"431-主从环境准备\"><a class=\"anchor\" href=\"#431-主从环境准备\">#</a> 4.3.1 主从环境准备</h6>\n<ul>\n<li>1、确保防火墙规则开放（建议关闭）</li>\n<li>2、保持主从服务器时钟一致；</li>\n<li>3、搭建完主从后，若修改主服务器域配置， Serail Number 必须递增，否则不同步；</li>\n</ul>\n<h6 id=\"432-主辅同步配置要点\"><a class=\"anchor\" href=\"#432-主辅同步配置要点\">#</a> 4.3.2 主辅同步配置要点</h6>\n<ul>\n<li>1、主 DNS 的 named.conf 里配置 allow-transfer 和 also-notify 选项；</li>\n<li>2、辅助 DNS 主配置文件 option 段添加 masterfile-format text ，否则同步的文件为 data 类型；</li>\n<li>3、辅助 DNS 添加区域配置文件，类型为 slave ，同时指向 masters 参数指向 master 地址；</li>\n<li>4、辅助 DNS 不可主动修改 DNS 数据库文件；</li>\n</ul>\n<h6 id=\"433-master服务器的配置\"><a class=\"anchor\" href=\"#433-master服务器的配置\">#</a> 4.3.3 Master 服务器的配置</h6>\n<p>1. 在主配置文件 /etc/named.conf，新增一个反向区域配置</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat /etc/named.conf</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">..</span>.</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>options <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t//允许哪个地址同步master配置信息</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    allow-transfer <span class=\"token punctuation\">&#123;</span> <span class=\"token number\">172.16</span>.1.92<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t//主动通知辅助DNS域名变更\t</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    also-notify <span class=\"token punctuation\">&#123;</span> <span class=\"token number\">172.16</span>.1.92<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">..</span>.</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>//自行配置权威域名解析hmallleaing.com</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>zone <span class=\"token string\">\"hmallleasing.com\"</span> IN <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre> \t <span class=\"token builtin class-name\">type</span> master<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre> \t <span class=\"token function\">file</span> <span class=\"token string\">\"hmallleasing.com.zone\"</span><span class=\"token punctuation\">;</span>    //具体解析记录配置存储至哪个文件</pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>zone <span class=\"token string\">\"job.com\"</span> IN <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre> \t <span class=\"token builtin class-name\">type</span> master<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre> \t <span class=\"token function\">file</span> <span class=\"token string\">\"job.com.zone\"</span><span class=\"token punctuation\">;</span>    //具体解析记录配置存储至哪个文件</pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>//配置反向解析</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>zone <span class=\"token string\">\"1.16.172.in-addr.arpa\"</span> IN <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  <span class=\"token builtin class-name\">type</span> master<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  <span class=\"token function\">file</span> <span class=\"token string\">\"1.16.172.zone\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token punctuation\">..</span>.</pre></td></tr></table></figure><p>2. 添加区域数据库文件 (需要多添加一条 ns 记录)</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#1.hmallleasing.com.zone 需要多添加一条 ns 记录</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat /var/named/hmallleasing.com.zone </span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token variable\">$TTL</span> <span class=\"token number\">600</span> <span class=\"token punctuation\">;</span> DNS失效时间，单位秒<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>hmallleasing.com. IN SOA ns.hmallleasing.com. xuy.nf-leasing.com. <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">;</span> 区域名称 IN SOA dns.hmallleasing.com. 管理员邮箱</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">;</span> 区域名称可以使用过@表示，@表示当前域</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t<span class=\"token number\">2025092018</span> <span class=\"token punctuation\">;</span> 序列号<span class=\"token punctuation\">(</span>serial number<span class=\"token punctuation\">)</span> 十进制，不能超过10位，通常使用日期时间戳，例如2018121601</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t<span class=\"token number\">10800</span>      <span class=\"token punctuation\">;</span> 刷新时间<span class=\"token punctuation\">(</span>refresh <span class=\"token function\">time</span><span class=\"token punctuation\">)</span> 即每隔多久到主服务器检查一次</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\t<span class=\"token number\">900</span>        <span class=\"token punctuation\">;</span> 重试时间<span class=\"token punctuation\">(</span>retry <span class=\"token function\">time</span><span class=\"token punctuation\">)</span> 即刷新不成功多久后重试，应该小于refresh <span class=\"token function\">time</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\t<span class=\"token number\">604800</span>     <span class=\"token punctuation\">;</span> 过期时间<span class=\"token punctuation\">(</span>expire <span class=\"token function\">time</span><span class=\"token punctuation\">)</span> 当辅助DNS无法联系主DNS时，辅助DNS在多长时间内认为其缓存是有效的。</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>\t<span class=\"token number\">86400</span>      <span class=\"token punctuation\">;</span> 权威应答的ttl<span class=\"token punctuation\">(</span>netgative answer ttl<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span>缓存DNS服务器可以缓存记录多长时间</pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">;</span> 给客户端返回NS记录，hmallleasing.com. 域名由哪几台权威服务器提供解析</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>hmallleasing.com. IN NS ns1.hmallleasing.com.</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>hmallleasing.com. IN NS ns2.hmallleasing.com.</pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">;</span> A记录，配置权威域名的真实IP地址；</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>ns1.hmallleasing.com. IN A <span class=\"token number\">172.16</span>.1.91</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>ns2.hmallleasing.com. IN A <span class=\"token number\">172.16</span>.1.92</pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token punctuation\">;</span> 真正的域名解析</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>www.hmallleasing.com. IN A <span class=\"token number\">1.1</span>.1.1</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>web.hmallleasing.com. IN A <span class=\"token number\">2.2</span>.2.2</pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token comment\">#2./1.16.172.zone 需要多添加一条 ns 记录</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat /var/named/1.16.172.zone </span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token variable\">$TTL</span> <span class=\"token number\">600</span> <span class=\"token punctuation\">;</span> DNS失效时间，单位秒<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>@ IN SOA <span class=\"token number\">1.16</span>.172.in-addr.arpa. xuy.nf-leasing.com. <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>\t<span class=\"token number\">2025092018</span> <span class=\"token punctuation\">;</span> 序列号<span class=\"token punctuation\">(</span>serial number<span class=\"token punctuation\">)</span> 十进制，不能超过10位，通常使用日期时间戳，例如2018121601</pre></td></tr><tr><td data-num=\"32\"></td><td><pre>\t<span class=\"token number\">10800</span>      <span class=\"token punctuation\">;</span> 刷新时间<span class=\"token punctuation\">(</span>refresh <span class=\"token function\">time</span><span class=\"token punctuation\">)</span> 即每隔多久到主服务器检查一次</pre></td></tr><tr><td data-num=\"33\"></td><td><pre>\t<span class=\"token number\">900</span>        <span class=\"token punctuation\">;</span> 重试时间<span class=\"token punctuation\">(</span>retry <span class=\"token function\">time</span><span class=\"token punctuation\">)</span> 即刷新不成功多久后重试，应该小于refresh <span class=\"token function\">time</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>\t<span class=\"token number\">604800</span>     <span class=\"token punctuation\">;</span> 过期时间<span class=\"token punctuation\">(</span>expire <span class=\"token function\">time</span><span class=\"token punctuation\">)</span> 当辅助DNS无法联系主DNS时，辅助DNS在多长时间内认为其缓存是有效的。</pre></td></tr><tr><td data-num=\"35\"></td><td><pre>\t<span class=\"token number\">86400</span>      <span class=\"token punctuation\">;</span> 权威应答的ttl<span class=\"token punctuation\">(</span>netgative answer ttl<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span>缓存DNS服务器可以缓存记录多长时间</pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token punctuation\">;</span>ns反向解析</pre></td></tr><tr><td data-num=\"39\"></td><td><pre>@ IN NS ns1.hmallleasing.com.</pre></td></tr><tr><td data-num=\"40\"></td><td><pre>@ IN NS ns2.hmallleasing.com.</pre></td></tr><tr><td data-num=\"41\"></td><td><pre></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token punctuation\">;</span>权威DNS反向解析</pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token number\">91</span> IN PTR ns1.hmallleasing.com.</pre></td></tr><tr><td data-num=\"44\"></td><td><pre><span class=\"token number\">92</span> IN PTR ns2.hmallleasing.com.</pre></td></tr><tr><td data-num=\"45\"></td><td><pre></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token punctuation\">;</span>www反向解析</pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token number\">200</span> IN PTR route.hmallleasing.com.</pre></td></tr><tr><td data-num=\"48\"></td><td><pre><span class=\"token number\">5</span> IN PTR lb.hmallleasing.com.</pre></td></tr><tr><td data-num=\"49\"></td><td><pre><span class=\"token number\">7</span> IN PTR web01.hmallleasing.com.</pre></td></tr><tr><td data-num=\"50\"></td><td><pre><span class=\"token number\">8</span> IN PTR web02.hmallleasing.com.</pre></td></tr><tr><td data-num=\"51\"></td><td><pre></pre></td></tr><tr><td data-num=\"52\"></td><td><pre><span class=\"token comment\">#2.job.com.zone 需要多添加一条 ns 记录</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master named<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat job.com.zone </span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre><span class=\"token variable\">$TTL</span> <span class=\"token number\">600</span> <span class=\"token punctuation\">;</span> DNS失效时间，单位秒<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>job.com. IN SOA ns.job.com. xuy.nf-leasing.com. <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre><span class=\"token punctuation\">;</span> 区域名称 IN SOA dns.hmallleasing.com. 管理员邮箱</pre></td></tr><tr><td data-num=\"57\"></td><td><pre><span class=\"token punctuation\">;</span> 区域名称可以使用过@表示，@表示当前域</pre></td></tr><tr><td data-num=\"58\"></td><td><pre></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>\t<span class=\"token number\">2025092019</span> <span class=\"token punctuation\">;</span> 序列号<span class=\"token punctuation\">(</span>serial number<span class=\"token punctuation\">)</span> 十进制，不能超过10位，通常使用日期时间戳，例如2018121601</pre></td></tr><tr><td data-num=\"60\"></td><td><pre>\t<span class=\"token number\">10800</span>      <span class=\"token punctuation\">;</span> 刷新时间<span class=\"token punctuation\">(</span>refresh <span class=\"token function\">time</span><span class=\"token punctuation\">)</span> 即每隔多久到主服务器检查一次</pre></td></tr><tr><td data-num=\"61\"></td><td><pre>\t<span class=\"token number\">900</span>        <span class=\"token punctuation\">;</span> 重试时间<span class=\"token punctuation\">(</span>retry <span class=\"token function\">time</span><span class=\"token punctuation\">)</span> 即刷新不成功多久后重试，应该小于refresh <span class=\"token function\">time</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>\t<span class=\"token number\">604800</span>     <span class=\"token punctuation\">;</span> 过期时间<span class=\"token punctuation\">(</span>expire <span class=\"token function\">time</span><span class=\"token punctuation\">)</span> 当辅助DNS无法联系主DNS时，辅助DNS在多长时间内认为其缓存是有效的。</pre></td></tr><tr><td data-num=\"63\"></td><td><pre>\t<span class=\"token number\">86400</span>      <span class=\"token punctuation\">;</span> 权威应答的ttl<span class=\"token punctuation\">(</span>netgative answer ttl<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span>缓存DNS服务器可以缓存记录多长时间</pre></td></tr><tr><td data-num=\"64\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre></pre></td></tr><tr><td data-num=\"66\"></td><td><pre><span class=\"token punctuation\">;</span> 给客户端返回NS记录，hmallleasing.com. 域名由哪几台权威服务器提供解析</pre></td></tr><tr><td data-num=\"67\"></td><td><pre>job.com. IN NS ns1.job.com.</pre></td></tr><tr><td data-num=\"68\"></td><td><pre>job.com. IN NS ns2.job.com.</pre></td></tr><tr><td data-num=\"69\"></td><td><pre></pre></td></tr><tr><td data-num=\"70\"></td><td><pre><span class=\"token punctuation\">;</span> A记录，配置权威域名的真实IP地址；</pre></td></tr><tr><td data-num=\"71\"></td><td><pre>ns1.job.com. IN A <span class=\"token number\">172.16</span>.1.91</pre></td></tr><tr><td data-num=\"72\"></td><td><pre>ns2.job.com. IN A <span class=\"token number\">172.16</span>.1.92</pre></td></tr><tr><td data-num=\"73\"></td><td><pre></pre></td></tr><tr><td data-num=\"74\"></td><td><pre><span class=\"token punctuation\">;</span> 真正的域名解析</pre></td></tr><tr><td data-num=\"75\"></td><td><pre>www.job.com. IN CNAME www.hmallleasing.com.</pre></td></tr><tr><td data-num=\"76\"></td><td><pre>dev.job.com. IN A <span class=\"token number\">2.2</span>.2.3</pre></td></tr></table></figure><p>3. 检查语法并重载 DNS 服务器</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># named-checkconf</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># named-checkzone hmallleasing.com /var/named/hmallleasing.com.zone </span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># rndc reload</span></pre></td></tr></table></figure><h6 id=\"434-slave服务器的配置\"><a class=\"anchor\" href=\"#434-slave服务器的配置\">#</a> 4.3.4 Slave 服务器的配置</h6>\n<p>1. 安装 bind 服务</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-slave ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># yum install bind bind-utils -y</span></pre></td></tr></table></figure><p>2. 配置 rndc【首次需要配置】</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-slave ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># rndc-confgen -r /dev/urandom -a</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-slave ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># chown root:named /etc/rndc.key</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-slave ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># chmod 640 /etc/rndc.key </span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-slave ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># systemctl restart named</span></pre></td></tr></table></figure><p>3. 修改主配置文件</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-slave ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat /etc/named.conf </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">..</span>.</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>options <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\tlisten-on port <span class=\"token number\">53</span> <span class=\"token punctuation\">&#123;</span> any<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\tallow-query     <span class=\"token punctuation\">&#123;</span> any<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    masterfile-format text<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">..</span>.</pre></td></tr></table></figure><p>4. 添加区域配置文件，类型为 slave，然后指向 master 地址</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-slave ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat /etc/named.conf </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">..</span>.</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>//自行配置权威域名解析hmallleaing.com</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>zone <span class=\"token string\">\"hmallleasing.com\"</span> IN <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>         <span class=\"token builtin class-name\">type</span> slave<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>         <span class=\"token function\">file</span> <span class=\"token string\">\"slaves/hmallleasing.com.zone\"</span><span class=\"token punctuation\">;</span>    //具体解析记录配置存储至哪个文件</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>         masters <span class=\"token punctuation\">&#123;</span> <span class=\"token number\">172.16</span>.1.91<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>zone <span class=\"token string\">\"job.com\"</span> IN <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>         <span class=\"token builtin class-name\">type</span> slave<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>         <span class=\"token function\">file</span> <span class=\"token string\">\"slaves/job.com.zone\"</span><span class=\"token punctuation\">;</span>    //具体解析记录配置存储至哪个文件</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>         masters <span class=\"token punctuation\">&#123;</span> <span class=\"token number\">172.16</span>.1.91<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>//配置反向解析</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>zone <span class=\"token string\">\"1.16.172.in-addr.arpa\"</span> IN <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre> \t<span class=\"token builtin class-name\">type</span> slave<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre> \t<span class=\"token function\">file</span> <span class=\"token string\">\"slaves/1.16.172.zone\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  \tmasters <span class=\"token punctuation\">&#123;</span> <span class=\"token number\">172.16</span>.1.91<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>include <span class=\"token string\">\"/etc/named.rfc1912.zones\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>include <span class=\"token string\">\"/etc/named.root.key\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token punctuation\">..</span>.</pre></td></tr></table></figure><p>4. 检查语法并重载 DNS 服务器</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># named-checkconf</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># rndc reload</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-slave ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># ll /var/named/slaves/</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>-rw-r--r-- <span class=\"token number\">1</span> named named <span class=\"token number\">549</span> Sep <span class=\"token number\">20</span> <span class=\"token number\">22</span>:30 <span class=\"token number\">1.16</span>.172.zone</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>-rw-r--r-- <span class=\"token number\">1</span> named named <span class=\"token number\">420</span> Sep <span class=\"token number\">20</span> <span class=\"token number\">22</span>:30 hmallleasing.com.zone</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>-rw-r--r-- <span class=\"token number\">1</span> named named <span class=\"token number\">356</span> Sep <span class=\"token number\">20</span> <span class=\"token number\">22</span>:30 job.com.zone</pre></td></tr></table></figure><h6 id=\"435-测试主辅解析\"><a class=\"anchor\" href=\"#435-测试主辅解析\">#</a> 4.3.5 测试主辅解析</h6>\n<p>使用 dig 进行域名解析，先通过 master 解析，然后在使用 slave 测试解析</p>\n<p>1. 通过 master 解析</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@client ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># dig www.hmallleasing.com @172.16.1.91 </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">;</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> DiG <span class=\"token number\">9.11</span>.4-P2-RedHat-9.11.4-26.P2.el7_9.16 <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> www.hmallleasing.com @172.16.1.91</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> global options: +cmd</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Got answer:</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> -<span class=\"token operator\">>></span>HEADER<span class=\"token operator\">&lt;&lt;-</span> opcode: QUERY, status: NOERROR, id: <span class=\"token number\">34451</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> flags: qr aa rd ra<span class=\"token punctuation\">;</span> QUERY: <span class=\"token number\">1</span>, ANSWER: <span class=\"token number\">1</span>, AUTHORITY: <span class=\"token number\">2</span>, ADDITIONAL: <span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> OPT PSEUDOSECTION:</pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">;</span> EDNS: version: <span class=\"token number\">0</span>, flags:<span class=\"token punctuation\">;</span> udp: <span class=\"token number\">4096</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> QUESTION SECTION:</pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">;</span>www.hmallleasing.com.\t\tIN\tA</pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> ANSWER SECTION:</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>www.hmallleasing.com.\t<span class=\"token number\">600</span>\tIN\tA\t<span class=\"token number\">1.1</span>.1.1</pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> AUTHORITY SECTION:</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>hmallleasing.com.\t<span class=\"token number\">600</span>\tIN\tNS\tns2.hmallleasing.com.</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>hmallleasing.com.\t<span class=\"token number\">600</span>\tIN\tNS\tns1.hmallleasing.com.</pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> ADDITIONAL SECTION:</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>ns1.hmallleasing.com.\t<span class=\"token number\">600</span>\tIN\tA\t<span class=\"token number\">172.16</span>.1.91</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>ns2.hmallleasing.com.\t<span class=\"token number\">600</span>\tIN\tA\t<span class=\"token number\">172.16</span>.1.92</pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Query time: <span class=\"token number\">0</span> msec</pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> SERVER: <span class=\"token number\">172.16</span>.1.91<span class=\"token comment\">#53(172.16.1.91)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> WHEN: Sat Sep <span class=\"token number\">20</span> <span class=\"token number\">23</span>:03:40 CST <span class=\"token number\">2025</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> MSG SIZE  rcvd: <span class=\"token number\">133</span></pre></td></tr></table></figure><p>2. 通过 slave 解析</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@client ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># dig www.hmallleasing.com @172.16.1.92 </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">;</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> DiG <span class=\"token number\">9.11</span>.4-P2-RedHat-9.11.4-26.P2.el7_9.16 <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> www.hmallleasing.com @172.16.1.92</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> global options: +cmd</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Got answer:</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> -<span class=\"token operator\">>></span>HEADER<span class=\"token operator\">&lt;&lt;-</span> opcode: QUERY, status: NOERROR, id: <span class=\"token number\">4506</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> flags: qr aa rd ra<span class=\"token punctuation\">;</span> QUERY: <span class=\"token number\">1</span>, ANSWER: <span class=\"token number\">1</span>, AUTHORITY: <span class=\"token number\">2</span>, ADDITIONAL: <span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> OPT PSEUDOSECTION:</pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">;</span> EDNS: version: <span class=\"token number\">0</span>, flags:<span class=\"token punctuation\">;</span> udp: <span class=\"token number\">4096</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> QUESTION SECTION:</pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">;</span>www.hmallleasing.com.\t\tIN\tA</pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> ANSWER SECTION:</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>www.hmallleasing.com.\t<span class=\"token number\">600</span>\tIN\tA\t<span class=\"token number\">1.1</span>.1.1</pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> AUTHORITY SECTION:</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>hmallleasing.com.\t<span class=\"token number\">600</span>\tIN\tNS\tns2.hmallleasing.com.</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>hmallleasing.com.\t<span class=\"token number\">600</span>\tIN\tNS\tns1.hmallleasing.com.</pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> ADDITIONAL SECTION:</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>ns1.hmallleasing.com.\t<span class=\"token number\">600</span>\tIN\tA\t<span class=\"token number\">172.16</span>.1.91</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>ns2.hmallleasing.com.\t<span class=\"token number\">600</span>\tIN\tA\t<span class=\"token number\">172.16</span>.1.92</pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Query time: <span class=\"token number\">0</span> msec</pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> SERVER: <span class=\"token number\">172.16</span>.1.92<span class=\"token comment\">#53(172.16.1.92)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> WHEN: Sat Sep <span class=\"token number\">20</span> <span class=\"token number\">23</span>:03:23 CST <span class=\"token number\">2025</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> MSG SIZE  rcvd: <span class=\"token number\">133</span></pre></td></tr></table></figure><p>3. 测试主辅同步</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#1.dns master 新增一条记录，然后滚动 seria2025092019 自增 1</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master named<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat hmallleasing.com.zone </span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token variable\">$TTL</span> <span class=\"token number\">600</span> <span class=\"token punctuation\">;</span> DNS失效时间，单位秒<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>hmallleasing.com. IN SOA ns.hmallleasing.com. xuy.nf-leasing.com. <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">;</span> 区域名称 IN SOA dns.hmallleasing.com. 管理员邮箱</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">;</span> 区域名称可以使用过@表示，@表示当前域</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t<span class=\"token number\">2025092019</span> <span class=\"token punctuation\">;</span> 序列号<span class=\"token punctuation\">(</span>serial number<span class=\"token punctuation\">)</span> 十进制，不能超过10位，通常使用日期时间戳，例如2018121601</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t<span class=\"token number\">10800</span>      <span class=\"token punctuation\">;</span> 刷新时间<span class=\"token punctuation\">(</span>refresh <span class=\"token function\">time</span><span class=\"token punctuation\">)</span> 即每隔多久到主服务器检查一次</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t<span class=\"token number\">900</span>        <span class=\"token punctuation\">;</span> 重试时间<span class=\"token punctuation\">(</span>retry <span class=\"token function\">time</span><span class=\"token punctuation\">)</span> 即刷新不成功多久后重试，应该小于refresh <span class=\"token function\">time</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\t<span class=\"token number\">604800</span>     <span class=\"token punctuation\">;</span> 过期时间<span class=\"token punctuation\">(</span>expire <span class=\"token function\">time</span><span class=\"token punctuation\">)</span> 当辅助DNS无法联系主DNS时，辅助DNS在多长时间内认为其缓存是有效的。</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\t<span class=\"token number\">86400</span>      <span class=\"token punctuation\">;</span> 权威应答的ttl<span class=\"token punctuation\">(</span>netgative answer ttl<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span>缓存DNS服务器可以缓存记录多长时间</pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">;</span> 给客户端返回NS记录，hmallleasing.com. 域名由哪几台权威服务器提供解析</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>hmallleasing.com. IN NS ns1.hmallleasing.com.</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>hmallleasing.com. IN NS ns2.hmallleasing.com.</pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">;</span> A记录，配置权威域名的真实IP地址；</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>ns1.hmallleasing.com. IN A <span class=\"token number\">172.16</span>.1.91</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>ns2.hmallleasing.com. IN A <span class=\"token number\">172.16</span>.1.92</pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token punctuation\">;</span> 真正的域名解析</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>www.hmallleasing.com. IN A <span class=\"token number\">1.1</span>.1.1</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>web.hmallleasing.com. IN A <span class=\"token number\">2.2</span>.2.2</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>blog.hmallleasing.com. IN A <span class=\"token number\">3.3</span>.3.3</pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token comment\">#2. 重载 DNS 服务器</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token punctuation\">[</span>root@dns-master named<span class=\"token punctuation\">]</span><span class=\"token comment\"># rndc reload</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token comment\">#3. 使用 master 以及 slave 地址测试新添加的记录是否能解析</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token punctuation\">[</span>root@client ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># dig blog.hmallleasing.com @172.16.1.91 </span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token punctuation\">[</span>root@client ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># dig blog.hmallleasing.com @172.16.1.92 </span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token punctuation\">;</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> DiG <span class=\"token number\">9.11</span>.4-P2-RedHat-9.11.4-26.P2.el7_9.16 <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> blog.hmallleasing.com @172.16.1.91</pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> global options: +cmd</pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Got answer:</pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> -<span class=\"token operator\">>></span>HEADER<span class=\"token operator\">&lt;&lt;-</span> opcode: QUERY, status: NOERROR, id: <span class=\"token number\">60136</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> flags: qr aa rd ra<span class=\"token punctuation\">;</span> QUERY: <span class=\"token number\">1</span>, ANSWER: <span class=\"token number\">1</span>, AUTHORITY: <span class=\"token number\">2</span>, ADDITIONAL: <span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> OPT PSEUDOSECTION:</pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token punctuation\">;</span> EDNS: version: <span class=\"token number\">0</span>, flags:<span class=\"token punctuation\">;</span> udp: <span class=\"token number\">4096</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> QUESTION SECTION:</pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token punctuation\">;</span>blog.hmallleasing.com.\t\tIN\tA</pre></td></tr><tr><td data-num=\"44\"></td><td><pre></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> ANSWER SECTION:</pre></td></tr><tr><td data-num=\"46\"></td><td><pre>blog.hmallleasing.com.\t<span class=\"token number\">600</span>\tIN\tA\t<span class=\"token number\">3.3</span>.3.3</pre></td></tr><tr><td data-num=\"47\"></td><td><pre></pre></td></tr><tr><td data-num=\"48\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> AUTHORITY SECTION:</pre></td></tr><tr><td data-num=\"49\"></td><td><pre>hmallleasing.com.\t<span class=\"token number\">600</span>\tIN\tNS\tns1.hmallleasing.com.</pre></td></tr><tr><td data-num=\"50\"></td><td><pre>hmallleasing.com.\t<span class=\"token number\">600</span>\tIN\tNS\tns2.hmallleasing.com.</pre></td></tr><tr><td data-num=\"51\"></td><td><pre></pre></td></tr><tr><td data-num=\"52\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> ADDITIONAL SECTION:</pre></td></tr><tr><td data-num=\"53\"></td><td><pre>ns1.hmallleasing.com.\t<span class=\"token number\">600</span>\tIN\tA\t<span class=\"token number\">172.16</span>.1.91</pre></td></tr><tr><td data-num=\"54\"></td><td><pre>ns2.hmallleasing.com.\t<span class=\"token number\">600</span>\tIN\tA\t<span class=\"token number\">172.16</span>.1.92</pre></td></tr><tr><td data-num=\"55\"></td><td><pre></pre></td></tr><tr><td data-num=\"56\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Query time: <span class=\"token number\">0</span> msec</pre></td></tr><tr><td data-num=\"57\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> SERVER: <span class=\"token number\">172.16</span>.1.91<span class=\"token comment\">#53(172.16.1.91)</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> WHEN: Sat Sep <span class=\"token number\">20</span> <span class=\"token number\">23</span>:10:17 CST <span class=\"token number\">2025</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> MSG SIZE  rcvd: <span class=\"token number\">134</span></pre></td></tr></table></figure>",
            "tags": [
                "Linux"
            ]
        },
        {
            "id": "http://ixuyong.cn/posts/430579059.html",
            "url": "http://ixuyong.cn/posts/430579059.html",
            "title": "NFS网络文件系统",
            "date_published": "2025-08-17T13:17:29.000Z",
            "content_html": "<h3 id=\"nfs网络文件系统\"><a class=\"anchor\" href=\"#nfs网络文件系统\">#</a> NFS 网络文件系统</h3>\n<h4 id=\"一-nfs基本概述\"><a class=\"anchor\" href=\"#一-nfs基本概述\">#</a> 一、NFS 基本概述</h4>\n<p>NFS 是 Network File System 的缩写及网络文件系统。</p>\n<p>NFS 的主要功能是通过” 局域网 “络让不同主机系统之间可以共享目录。</p>\n<h4 id=\"二-nfs实现原理\"><a class=\"anchor\" href=\"#二-nfs实现原理\">#</a> 二、NFS 实现原理</h4>\n<p><img loading=\"lazy\" data-src=\"https://wp-cdn.4ce.cn/v2/Lgm9nFf.png\" alt=\"1.png\" /></p>\n<p><strong>本地文件操作方式</strong></p>\n<p>1. 当用户执行 mkdir 命令，BashShell 无法完成该命令操作，会将其翻译给内核。</p>\n<p>2.Kernel 内核解析完成后会驱动对应的磁盘设备，完成创建目录的操作。</p>\n<p><strong>NFS 创建文件方式</strong></p>\n<p>1.NFS 客户端执行增、删等操作，客户端会使用不同的函数对该操作进行封装。</p>\n<p>2.NFS 客户端会通过 TCP/IP 的方式传递给 NFS 服务端。</p>\n<p>3.NFS 服务端接收到请求后，会先调用 portmap 进程进行端口映射。</p>\n<p>4.nfsd 进程用于判断 NFS 客户端是否拥有权限连接 NFS 服务端。</p>\n<p>5.Rpc.mount 进程判断客户端是否有对应的权限进行验证。</p>\n<p>6.idmap 进程实现用户映射和压缩。</p>\n<p>7. 最后 NFS 服务端会将客户端的函数转换为本地能执行的命令，由内核驱动硬件完成操作。</p>\n<p>注意：rpc 是一个远程过程调用，那么使用 nfs 必须有 rpc 服务</p>\n<h4 id=\"三-nfs服务实践\"><a class=\"anchor\" href=\"#三-nfs服务实践\">#</a> 三、NFS 服务实践</h4>\n<h5 id=\"31环境准备\"><a class=\"anchor\" href=\"#31环境准备\">#</a> 3.1 环境准备</h5>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">服务器系统</th>\n<th style=\"text-align:center\">角色</th>\n<th style=\"text-align:center\">外网 IP</th>\n<th style=\"text-align:center\">内网 IP</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">CentOS7.6</td>\n<td style=\"text-align:center\">NFS 服务端</td>\n<td style=\"text-align:center\">eth0:10.0.0.32</td>\n<td style=\"text-align:center\">eth1:172.16.1.32</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">CentOS7.6</td>\n<td style=\"text-align:center\">NFS 客服端</td>\n<td style=\"text-align:center\">eth0:10.0.0.31</td>\n<td style=\"text-align:center\">eth1:172.16.1.31</td>\n</tr>\n</tbody>\n</table>\n<h5 id=\"32-nfs服务安装\"><a class=\"anchor\" href=\"#32-nfs服务安装\">#</a> 3.2 NFS 服务安装</h5>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@nfs ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># yum -y install nfs-utils</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@nfs ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># vim /etc/exports</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>/data <span class=\"token number\">172.16</span>.1.0/24<span class=\"token punctuation\">(</span>rw,sync,all_squash<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">[</span>root@nfs ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># mkdir /data</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">[</span>root@nfs ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># chown -R nfsnobody.nfsnobody /data</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">[</span>root@nfs ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># systemctl enable nfs-server</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">[</span>root@nfs ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># systemctl restart nfs-server</span></pre></td></tr></table></figure><h5 id=\"33-nfs服务挂载\"><a class=\"anchor\" href=\"#33-nfs服务挂载\">#</a> 3.3 NFS 服务挂载</h5>\n<p>安装 nfs-utils 会自动启动 rpcbind 服务，执行 showmount -e 查看远程服务器 rpc 提供的可挂载 nfs 信息。</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#1. 查询挂载</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@nfs-client ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># yum -y install nfs\u0002utils</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">[</span>root@nfs-client ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># showmount -e 172.16.1.32</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>Export list <span class=\"token keyword\">for</span> <span class=\"token number\">172.16</span>.1.32:</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>/data <span class=\"token number\">172.16</span>.1.0/24</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">#2. 执行挂载</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">[</span>root@nfs-client ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># mkdir /nfsdir</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">[</span>root@nfs-client ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># mount -t nfs 172.16.1.32:/data /nfsdir</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">[</span>root@nfs-client ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># df –h</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">#3. 永久挂载</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">[</span>root@nfs-client ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># vim /etc/fstab</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token number\">172.16</span>.1.32:/data /nfsdir nfs defaults <span class=\"token number\">0</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\">#4. 执行卸载</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">[</span>root@nfs-client ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># umount /nfsdir</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\">#注意：卸载的时候如果提示”umount.nfs: /nfsdir:device is busy”</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\">#1. 切换至其他目录，然后在进行卸载。</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\">#2.NFS Server 宕机，强制卸载 umount -lf /nfsdir</span></pre></td></tr></table></figure><p>在企业工作场景，通常情况 NFS 服务器共享的只是普通静态数据（图片、附件、视频），不需要执行 suid、exec 等权限，挂载的这个文件系统只能作为数据存取之用，无法执行程序，对于客户端来讲增加了安全性。</p>\n<p>例如：很多木马篡改站点文件都是由上传入口上传的程序到存储目录，然后执行。</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#通过 mount -o 指定挂载参数，禁止使用 suid，exec，增加安全性能</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@nfs-client ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># mount -t nfs -o nosuid,noexec 172.16.1.31:/data /mnt</span></pre></td></tr></table></figure><h5 id=\"34-nfs配置详解\"><a class=\"anchor\" href=\"#34-nfs配置详解\">#</a> 3.4 NFS 配置详解</h5>\n<p>执行 man exports 命令，然后切换到文件结尾，可以快速查看如下样例格式：</p>\n<p>rw：读写权限</p>\n<p>ro：只读权限</p>\n<p>root_squash：当 NFS 客户端以 root 管理员访问时，映射为 NFS 服务器的匿名用户 (不常用)</p>\n<p>no_root_squash：当 NFS 客户端以 root 管理员访问时，映射为 NFS 服务器的 root 管理员 (不常用)</p>\n<p>all_squash：无论 NFS 客户端使用什么账户访问，均映射为 NFS 服务器的匿名用户 (常用)</p>\n<p>sync：同时将数据写入到内存与硬盘中，保证不丢失数据</p>\n<p>async：优先将数据保存到内存，然后再写入硬盘；这样效率更高，但可能会丢失数据</p>\n<p>anonuid：配置 all_squash 使用，指定 NFS 的用户 UID，必须存在系统</p>\n<p>anongid：配置 all_squash 使用，指定 NFS 的用户 GID，必须存在系统</p>\n<h5 id=\"35-验证ro权限\"><a class=\"anchor\" href=\"#35-验证ro权限\">#</a> 3.5 验证 ro 权限</h5>\n<p>1. 服务端修改 rw 为 ro 参数</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@nfs ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat /etc/exports</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>/data <span class=\"token number\">172.16</span>.1.0/24<span class=\"token punctuation\">(</span>ro,sync,all_squash<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">[</span>root@nfs ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># systemctl restart nfs-server</span></pre></td></tr></table></figure><p>2. 客户端验证</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@nfs-client ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># mount -t nfs 172.16.1.32:/data /mnt</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@nfs-client ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># df -h</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># 发现无法正常写入文件</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">[</span>root@backup mnt<span class=\"token punctuation\">]</span><span class=\"token comment\"># touch file</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>touch: cannot <span class=\"token function\">touch</span> ‘file’: Read-only <span class=\"token function\">file</span> system</pre></td></tr></table></figure><h5 id=\"36-验证all_squash权限\"><a class=\"anchor\" href=\"#36-验证all_squash权限\">#</a> 3.6 验证 all_squash 权限</h5>\n<p>验证 all_squash、anonuid、anongid 权限</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#1.NFS 服务端配置，然后进行初始化操作</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@nfs ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat /etc/exports</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>/data <span class=\"token number\">172.16</span>.1.0/24<span class=\"token punctuation\">(</span>rw,sync,all_squash,anonuid<span class=\"token operator\">=</span><span class=\"token number\">666</span>,anongid<span class=\"token operator\">=</span><span class=\"token number\">666</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">[</span>root@nfs ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># groupadd -g 666 www</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">[</span>root@nfs ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># useradd -u 666 -g 666 www</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">[</span>root@nfs ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># chown -R www.www /data/</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">#2. 客户端验证，会发现客户端文件的权限为 666，但可以正常写入数据</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">[</span>root@backup ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># umount /mnt/</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">[</span>root@backup ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># mount -t nfs 172.16.1.31:/data /mnt</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">[</span>root@backup mnt<span class=\"token punctuation\">]</span><span class=\"token comment\"># touch fff</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">[</span>root@backup mnt<span class=\"token punctuation\">]</span><span class=\"token comment\"># mkdir 111</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">[</span>root@backup mnt<span class=\"token punctuation\">]</span><span class=\"token comment\"># ll</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>drwxr-xr-x <span class=\"token number\">2</span> <span class=\"token number\">666</span> <span class=\"token number\">666</span> <span class=\"token number\">6</span> Sep <span class=\"token number\">3</span> 03:05 <span class=\"token number\">111</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>-rw-r--r-- <span class=\"token number\">1</span> <span class=\"token number\">666</span> <span class=\"token number\">666</span> <span class=\"token number\">0</span> Sep <span class=\"token number\">3</span> 03:05 fff</pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\">#3. 建议，客户端也创建一个 uid 为 666，gid 为 666，统一身份，避免后续出现权限不足的情况</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">[</span>root@backup mnt<span class=\"token punctuation\">]</span><span class=\"token comment\"># groupadd -g 666 www</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">[</span>root@backup mnt<span class=\"token punctuation\">]</span><span class=\"token comment\"># useradd -g 666 -u 666 www</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token punctuation\">[</span>root@backup mnt<span class=\"token punctuation\">]</span><span class=\"token comment\"># id www</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token assign-left variable\">uid</span><span class=\"token operator\">=</span><span class=\"token number\">666</span><span class=\"token punctuation\">(</span>www<span class=\"token punctuation\">)</span> <span class=\"token assign-left variable\">gid</span><span class=\"token operator\">=</span><span class=\"token number\">666</span><span class=\"token punctuation\">(</span>www<span class=\"token punctuation\">)</span> <span class=\"token assign-left variable\">groups</span><span class=\"token operator\">=</span><span class=\"token number\">666</span><span class=\"token punctuation\">(</span>www<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token punctuation\">[</span>root@backup mnt<span class=\"token punctuation\">]</span><span class=\"token comment\"># ll /mnt/</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>total <span class=\"token number\">4</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>drwxr-xr-x <span class=\"token number\">2</span> www www <span class=\"token number\">6</span> Sep <span class=\"token number\">3</span> 03:05 <span class=\"token number\">111</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>-rw-r--r-- <span class=\"token number\">1</span> www www <span class=\"token number\">0</span> Sep <span class=\"token number\">3</span> 03:05 fff</pre></td></tr></table></figure>",
            "tags": [
                "Linux"
            ]
        },
        {
            "id": "http://ixuyong.cn/posts/2508697220.html",
            "url": "http://ixuyong.cn/posts/2508697220.html",
            "title": "Chrony时间同步服务",
            "date_published": "2025-08-16T11:40:03.000Z",
            "content_html": "<h3 id=\"chrony时间同步服务\"><a class=\"anchor\" href=\"#chrony时间同步服务\">#</a> Chrony 时间同步服务</h3>\n<h4 id=\"一-时间同步基本概念\"><a class=\"anchor\" href=\"#一-时间同步基本概念\">#</a> 一、时间同步基本概念</h4>\n<p>时间同步就是将本地时间与互联网时间进行校对，为系统提供一个统一时间的过程。由于本地时间的计时速率、运行环境不一致性。所有本地时钟纵使在某一刻被校准了 ，一段时间后，这些本地时钟也会出现不一致。为了本地时钟再次达到相同的时间值，所以需要进行时间同步的操作。</p>\n<h4 id=\"二-chrony时间服务\"><a class=\"anchor\" href=\"#二-chrony时间服务\">#</a> 二、Chrony 时间服务</h4>\n<h5 id=\"21-chrony介绍\"><a class=\"anchor\" href=\"#21-chrony介绍\">#</a> 2.1 Chrony 介绍</h5>\n<p>chrony 是基于 ntp 协议的实现时间同步服务，它既可以当做服务端，也可以充当客户端；</p>\n<ul>\n<li>1、chrony 是 NTP 的替代品，能更精确的时间和更快的速度同步时钟；</li>\n<li>2、chrony 占用系统资源少，只有被唤起时才占用少部分 CPU，chrony 兼容 ntpdate；</li>\n<li>3、chrony 允许本地网络其他主机像本地进行时间同步；</li>\n</ul>\n<p><img loading=\"lazy\" data-src=\"https://wp-cdn.4ce.cn/v2/21Dre4A.png\" alt=\"1.png\" /></p>\n<h5 id=\"22-chrony安装\"><a class=\"anchor\" href=\"#22-chrony安装\">#</a> 2.2 Chrony 安装</h5>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@chrony ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># yum install chrony -y</span></pre></td></tr></table></figure><ul>\n<li>主配置文件：/etc/chrony.conf</li>\n<li>客户端程序：/usr/bin/chronyc</li>\n<li>服务端程序：/usr/sbin/chronyd</li>\n</ul>\n<h5 id=\"23-chrony服务端\"><a class=\"anchor\" href=\"#23-chrony服务端\">#</a> 2.3 Chrony 服务端</h5>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@chrony ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat /etc/chrony.conf</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">#使用同步的远程时钟源，理论上可以同步无限个</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>server <span class=\"token number\">0</span>.centos.pool.ntp.org iburst</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>server <span class=\"token number\">1</span>.centos.pool.ntp.org iburst</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>server <span class=\"token number\">2</span>.centos.pool.ntp.org iburst</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>server <span class=\"token number\">3</span>.centos.pool.ntp.org iburst</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">#根据实际时间计算出服务器增减时间的比率，然后记录到一个文件中，在系统重启后为系统做出最佳时间补偿调整</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>driftfile /var/lib/chrony/drift</pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">#如果系统时钟的偏移量大于 1 秒，则允许系统时钟在前三次更新中步进</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>makestep <span class=\"token number\">1.0</span> <span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\">#启用实时时钟（RTC）的内核同步</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>rtcsync</pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\">#通过使用 hwtimestamp 指令启用硬件时间戳</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\">#hwtimestamp *</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\">#增加调整所需的可选择源的最小数量</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\">#minsources 2</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\"># 允许指定网络的主机同步时间，不指定就是允许所有，默认不开启。</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>allow <span class=\"token number\">192.168</span>.0.0/16</pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token comment\"># 默认情况下本地服务器无法同步互联网时间时，可能会出现不精确，所以会拒绝提供授时服务；</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token comment\"># 开启此选项，则表示允许接受不精确时间，继续为客户端提供授时服务；</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token builtin class-name\">local</span> stratum <span class=\"token number\">10</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token comment\">#指定包含 NTP 身份验证密钥的文件</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token comment\">#keyfile /etc/chrony.keys</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token comment\">#指定日志文件</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>logdir /var/log/chrony</pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token comment\">#选择日志文件要记录的信息</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>log measurements statistics tracking</pre></td></tr></table></figure><p>1.Chrony 服务端配置，修改 /etc/chrony.conf 文件三处，设定外部时间服务器、允许内网同步此服务端、设置断网继续同步</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@Harbor ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat /etc/chrony.conf</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># Use public servers from the pool.ntp.org project.</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># Please consider joining the pool (https://www.pool.ntp.org/join.html).</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>server ntp.aliyun.com iburst</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># Allow NTP client access from local network.</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>allow <span class=\"token number\">192.168</span>.1.0/24</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># Serve time even if not synchronized to a time source.</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token builtin class-name\">local</span> stratum <span class=\"token number\">10</span></pre></td></tr></table></figure><p>2. 重启 Chrony 服务</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@chrony ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># systemctl restart chronyd</span></pre></td></tr></table></figure><h5 id=\"24-chrony客户端\"><a class=\"anchor\" href=\"#24-chrony客户端\">#</a> 2.4 Chrony 客户端</h5>\n<p>1. 客户端使用 ntpdate 或 chronyc 命令的方式进行手动同步</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># ntpdate</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@chrony ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># yum install ntpdate -y</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">[</span>root@chrony ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># ntpdate 192.168.1.68</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># chronyc</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">[</span>root@chrony ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># chronyc -a makestep</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token number\">200</span> OK</pre></td></tr></table></figure><p>2. 客户端使用 chrony 守护进程方式进行时间自动化同步</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@chrony ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># yum install chrony -y</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@chrony ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># vim /etc/chrony.conf</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># 指向至服务端</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>server <span class=\"token number\">192.168</span>.1.68 iburst</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">[</span>root@chrony ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># systemctl restart chronyd</span></pre></td></tr></table></figure><p>3. 查看时间同步是否正常</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@chrony ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># chronyc sources</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token number\">210</span> Number of sources <span class=\"token operator\">=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>MS Name/IP address         Stratum Poll Reach LastRx Last sample               </pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">=</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>^* <span class=\"token number\">192.168</span>.1.68                  <span class=\"token number\">3</span>   <span class=\"token number\">6</span>    <span class=\"token number\">17</span>     <span class=\"token number\">1</span>  +1652ns<span class=\"token punctuation\">[</span>  +17us<span class=\"token punctuation\">]</span> +/-   32ms</pre></td></tr></table></figure>",
            "tags": [
                "Linux"
            ]
        },
        {
            "id": "http://ixuyong.cn/posts/2260957686.html",
            "url": "http://ixuyong.cn/posts/2260957686.html",
            "title": "Linux—Centos7修改网卡名称",
            "date_published": "2025-08-15T02:40:25.000Z",
            "content_html": "<h3 id=\"linuxcentos7修改网卡名称\"><a class=\"anchor\" href=\"#linuxcentos7修改网卡名称\">#</a> Linux—Centos7 修改网卡名称</h3>\n<p>首先我们先了解不同网卡名称对应的内核参数：</p>\n<ol>\n<li>biosdevname=0  net.ifnames=1：网卡名 “enp<em>s</em>” 此内核参数一般为默认</li>\n<li>biosdevname=1  net.ifnames=0：网卡名 “em*”</li>\n<li>biosdevname=0  net.ifnames=0：网卡名 “eth*”</li>\n</ol>\n<p>本次以将网卡名命名为 eth * 格式作示例</p>\n<h4 id=\"1-查看当前网卡的信息\"><a class=\"anchor\" href=\"#1-查看当前网卡的信息\">#</a> 1. 查看当前网卡的信息</h4>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@manager ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># ifconfig</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>ens33: <span class=\"token assign-left variable\">flags</span><span class=\"token operator\">=</span><span class=\"token number\">416</span><span class=\"token operator\"><span class=\"token file-descriptor important\">3</span>&lt;</span>UP,BROADCAST,RUNNING,MULTICAST<span class=\"token operator\">></span>  mtu <span class=\"token number\">1500</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        inet <span class=\"token number\">192.168</span>.40.88  netmask <span class=\"token number\">255.255</span>.255.0  broadcast <span class=\"token number\">192.168</span>.40.255</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        inet6 fe80::b92f:3dd3:19e7:1311  prefixlen <span class=\"token number\">64</span>  scopeid 0x2<span class=\"token operator\"><span class=\"token file-descriptor important\">0</span>&lt;</span>link<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        ether 00:0c:29:5e:a0:59  txqueuelen <span class=\"token number\">1000</span>  <span class=\"token punctuation\">(</span>Ethernet<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        RX packets <span class=\"token number\">75</span>  bytes <span class=\"token number\">8065</span> <span class=\"token punctuation\">(</span><span class=\"token number\">7.8</span> KiB<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        RX errors <span class=\"token number\">0</span>  dropped <span class=\"token number\">0</span>  overruns <span class=\"token number\">0</span>  frame <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        TX packets <span class=\"token number\">63</span>  bytes <span class=\"token number\">7754</span> <span class=\"token punctuation\">(</span><span class=\"token number\">7.5</span> KiB<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        TX errors <span class=\"token number\">0</span>  dropped <span class=\"token number\">0</span> overruns <span class=\"token number\">0</span>  carrier <span class=\"token number\">0</span>  collisions <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>lo: <span class=\"token assign-left variable\">flags</span><span class=\"token operator\">=</span><span class=\"token number\">7</span><span class=\"token operator\"><span class=\"token file-descriptor important\">3</span>&lt;</span>UP,LOOPBACK,RUNNING<span class=\"token operator\">></span>  mtu <span class=\"token number\">65536</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        inet <span class=\"token number\">127.0</span>.0.1  netmask <span class=\"token number\">255.0</span>.0.0</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        inet6 ::1  prefixlen <span class=\"token number\">128</span>  scopeid 0x1<span class=\"token operator\"><span class=\"token file-descriptor important\">0</span>&lt;</span>host<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        loop  txqueuelen <span class=\"token number\">1000</span>  <span class=\"token punctuation\">(</span>Local Loopback<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        RX packets <span class=\"token number\">0</span>  bytes <span class=\"token number\">0</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.0</span> B<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        RX errors <span class=\"token number\">0</span>  dropped <span class=\"token number\">0</span>  overruns <span class=\"token number\">0</span>  frame <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        TX packets <span class=\"token number\">0</span>  bytes <span class=\"token number\">0</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.0</span> B<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        TX errors <span class=\"token number\">0</span>  dropped <span class=\"token number\">0</span> overruns <span class=\"token number\">0</span>  carrier <span class=\"token number\">0</span>  collisions <span class=\"token number\">0</span></pre></td></tr></table></figure><h4 id=\"2-修改配置文件\"><a class=\"anchor\" href=\"#2-修改配置文件\">#</a> 2 . 修改配置文件</h4>\n<p>（1）在下列路径下找到 ifcgf-ens33</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@manager ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cd /etc/sysconfig/network-scripts/</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@manager network-scripts<span class=\"token punctuation\">]</span><span class=\"token comment\"># ls</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>ifcfg-ens33  ifdown-ippp  ifdown-routes    <span class=\"token function\">ifup</span>          ifup-ipv6   ifup-ppp       ifup-tunnel</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>ifcfg-lo     ifdown-ipv6  ifdown-sit       ifup-aliases  ifup-isdn   ifup-routes    ifup-wireless</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">ifdown</span>       ifdown-isdn  ifdown-Team      ifup-bnep     ifup-plip   ifup-sit       init.ipv6-global</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>ifdown-bnep  ifdown-post  ifdown-TeamPort  ifup-eth      ifup-plusb  ifup-Team      network-functions</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>ifdown-eth   ifdown-ppp   ifdown-tunnel    ifup-ippp     ifup-post   ifup-TeamPort  network-functions-ipv6</pre></td></tr></table></figure><p>（2）使用 MV 命令，修改当前网卡的名称</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@manager ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># mv ifcfg-ens33 ifcfg-eth0</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@manager network-scripts<span class=\"token punctuation\">]</span><span class=\"token comment\"># ls</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>ifcfg-eth0   ifdown-ippp  ifdown-routes    <span class=\"token function\">ifup</span>          ifup-ipv6   ifup-ppp       ifup-tunnel</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>ifcfg-lo     ifdown-ipv6  ifdown-sit       ifup-aliases  ifup-isdn   ifup-routes    ifup-wireless</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">ifdown</span>       ifdown-isdn  ifdown-Team      ifup-bnep     ifup-plip   ifup-sit       init.ipv6-global</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>ifdown-bnep  ifdown-post  ifdown-TeamPort  ifup-eth      ifup-plusb  ifup-Team      network-functions</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>ifdown-eth   ifdown-ppp   ifdown-tunnel    ifup-ippp     ifup-post   ifup-TeamPort  network-functions-ipv6</pre></td></tr></table></figure><p>（3）同步修改网卡配置文件中的 name 和 device，修改为需要配置网卡的名字</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token assign-left variable\">NAME</span><span class=\"token operator\">=</span><span class=\"token string\">\"ens33\"</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token assign-left variable\">DEVICE</span><span class=\"token operator\">=</span><span class=\"token string\">\"ens33\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre> </pre></td></tr><tr><td data-num=\"4\"></td><td><pre>将上列命令修改为</pre></td></tr><tr><td data-num=\"5\"></td><td><pre> </pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token assign-left variable\">NAME</span><span class=\"token operator\">=</span><span class=\"token string\">\"eth0\"</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token assign-left variable\">DEVICE</span><span class=\"token operator\">=</span><span class=\"token string\">\"eth0\"</span></pre></td></tr></table></figure><p>（4）修改 grub</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@manager ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cd /etc/default/</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">#编辑内核信息，在 GRUB_CMDLINE_LINUX 行添加字段 net.ifnames=0 biosdevname=0</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">[</span>root@manager default<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat grub </span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token assign-left variable\">GRUB_TIMEOUT</span><span class=\"token operator\">=</span><span class=\"token number\">5</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token assign-left variable\">GRUB_DISTRIBUTOR</span><span class=\"token operator\">=</span><span class=\"token string\">\"<span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">sed</span> <span class=\"token string\">'s, release .*$,,g'</span> /etc/system-release<span class=\"token variable\">)</span></span>\"</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token assign-left variable\">GRUB_DEFAULT</span><span class=\"token operator\">=</span>saved</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token assign-left variable\">GRUB_DISABLE_SUBMENU</span><span class=\"token operator\">=</span>true</pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token assign-left variable\">GRUB_TERMINAL_OUTPUT</span><span class=\"token operator\">=</span><span class=\"token string\">\"console\"</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token assign-left variable\">GRUB_CMDLINE_LINUX</span><span class=\"token operator\">=</span><span class=\"token string\">\"crashkernel=auto rhgb net.ifnames=0 biosdevname=0 quiet\"</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token assign-left variable\">GRUB_DISABLE_RECOVERY</span><span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\">#生成启动菜单</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">[</span>root@manager default<span class=\"token punctuation\">]</span><span class=\"token comment\"># grub2-mkconfig -o /boot/grub2/grub.cfg</span></pre></td></tr></table></figure><p>（5）完成之后 reboot 重启系统即可</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@manager default<span class=\"token punctuation\">]</span><span class=\"token comment\"># reboot</span></pre></td></tr></table></figure><p>（6）使用 ifconfig 即可查看</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@manager ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># ifconfig</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>eth0: <span class=\"token assign-left variable\">flags</span><span class=\"token operator\">=</span><span class=\"token number\">416</span><span class=\"token operator\"><span class=\"token file-descriptor important\">3</span>&lt;</span>UP,BROADCAST,RUNNING,MULTICAST<span class=\"token operator\">></span>  mtu <span class=\"token number\">1500</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        inet <span class=\"token number\">192.168</span>.40.88  netmask <span class=\"token number\">255.255</span>.255.0  broadcast <span class=\"token number\">192.168</span>.40.255</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        inet6 fe80::63d4:467f:9b76:e34f  prefixlen <span class=\"token number\">64</span>  scopeid 0x2<span class=\"token operator\"><span class=\"token file-descriptor important\">0</span>&lt;</span>link<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        inet6 fe80::1856:7b0:9d1e:7208  prefixlen <span class=\"token number\">64</span>  scopeid 0x2<span class=\"token operator\"><span class=\"token file-descriptor important\">0</span>&lt;</span>link<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        ether 00:0c:29:5e:a0:59  txqueuelen <span class=\"token number\">1000</span>  <span class=\"token punctuation\">(</span>Ethernet<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        RX packets <span class=\"token number\">77</span>  bytes <span class=\"token number\">8117</span> <span class=\"token punctuation\">(</span><span class=\"token number\">7.9</span> KiB<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        RX errors <span class=\"token number\">0</span>  dropped <span class=\"token number\">0</span>  overruns <span class=\"token number\">0</span>  frame <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        TX packets <span class=\"token number\">62</span>  bytes <span class=\"token number\">7842</span> <span class=\"token punctuation\">(</span><span class=\"token number\">7.6</span> KiB<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        TX errors <span class=\"token number\">0</span>  dropped <span class=\"token number\">0</span> overruns <span class=\"token number\">0</span>  carrier <span class=\"token number\">0</span>  collisions <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>lo: <span class=\"token assign-left variable\">flags</span><span class=\"token operator\">=</span><span class=\"token number\">7</span><span class=\"token operator\"><span class=\"token file-descriptor important\">3</span>&lt;</span>UP,LOOPBACK,RUNNING<span class=\"token operator\">></span>  mtu <span class=\"token number\">65536</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        inet <span class=\"token number\">127.0</span>.0.1  netmask <span class=\"token number\">255.0</span>.0.0</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        inet6 ::1  prefixlen <span class=\"token number\">128</span>  scopeid 0x1<span class=\"token operator\"><span class=\"token file-descriptor important\">0</span>&lt;</span>host<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        loop  txqueuelen <span class=\"token number\">1000</span>  <span class=\"token punctuation\">(</span>Local Loopback<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        RX packets <span class=\"token number\">0</span>  bytes <span class=\"token number\">0</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.0</span> B<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        RX errors <span class=\"token number\">0</span>  dropped <span class=\"token number\">0</span>  overruns <span class=\"token number\">0</span>  frame <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        TX packets <span class=\"token number\">0</span>  bytes <span class=\"token number\">0</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.0</span> B<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        TX errors <span class=\"token number\">0</span>  dropped <span class=\"token number\">0</span> overruns <span class=\"token number\">0</span>  carrier <span class=\"token number\">0</span>  collisions <span class=\"token number\">0</span></pre></td></tr></table></figure>",
            "tags": [
                "Linux"
            ]
        },
        {
            "id": "http://ixuyong.cn/posts/581151773.html",
            "url": "http://ixuyong.cn/posts/581151773.html",
            "title": "100个运维相关技术官网汇总",
            "date_published": "2025-06-19T13:16:37.000Z",
            "content_html": "<h3 id=\"100个运维相关技术官网大汇总\"><a class=\"anchor\" href=\"#100个运维相关技术官网大汇总\">#</a> 100 个运维相关技术官网大汇总</h3>\n<h4 id=\"1-操作系统官网\"><a class=\"anchor\" href=\"#1-操作系统官网\">#</a> <strong>1. 操作系统官网</strong></h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">名称</th>\n<th style=\"text-align:left\">官网链接</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">Ubuntu</td>\n<td style=\"text-align:left\"><a href=\"https://ubuntu.com\">https://ubuntu.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Debian</td>\n<td style=\"text-align:left\"><a href=\"https://www.debian.org\">https://www.debian.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">RHEL</td>\n<td style=\"text-align:left\"><a href=\"https://www.redhat.com\">https://www.redhat.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Rocky Linux</td>\n<td style=\"text-align:left\"><a href=\"https://rockylinux.org\">https://rockylinux.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">AlmaLinux</td>\n<td style=\"text-align:left\"><a href=\"https://almalinux.org\">https://almalinux.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Arch Wiki</td>\n<td style=\"text-align:left\"><a href=\"https://wiki.archlinux.org\">https://wiki.archlinux.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">麒麟系统</td>\n<td style=\"text-align:left\"><a href=\"https://www.kylinos.cn/\">https://www.kylinos.cn/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">统信系统</td>\n<td style=\"text-align:left\"><a href=\"https://uniontech.com/\">https://uniontech.com/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">openEuler</td>\n<td style=\"text-align:left\"><a href=\"https://www.openeuler.org/zh/\">https://www.openeuler.org/zh/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">正版操作系统</td>\n<td style=\"text-align:left\"><a href=\"https://msdn.itellyou.cn/\">https://msdn.itellyou.cn/</a></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"2-开源镜像站\"><a class=\"anchor\" href=\"#2-开源镜像站\">#</a> <strong>2. 开源镜像站</strong></h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">镜像源名称</th>\n<th style=\"text-align:left\">官网链接</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">清华大学镜像站</td>\n<td style=\"text-align:left\"><a href=\"https://mirrors.tuna.tsinghua.edu.cn\">https://mirrors.tuna.tsinghua.edu.cn</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">中科大镜像站</td>\n<td style=\"text-align:left\"><a href=\"https://mirrors.ustc.edu.cn\">https://mirrors.ustc.edu.cn</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">阿里云镜像站</td>\n<td style=\"text-align:left\"><a href=\"https://developer.aliyun.com/mirror\">https://developer.aliyun.com/mirror</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">华为云镜像站</td>\n<td style=\"text-align:left\"><a href=\"https://mirrors.huaweicloud.com\">https://mirrors.huaweicloud.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">中国科技网镜像</td>\n<td style=\"text-align:left\"><a href=\"https://mirrors.cstcloud.cn\">https://mirrors.cstcloud.cn</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">网易开源镜像站</td>\n<td style=\"text-align:left\"><a href=\"http://mirrors.163.com\">http://mirrors.163.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">腾讯云镜像站</td>\n<td style=\"text-align:left\"><a href=\"https://mirrors.cloud.tencent.com\">https://mirrors.cloud.tencent.com</a></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"3-容器与-kubernetes\"><a class=\"anchor\" href=\"#3-容器与-kubernetes\">#</a> <strong>3. 容器与 Kubernetes</strong></h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">名称</th>\n<th style=\"text-align:left\">官网链接</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">Docker</td>\n<td style=\"text-align:left\"><a href=\"https://www.docker.com\">https://www.docker.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Kubernetes</td>\n<td style=\"text-align:left\"><a href=\"https://kubernetes.io\">https://kubernetes.io</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Helm</td>\n<td style=\"text-align:left\"><a href=\"https://helm.sh\">https://helm.sh</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Podman</td>\n<td style=\"text-align:left\"><a href=\"https://podman.io\">https://podman.io</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">containerd</td>\n<td style=\"text-align:left\"><a href=\"https://containerd.io\">https://containerd.io</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">K3s</td>\n<td style=\"text-align:left\"><a href=\"https://k3s.io\">https://k3s.io</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Rancher</td>\n<td style=\"text-align:left\"><a href=\"https://www.rancher.com/\">https://www.rancher.com/</a></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"4-云平台\"><a class=\"anchor\" href=\"#4-云平台\">#</a> <strong>4. 云平台</strong></h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">名称</th>\n<th style=\"text-align:left\">官网链接</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">AWS</td>\n<td style=\"text-align:left\"><a href=\"https://aws.amazon.com\">https://aws.amazon.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Azure</td>\n<td style=\"text-align:left\"><a href=\"https://azure.microsoft.com\">https://azure.microsoft.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">阿里云</td>\n<td style=\"text-align:left\"><a href=\"https://www.aliyun.com\">https://www.aliyun.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">腾讯云</td>\n<td style=\"text-align:left\"><a href=\"https://cloud.tencent.com\">https://cloud.tencent.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">华为云</td>\n<td style=\"text-align:left\"><a href=\"https://www.huaweicloud.com\">https://www.huaweicloud.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">天翼云</td>\n<td style=\"text-align:left\"><a href=\"https://www.ctyun.cn/\">https://www.ctyun.cn/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">OpenStack</td>\n<td style=\"text-align:left\"><a href=\"https://www.openstack.org\">https://www.openstack.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">CNCF Landscape</td>\n<td style=\"text-align:left\"><a href=\"https://landscape.cncf.io\">https://landscape.cncf.io</a></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"5-数据库\"><a class=\"anchor\" href=\"#5-数据库\">#</a> <strong>5. 数据库</strong></h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">名称</th>\n<th style=\"text-align:left\">官网链接</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">MySQL</td>\n<td style=\"text-align:left\"><a href=\"https://www.mysql.com\">https://www.mysql.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Oracle</td>\n<td style=\"text-align:left\"><a href=\"https://www.oracle.com/\">https://www.oracle.com/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">PostgreSQL</td>\n<td style=\"text-align:left\"><a href=\"https://www.postgresql.org\">https://www.postgresql.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">MariaDB</td>\n<td style=\"text-align:left\"><a href=\"https://mariadb.org\">https://mariadb.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">MongoDB</td>\n<td style=\"text-align:left\"><a href=\"https://www.mongodb.com\">https://www.mongodb.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Redis</td>\n<td style=\"text-align:left\"><a href=\"https://redis.io\">https://redis.io</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Memcached</td>\n<td style=\"text-align:left\"><a href=\"https://memcached.org\">https://memcached.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">达梦数据库</td>\n<td style=\"text-align:left\"><a href=\"https://www.dameng.com/\">https://www.dameng.com/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">OceanBase</td>\n<td style=\"text-align:left\"><a href=\"https://www.oceanbase.com/\">https://www.oceanbase.com/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Elasticsearch</td>\n<td style=\"text-align:left\"><a href=\"https://www.elastic.co/elasticsearch/\">https://www.elastic.co/elasticsearch/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ClickHouse</td>\n<td style=\"text-align:left\"><a href=\"https://clickhouse.com\">https://clickhouse.com</a></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"6-基础服务\"><a class=\"anchor\" href=\"#6-基础服务\">#</a> <strong>6. 基础服务</strong></h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">名称</th>\n<th style=\"text-align:left\">官网链接</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">Nginx</td>\n<td style=\"text-align:left\"><a href=\"https://nginx.org\">https://nginx.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Apache HTTPD</td>\n<td style=\"text-align:left\"><a href=\"https://httpd.apache.org\">https://httpd.apache.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Tomcat</td>\n<td style=\"text-align:left\"><a href=\"https://tomcat.apache.org/\">https://tomcat.apache.org/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">HAProxy</td>\n<td style=\"text-align:left\"><a href=\"https://www.haproxy.org\">https://www.haproxy.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Dnsmasq</td>\n<td style=\"text-align:left\"><a href=\"https://thekelleys.org.uk/dnsmasq/doc.html\">https://thekelleys.org.uk/dnsmasq/doc.html</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">CoreDNS</td>\n<td style=\"text-align:left\"><a href=\"https://coredns.io\">https://coredns.io</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">RabbitMQ</td>\n<td style=\"text-align:left\"><a href=\"https://www.rabbitmq.com\">https://www.rabbitmq.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Kafka</td>\n<td style=\"text-align:left\"><a href=\"https://kafka.apache.org\">https://kafka.apache.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Etcd</td>\n<td style=\"text-align:left\"><a href=\"https://etcd.io\">https://etcd.io</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Consul</td>\n<td style=\"text-align:left\"><a href=\"https://www.consul.io\">https://www.consul.io</a></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"7-cicd-与服务网格\"><a class=\"anchor\" href=\"#7-cicd-与服务网格\">#</a> <strong>7. CI/CD 与服务网格</strong></h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">名称</th>\n<th style=\"text-align:left\">官网链接</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">Jenkins</td>\n<td style=\"text-align:left\"><a href=\"https://www.jenkins.io\">https://www.jenkins.io</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">GitLab CI/CD</td>\n<td style=\"text-align:left\"><a href=\"https://about.gitlab.com\">https://about.gitlab.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">GitHub Actions</td>\n<td style=\"text-align:left\"><a href=\"https://github.com/features/actions\">https://github.com/features/actions</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ArgoCD</td>\n<td style=\"text-align:left\"><a href=\"https://argo-cd.readthedocs.io/\">https://argo-cd.readthedocs.io/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Spinnaker</td>\n<td style=\"text-align:left\"><a href=\"https://spinnaker.io\">https://spinnaker.io</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Istio</td>\n<td style=\"text-align:left\"><a href=\"https://istio.io/\">https://istio.io/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Envoy Proxy</td>\n<td style=\"text-align:left\"><a href=\"https://www.envoyproxy.io\">https://www.envoyproxy.io</a></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"8-监控与日志系统\"><a class=\"anchor\" href=\"#8-监控与日志系统\">#</a> <strong>8. 监控与日志系统</strong></h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">名称</th>\n<th style=\"text-align:left\">官网链接</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">Prometheus</td>\n<td style=\"text-align:left\"><a href=\"https://prometheus.io\">https://prometheus.io</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Grafana</td>\n<td style=\"text-align:left\"><a href=\"https://grafana.com\">https://grafana.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Loki</td>\n<td style=\"text-align:left\"><a href=\"https://grafana.com/oss/loki/\">https://grafana.com/oss/loki/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">ELK Stack</td>\n<td style=\"text-align:left\"><a href=\"https://www.elastic.co/what-is/elk-stack\">https://www.elastic.co/what-is/elk-stack</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Kibana</td>\n<td style=\"text-align:left\"><a href=\"https://www.elastic.co/kibana/\">https://www.elastic.co/kibana/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Fluentd</td>\n<td style=\"text-align:left\"><a href=\"https://www.fluentd.org\">https://www.fluentd.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Zabbix</td>\n<td style=\"text-align:left\"><a href=\"https://www.zabbix.com\">https://www.zabbix.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Netdata</td>\n<td style=\"text-align:left\"><a href=\"https://www.netdata.cloud\">https://www.netdata.cloud</a></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"9-自动化运维工具\"><a class=\"anchor\" href=\"#9-自动化运维工具\">#</a> <strong>9. 自动化运维工具</strong></h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">名称</th>\n<th style=\"text-align:left\">官网链接</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">Ansible</td>\n<td style=\"text-align:left\"><a href=\"https://docs.ansible.com/\">https://docs.ansible.com/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Terraform</td>\n<td style=\"text-align:left\"><a href=\"https://developer.hashicorp.com/terraform/docs\">https://developer.hashicorp.com/terraform/docs</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">SaltStack</td>\n<td style=\"text-align:left\"><a href=\"https://docs.saltproject.io/\">https://docs.saltproject.io/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Puppet</td>\n<td style=\"text-align:left\"><a href=\"https://puppet.com/docs/\">https://puppet.com/docs/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Chef</td>\n<td style=\"text-align:left\"><a href=\"https://docs.chef.io/\">https://docs.chef.io/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Packer</td>\n<td style=\"text-align:left\"><a href=\"https://developer.hashicorp.com/packer/docs\">https://developer.hashicorp.com/packer/docs</a></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"10-运维常用工具\"><a class=\"anchor\" href=\"#10-运维常用工具\">#</a> <strong>10. 运维常用工具</strong></h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">工具名称</th>\n<th style=\"text-align:left\">官网链接</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">Xshell</td>\n<td style=\"text-align:left\"><a href=\"https://www.netsarang.com/zh/xshell/\">https://www.netsarang.com/zh/xshell/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Xftp</td>\n<td style=\"text-align:left\"><a href=\"https://www.netsarang.com/en/xftp/\">https://www.netsarang.com/en/xftp/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">MobaXterm</td>\n<td style=\"text-align:left\"><a href=\"https://mobaxterm.mobatek.net\">https://mobaxterm.mobatek.net</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">PuTTY</td>\n<td style=\"text-align:left\"><a href=\"https://www.putty.org\">https://www.putty.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">SecureCRT</td>\n<td style=\"text-align:left\"><a href=\"https://www.vandyke.com/products/securecrt/\">https://www.vandyke.com/products/securecrt/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">WinSCP</td>\n<td style=\"text-align:left\"><a href=\"https://winscp.net\">https://winscp.net</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">FileZilla</td>\n<td style=\"text-align:left\"><a href=\"https://filezilla-project.org\">https://filezilla-project.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">FastCopy</td>\n<td style=\"text-align:left\"><a href=\"https://fastcopy.jp/en/\">https://fastcopy.jp/en/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Everything</td>\n<td style=\"text-align:left\"><a href=\"https://www.voidtools.com\">https://www.voidtools.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Wireshark</td>\n<td style=\"text-align:left\"><a href=\"https://www.wireshark.org\">https://www.wireshark.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">VirtualBox</td>\n<td style=\"text-align:left\"><a href=\"https://www.virtualbox.org/\">https://www.virtualbox.org/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">VMware Workstation</td>\n<td style=\"text-align:left\"><a href=\"https://www.vmware.com/products/workstation-pro.html\">https://www.vmware.com/products/workstation-pro.html</a></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"11-数据库可视化连接工具\"><a class=\"anchor\" href=\"#11-数据库可视化连接工具\">#</a> <strong>11. 数据库可视化连接工具</strong></h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">工具名称</th>\n<th style=\"text-align:left\">官网链接</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">DBeaver</td>\n<td style=\"text-align:left\"><a href=\"https://dbeaver.io\">https://dbeaver.io</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Navicat</td>\n<td style=\"text-align:left\"><a href=\"https://www.navicat.com\">https://www.navicat.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">HeidiSQL</td>\n<td style=\"text-align:left\"><a href=\"https://www.heidisql.com\">https://www.heidisql.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">SSMS</td>\n<td style=\"text-align:left\"><a href=\"https://learn.microsoft.com/sql/ssms/\">https://learn.microsoft.com/sql/ssms/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Toad for Oracle</td>\n<td style=\"text-align:left\"><a href=\"https://www.toadworld.com/products/toad-for-oracle\">https://www.toadworld.com/products/toad-for-oracle</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">SQL Developer</td>\n<td style=\"text-align:left\"><a href=\"https://www.oracle.com/database/sqldeveloper/\">https://www.oracle.com/database/sqldeveloper/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">DbVisualizer</td>\n<td style=\"text-align:left\"><a href=\"https://www.dbvis.com\">https://www.dbvis.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">SQL Workbench</td>\n<td style=\"text-align:left\"><a href=\"https://www.sql-workbench.eu\">https://www.sql-workbench.eu</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">phpMyAdmin</td>\n<td style=\"text-align:left\"><a href=\"https://www.phpmyadmin.net\">https://www.phpmyadmin.net</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">pgAdmin</td>\n<td style=\"text-align:left\"><a href=\"https://www.pgadmin.org\">https://www.pgadmin.org</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">MongoDB Compass</td>\n<td style=\"text-align:left\"><a href=\"https://www.mongodb.com/products/compass\">https://www.mongodb.com/products/compass</a></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">RedisInsight</td>\n<td style=\"text-align:left\"><a href=\"https://redis.com/redis-enterprise/redis-insight/\">https://redis.com/redis-enterprise/redis-insight/</a></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"12-实用工具\"><a class=\"anchor\" href=\"#12-实用工具\">#</a> 12. 实用工具</h4>\n<table>\n<thead>\n<tr>\n<th>工具名称</th>\n<th>官网链接</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>图床工具</td>\n<td><a href=\"https://wp-cdn.4ce.cn/\">https://wp-cdn.4ce.cn/</a></td>\n</tr>\n<tr>\n<td>科学上网</td>\n<td><a href=\"https://ikuuu.one/auth/register\">https://ikuuu.one/auth/register</a></td>\n</tr>\n<tr>\n<td>截图工具</td>\n<td><a href=\"https://pixpin.cn/\">https://pixpin.cn/</a></td>\n</tr>\n<tr>\n<td>FileZilla</td>\n<td><a href=\"https://www.filezilla.cn/download/client\">https://www.filezilla.cn/download/client</a></td>\n</tr>\n<tr>\n<td>在线工具</td>\n<td><a href=\"https://tool.lu/\">https://tool.lu/</a></td>\n</tr>\n<tr>\n<td>LOGO</td>\n<td><a href=\"https://favicon.io/\">https://favicon.io/</a></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"13-收藏博客\"><a class=\"anchor\" href=\"#13-收藏博客\">#</a> 13. 收藏博客</h4>\n<table>\n<thead>\n<tr>\n<th>昵称</th>\n<th>博客链接</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>小粉优化大师</td>\n<td><a href=\"https://www.cnblogs.com/ygbh/p/17384988.html\">https://www.cnblogs.com/ygbh/p/17384988.html</a></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n",
            "tags": [
                "Linux"
            ]
        }
    ]
}