<!-- build time:Wed Oct 22 2025 19:30:10 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta http-equiv="X-UA-COMPATIBLE" content="IE=edge,chrome=1"><meta name="renderer" content="webkit"><link rel="icon" type="image/ico" sizes="32x32" href="/assets/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon.ico"><link rel="alternate" href="/rss.xml" title="LinuxSre云原生" type="application/rss+xml"><link rel="alternate" href="/atom.xml" title="LinuxSre云原生" type="application/atom+xml"><link rel="alternate" type="application/json" title="LinuxSre云原生" href="http://ixuyong.cn/feed.json"><link rel="preconnect" href="https://s4.zstatic.net"><link rel="preconnect" href="https://at.alicdn.com"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Mulish:400,400italic,700,700italic%7CFredericka%20the%20Great:400,400italic,700,700italic%7CNoto%20Serif%20JP:400,400italic,700,700italic%7CNoto%20Serif%20SC:400,400italic,700,700italic%7CInconsolata:400,400italic,700,700italic&display=swap&subset=latin,latin-ext" media="none" onload="this.media&#x3D;&#39;all&#39;"><link rel="stylesheet" href="/css/app.css?v=0.4.17"><link rel="modulepreload" href="/js/chunk-GV364XSK.js"><link rel="modulepreload" href="/js/chunk-NYSE5UKM.js"><link rel="modulepreload" href="/js/chunk-RONCYO2S.js"><link rel="modulepreload" href="/js/chunk-THHXCRSX.js"><link rel="modulepreload" href="/js/chunk-WIQECBEN.js"><link rel="modulepreload" href="/js/comments-DL2IYMPZ.js"><link rel="modulepreload" href="/js/copy-tex-NADCTXPG.js"><link rel="modulepreload" href="/js/post-DA635IH6.js"><link rel="modulepreload" href="/js/quicklink-WEDHL4BA.js"><link rel="modulepreload" href="/js/search-VCZRKTM5.js"><link rel="modulepreload" href="/js/siteInit.js"><link rel="modulepreload" href="/js/waline-NNBYRQEE.js"><link rel="stylesheet" href="/css/comments-F4ZGS7LD.css" media="none" onload="this.media&#x3D;&#39;all&#39;"><link rel="stylesheet" href="/css/siteInit.css" media="none" onload="this.media&#x3D;&#39;all&#39;"><link rel="stylesheet" href="/css/waline-IDNZKML2.css" media="none" onload="this.media&#x3D;&#39;all&#39;"><link rel="preload" href="https://s21.ax1x.com/2025/03/29/pEsS0hD.png" as="image" fetchpriority="high"><meta name="keywords" content="Shell"><meta name="description" content="专注于 Linux 运维、云计算、云原⽣等技术"><link rel="canonical" href="http://ixuyong.cn/posts/1361162481.html"><title>Shell脚本基础与变量</title><meta name="generator" content="Hexo 7.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">Shell脚本基础与变量</h1><div class="meta"><span class="item" title="创建时间：2025-09-27 21:15:24"><span class="icon"><i class="ic i-calendar"></i></span><span class="text">发表于</span><time itemprop="dateCreated datePublished" datetime="2025-09-27T21:15:24+08:00">2025-09-27</time></span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i></span><span class="text">本文字数</span><span>17k</span><span class="text">字</span></span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i></span><span class="text">阅读时长</span><span>15 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span><span class="line"></span><span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">LinuxSre云原生</a></li></ul><ul class="right" id="rightNav"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div class="pjax" id="imgs"><img src="https://s21.ax1x.com/2025/03/29/pEsS0hD.png" loading="eager" decoding="async" fetchpriority="high" alt="LinuxSre云原生"></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"></use><use xlink:href="#gentle-wave" x="48" y="3"></use><use xlink:href="#gentle-wave" x="48" y="5"></use><use xlink:href="#gentle-wave" x="48" y="7"></use></g></svg></div><main><div class="inner"><div class="pjax" id="main"><div class="article wrap"><div class="breadcrumb" itemlistelement itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i><span><a href="/">首页</a></span><i class="ic i-angle-right"></i><span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/Shell/" itemprop="item" rel="index" title="分类于Shell"><span itemprop="name">Shell<meta itemprop="position" content="0"></span></a></span></div><article class="post block" itemscope itemtype="http://schema.org/Article" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://ixuyong.cn/posts/1361162481.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/assets/avatar.png"><meta itemprop="name" content="Xu Yong"><meta itemprop="description" content="致力于技术布道、普及前沿技术、打造云原生系列标杆博客, 专注于 Linux 运维、云计算、云原⽣等技术"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="LinuxSre云原生"></span><div class="body md" itemprop="articleBody"><h3 id="shell脚本编程及sed-awk进阶实践"><a class="anchor" href="#shell脚本编程及sed-awk进阶实践">#</a> Shell 脚本编程及 Sed、AWK 进阶实践</h3><h4 id="1-shell脚本概述"><a class="anchor" href="#1-shell脚本概述">#</a> 1. Shell 脚本概述</h4><h5 id="11什么是shell"><a class="anchor" href="#11什么是shell">#</a> 1.1. 什么是 shell</h5><p>Shell 是一个命令解释器，它在操作系统的最外层，负责直接与用户进行对话，将用户输入的命令翻译给操作系统，并将处理的结果输出至屏幕。</p><p><img loading="lazy" data-src="https://wp-cdn.4ce.cn/v2/ZfHrX6u.png" alt=""></p><p>当然 shell 命令是存在 交互式、非交互式两种方式：</p><ul><li>交互：日常使用，登陆、执行命令、退出；</li><li>非交互：直接读取某个文件，文件从头执行到尾即结束；</li></ul><h5 id="12-shell脚本号的使用"><a class="anchor" href="#12-shell脚本号的使用">#</a> 1.2 Shell 脚本 #号的使用</h5><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token shebang important">#!/bin/bash</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">#********************************************************************</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">#Author     : XuYong</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">#Date       : 2021-09-22</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">#FileName   : args.sh</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">#Description: The test script</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">#********************************************************************</span></pre></td></tr></table></figure><h5 id="13-自动添加shell的首部"><a class="anchor" href="#13-自动添加shell的首部">#</a> 1.3 自动添加 Shell 的首部</h5><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@web01 ~<span class="token punctuation">]</span><span class="token comment"># cat ~/.vimrc</span></pre></td></tr><tr><td data-num="2"></td><td><pre>autocmd BufNewFile *.sh <span class="token builtin class-name">exec</span> <span class="token string">":call SetTitle()"</span></pre></td></tr><tr><td data-num="3"></td><td><pre>func SetTitle<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">if</span> expand<span class="token punctuation">(</span><span class="token string">"%:e"</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'sh'</span></pre></td></tr><tr><td data-num="5"></td><td><pre>call setline<span class="token punctuation">(</span><span class="token number">1</span>,<span class="token string">"#!/bin/bash"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>call setline<span class="token punctuation">(</span><span class="token number">2</span>,<span class="token string">"#********************************************************************"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>call setline<span class="token punctuation">(</span><span class="token number">3</span>,<span class="token string">"#Author     : XuYong"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>call setline<span class="token punctuation">(</span><span class="token number">4</span>,<span class="token string">"#Date       : "</span>.strftime<span class="token punctuation">(</span><span class="token string">"%Y-%m-%d"</span><span class="token punctuation">))</span></pre></td></tr><tr><td data-num="9"></td><td><pre>call setline<span class="token punctuation">(</span><span class="token number">5</span>,<span class="token string">"#FileName   : "</span>.expand<span class="token punctuation">(</span><span class="token string">"%"</span><span class="token punctuation">))</span></pre></td></tr><tr><td data-num="10"></td><td><pre>call setline<span class="token punctuation">(</span><span class="token number">6</span>,<span class="token string">"#Description: The test script"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>call setline<span class="token punctuation">(</span><span class="token number">7</span>,<span class="token string">"#********************************************************************"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>call setline<span class="token punctuation">(</span><span class="token number">8</span>,<span class="token string">""</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>endif</pre></td></tr><tr><td data-num="14"></td><td><pre>endfunc</pre></td></tr><tr><td data-num="15"></td><td><pre>autocmd BufNewFile * normal G</pre></td></tr></table></figure><h4 id="2-shell变量"><a class="anchor" href="#2-shell变量">#</a> 2. Shell 变量</h4><h5 id="21-什么是变量"><a class="anchor" href="#21-什么是变量">#</a> 2.1 什么是变量</h5><p>变量是 shell 中传递数据的一种方法。简单理解，就是用一个固定的字符串去表示不固定的值，便于后续引用。</p><h5 id="22-变量命名规范"><a class="anchor" href="#22-变量命名规范">#</a> 2.2 变量命名规范</h5><ul><li 注意:="" 变量名称最好具备一定含义="">变量定义命名：大写小写字母、下划线组成，尽量字母开头。</li><li>变量定义语法：变量名 = 变量值，等号是赋值，需要注意：等号两边不能有空格，其次定义的变量不要与系统命令出现冲突。参考如下定义变量方式：</li></ul><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token assign-left variable">ip</span><span class="token operator">=</span><span class="token number">10.0</span>.0.100</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token assign-left variable">Hostname_Ip</span><span class="token operator">=</span><span class="token number">10.0</span>.0.100</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token assign-left variable">hostname_IP</span><span class="token operator">=</span><span class="token number">10.0</span>.0.100</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token assign-left variable">system_cpu_load_avg1</span><span class="token operator">=</span>w <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'&#123;print $1&#125;'</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token assign-left variable">system_cpu_load_avg5</span><span class="token operator">=</span>w <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'&#123;print $2&#125;'</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token assign-left variable">system_cpu_load_avg15</span><span class="token operator">=</span>w <span class="token operator">|</span><span class="token function">awk</span> '<span class="token punctuation">&#123;</span>print <span class="token variable">$3</span><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h5 id="23-变量定义方式"><a class="anchor" href="#23-变量定义方式">#</a> 2.3 变量定义方式</h5><ul><li>1. 用户自定义变量：人为定义变量名与变量的值。</li><li>2. 系统环境变量：保存的是和系统操作环境相关的数据，所有用户都可以使用。</li><li>3. 位置参数变量：向脚本中进行参数传递，变量名不能自定义，变量作用是固定的。</li><li>4. 特殊参数变量：是 Bash 中已经定义好的变量，变量名不能自定义，变量作用也是固定的。</li></ul><h6 id="231-用户自定义变量"><a class="anchor" href="#231-用户自定义变量">#</a> 2.3.1 用户自定义变量</h6><p>1. 定义变量，变量名 = 变量值。不能出现 &quot;- 横岗&quot; 命名</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@web01 ~<span class="token punctuation">]</span><span class="token comment"># var="hello shell"         #定义变量有空格必须使用双引号</span></pre></td></tr></table></figure><p 变量名="">2. 引用变量，$ 变量名 或 $</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@web01 ~<span class="token punctuation">]</span><span class="token comment"># echo $var</span></pre></td></tr><tr><td data-num="2"></td><td><pre>hello shell</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">[</span>root@web01 ~<span class="token punctuation">]</span><span class="token comment"># echo $var_log</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">[</span>root@web01 ~<span class="token punctuation">]</span><span class="token comment"># echo $&#123;var&#125;_log</span></pre></td></tr><tr><td data-num="6"></td><td><pre>hello shell_log</pre></td></tr></table></figure><p>3. 注意事项，引用变量时注意事项，&quot;&quot; 双引号属于弱引用，'' 单引号属于强引用</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@web01 ~<span class="token punctuation">]</span><span class="token comment"># var2=Iphone</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>root@web01 ~<span class="token punctuation">]</span><span class="token comment"># echo "$var2 is good"</span></pre></td></tr><tr><td data-num="3"></td><td><pre>Iphone is good</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">[</span>root@web01 ~<span class="token punctuation">]</span><span class="token comment"># echo '$var2 is good'</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token variable">$var2</span> is good</pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment"># 如果有变量的情况下，建议增加双引号；</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment"># 如果存在特殊的字符，不希望被解析，这个时需要使用 '' 或者转移字符；</span></pre></td></tr></table></figure><h6 id="232-系统环境变量"><a class="anchor" href="#232-系统环境变量">#</a> 2.3.2 系统环境变量</h6><p>1. 使用系统已定义好的环境变量</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@web01 ~<span class="token punctuation">]</span><span class="token comment"># cat env.sh </span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">#!/bin/bash</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">#********************************************************************</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">#Author     : XuYong</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">#Date       : 2025-09-17</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">#FileName   : env.sh</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">#Description: The test script</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">#********************************************************************</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"用户的家目录: <span class="token environment constant">$HOME</span>"</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"当前主机名是: <span class="token environment constant">$HOSTNAME</span>"</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"当前所在目录: <span class="token environment constant">$PWD</span>"</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">[</span>root@web01 ~<span class="token punctuation">]</span><span class="token comment"># sh env.sh </span></pre></td></tr><tr><td data-num="14"></td><td><pre>用户的家目录: /root</pre></td></tr><tr><td data-num="15"></td><td><pre>当前主机名是: web01</pre></td></tr><tr><td data-num="16"></td><td><pre>当前所在目录: /root</pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token comment"># 场景：脚本只能 root 用户运行，非 root 拒绝运行；</span></pre></td></tr></table></figure><p>2. 人为定义环境变量：export 变量，将自定义变量转换成环境变量；</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@web01 ~<span class="token punctuation">]</span><span class="token comment"># var2=hello</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>root@web01 ~<span class="token punctuation">]</span><span class="token comment"># echo $var2</span></pre></td></tr><tr><td data-num="3"></td><td><pre>hello</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">[</span>root@web01 ~<span class="token punctuation">]</span><span class="token comment"># cat env.sh </span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">#!/bin/bash</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$var2</span>"</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">#执行 a.sh 时，会使用另一个 bash 去执行，就访问不到 $VAR1 的值</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">[</span>root@web01 ~<span class="token punctuation">]</span><span class="token comment"># sh env.sh </span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">#将变量转为环境变量</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">[</span>root@web01 ~<span class="token punctuation">]</span><span class="token comment"># export var2=hello</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">[</span>root@web01 ~<span class="token punctuation">]</span><span class="token comment"># sh env.sh </span></pre></td></tr><tr><td data-num="14"></td><td><pre>hello</pre></td></tr></table></figure><h6 id="233-位置参数变量"><a class="anchor" href="#233-位置参数变量">#</a> 2.3.3 位置参数变量</h6><p>位置参数顾名思义，就是传递给脚本参数的位置，例如给一个脚本传递一个参数，我们可以在 Shell 脚本内部获取传入的位置参数，获取参数的格式为：$n。n 代表一个数字。</p><p>例如传递给脚本的第一个参数就为 $1，第 2 个参数就为 $2, 以此类推……，其中 $0 为该脚本的名称。</p><p>1. 编写脚本</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@web01 ~<span class="token punctuation">]</span><span class="token comment"># cat args.sh</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">#!/bin/bash</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">#********************************************************************</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">#Author     : XuYong</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">#Date       : 2025-09-17</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">#FileName   : args.sh</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">#Description: The test script</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">#********************************************************************</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"#当前shell脚本的文件名： <span class="token variable">$0</span>"</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"#第1个shell脚本位置参数：<span class="token variable">$1</span>"</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"#第2个shell脚本位置参数：<span class="token variable">$2</span>"</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"#第3个shell脚本位置参数：<span class="token variable">$3</span>"</span></pre></td></tr></table></figure><p>2. 执行脚本（发现第一个参数 11、第二个参数 22、第三个参数 33、<a target="_blank" rel="noopener" href="http://xn--args-uk1gv62h3p1ae8l.sh">脚本名称 args.sh</a>）</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@web01 ~<span class="token punctuation">]</span><span class="token comment"># sh args.sh 11 22 33</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">#当前 shell 脚本的文件名： args.sh</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">#第 1 个 shell 脚本位置参数：11</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">#第 2 个 shell 脚本位置参数：22</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">#第 3 个 shell 脚本位置参数：33</span></pre></td></tr></table></figure><h6 id="234-特殊参数变量"><a class="anchor" href="#234-特殊参数变量">#</a> 2.3.4 特殊参数变量</h6><p>特殊参数：</p><ul><li>$#：传递给脚本或函数的参数个数总和；</li><li>$*：传递给脚本或函数的所有参数，当被双引号 &quot;&quot; 包含时，所有的位置参数被看做一个字符串</li><li>$@：传递给脚本或函数的所有参数，当被双引号 &quot;&quot; 包含时，每个位置参数被看做独立的字符串</li><li>$?：上个命令的退出状态，或函数的返回值，0 为执行成功，非 0 则为执行失败</li><li><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>：当前程序运行的</mtext><mi>P</mi><mi>I</mi><mi>D</mi></mrow><annotation encoding="application/x-tex">：当前程序运行的 PID</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord cjk_fallback">：</span><span class="mord cjk_fallback">当</span><span class="mord cjk_fallback">前</span><span class="mord cjk_fallback">程</span><span class="mord cjk_fallback">序</span><span class="mord cjk_fallback">运</span><span class="mord cjk_fallback">行</span><span class="mord cjk_fallback">的</span><span class="mord mathnormal" style="margin-right:.13889em">P</span><span class="mord mathnormal" style="margin-right:.07847em">I</span><span class="mord mathnormal" style="margin-right:.02778em">D</span></span></span></span></span></p></li></ul><p>[root@web01 ~]# cat <a target="_blank" rel="noopener" href="http://args2.sh">args2.sh</a><br>#!/bin/bash<br>#********************************************************************<br>#Author : XuYong<br>#Date : 2025-09-17<br>#FileName : <a target="_blank" rel="noopener" href="http://args2.sh">args2.sh</a><br>#Description: The test script<br>#********************************************************************<br>echo &quot;第一个参数为: $1&quot;<br>echo&quot; 第二个参数为: $2&quot;<br>echo&quot; 脚本名称为: $0&quot;<br>echo&quot; 脚本接受参数总数为: $#&quot;</p><p>curl -I <a target="_blank" rel="noopener" href="http://baidu.com">baidu.com</a> &amp;&gt;/dev/null<br>echo &quot;运行命令的状态为:$?&quot;</p><p>echo &quot;脚本的 ID 为:$$&quot;<br>echo&quot;$* 的结果为:<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>∗</mo><mi mathvariant="normal">&quot;</mi><mi>e</mi><mi>c</mi><mi>h</mi><mi>o</mi><mi mathvariant="normal">&quot;</mi><mi mathvariant="normal">$</mi><mi mathvariant="normal">@</mi><mtext>的结果为</mtext><mo>:</mo></mrow><annotation encoding="application/x-tex">*&quot; echo &quot;\$@ 的结果为:</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.80556em;vertical-align:-.05556em"></span><span class="mord">∗</span><span class="mord">&quot;</span><span class="mord mathnormal">e</span><span class="mord mathnormal">c</span><span class="mord mathnormal">h</span><span class="mord mathnormal">o</span><span class="mord">&quot;</span><span class="mord">$</span><span class="mord">@</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">结</span><span class="mord cjk_fallback">果</span><span class="mord cjk_fallback">为</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">:</span></span></span></span>@&quot;<br>echo &quot;==========================&quot;</p><p>echo &quot;$* 循环接收的结果&quot;<br>for i in &quot;$*&quot;;<br>do<br>echo $i<br>done</p><p>echo &quot;$@ 循环接收的结果&quot;<br>for j in &quot;$@&quot;;<br>do<br>echo $j<br>done</p><pre><code>
2.执行脚本

```bash
[root@web01 ~]# sh args2.sh jenkins docker kubernetes
第一个参数为: jenkins
第二个参数为: docker
脚本名称为: args2.sh
脚本接受参数总数为: 3
运行命令的状态为:0
脚本的ID为:12989
$* 的结果为:jenkins docker kubernetes
$@ 的结果为:jenkins docker kubernetes
==========================
$* 循环接收的结果
jenkins docker kubernetes
$@ 循环接收的结果
jenkins
docker
kubernetes
</code></pre><h6 id="235-参数场景示例"><a class="anchor" href="#235-参数场景示例">#</a> 2.3.5 参数场景示例</h6><p>需求 1：通过位置变量创建 Linux 系统账户及密码，执行 <a target="_blank" rel="noopener" href="http://var1.sh">var1.sh</a> username password</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@web01 var<span class="token punctuation">]</span><span class="token comment"># cat var1.sh </span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">#!/bin/bash</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">#********************************************************************</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">#Author     : XuYong</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">#Date       : 2025-09-17</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">#FileName   : var1.sh</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">#Description: The test script</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">#********************************************************************</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">#$1 是执行脚本的第一个参数，$2 是执行脚本的第二个参数</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token function">useradd</span> <span class="token variable">$1</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$2</span>"</span> <span class="token operator">|</span> <span class="token function">passwd</span>  <span class="token parameter variable">--stdin</span> <span class="token variable">$1</span></pre></td></tr></table></figure><p>需求 2：通过位置变量创建 Linux 系统账户及密码，执行 <a target="_blank" rel="noopener" href="http://var1.sh">var1.sh</a> username password，控制最多传递两个参数。</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@web01 var<span class="token punctuation">]</span><span class="token comment"># cat var1.sh </span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">#!/bin/bash</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">#********************************************************************</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">#Author     : XuYong</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">#Date       : 2025-09-17</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">#FileName   : var1.sh</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">#Description: The test script</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">#********************************************************************</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">#通过 $# 控制用户传递参数的个数</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$#</span> <span class="token parameter variable">-ne</span> <span class="token number">2</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token builtin class-name">echo</span> <span class="token string">"USAGE USER|PASSWD"</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token builtin class-name">exit</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">fi</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">#$1 是执行脚本的第一个参数，$2 是执行脚本的第二个参数</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token function">useradd</span> <span class="token variable">$1</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$2</span>"</span> <span class="token operator">|</span> <span class="token function">passwd</span>  <span class="token parameter variable">--stdin</span> <span class="token variable">$1</span></pre></td></tr></table></figure><p>需求 3：通过位置变量创建 Linux 系统账户及密码，执行 <a target="_blank" rel="noopener" href="http://var1.sh">var1.sh</a> username password，控制最多传递两个参数，且必须是 root 身份；</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@web01 var<span class="token punctuation">]</span><span class="token comment"># cat var1.sh </span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">#!/bin/bash</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">#********************************************************************</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">#Author     : XuYong</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">#Date       : 2025-09-17</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">#FileName   : var1.sh</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">#Description: The test script</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">#********************************************************************</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment"># 1. 判断执行者的身份</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token environment constant">$UID</span> <span class="token parameter variable">-ne</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$0</span> Permission denied, Please Switch Root."</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token builtin class-name">exit</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">fi</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token comment">#1. 判断传递的参数总个数 -ne 不等于</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$#</span> <span class="token parameter variable">-ne</span> <span class="token number">2</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token builtin class-name">echo</span> <span class="token string">"USAGE <span class="token variable">$0</span> [ UserName &amp;&amp; Password]"</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token builtin class-name">exit</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token keyword">fi</span></pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token comment"># 执行业务逻辑</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token function">useradd</span> <span class="token variable">$1</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$2</span>"</span> <span class="token operator">|</span> <span class="token function">passwd</span> <span class="token parameter variable">--stdin</span> <span class="token variable">$1</span></pre></td></tr></table></figure><h5 id="24-read交互传递变量"><a class="anchor" href="#24-read交互传递变量">#</a> 2.4 read 交互传递变量</h5><p>除了自定义变量，以及系统内置变量，还可以使用 read 命令通过交互式方式传递变量。</p><table><thead><tr><th style="text-align:left"><strong>read</strong> 选项</th><th><strong>选项含义</strong></th></tr></thead><tbody><tr><td style="text-align:left">-p</td><td>打印信息</td></tr><tr><td style="text-align:left">-t</td><td>限定时间</td></tr><tr><td style="text-align:left">-s</td><td>不回显</td></tr><tr><td style="text-align:left">-n</td><td>指定字符个数</td></tr></tbody></table><p>1.read 示例语法</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@web01 ~<span class="token punctuation">]</span><span class="token comment"># cat read-1.sh</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">#!/bin/bash</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">#********************************************************************</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">#Author     : XuYong</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">#Date       : 2025-09-17</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">#FileName   : read-1.sh</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">#Description: The test script</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">#********************************************************************</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"Login: "</span> acc</pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token builtin class-name">read</span> <span class="token parameter variable">-s</span> <span class="token parameter variable">-p</span> <span class="token string">"Passwd: "</span> pw</pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"account:  <span class="token variable">$acc</span>	password:  <span class="token variable">$pw</span>"</span></pre></td></tr></table></figure><p>2.read -p 示例</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@web01 read<span class="token punctuation">]</span><span class="token comment"># cat read-2.sh </span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">#!/bin/bash</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">#********************************************************************</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">#Author     : XuYong</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">#Date       : 2025-09-17</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">#FileName   : read-2.sh</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">#Description: The test script</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">#********************************************************************</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"Login: "</span> acc</pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"Passwd: "</span> <span class="token function">passwd</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"account: <span class="token variable">$acc</span> password: <span class="token variable">$passwd</span>"</span></pre></td></tr></table></figure><p>3.read -p -t -n -s 示例，限制用户输入密码超时 5s，密码密文，位数不能超过 6。</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@web01 read<span class="token punctuation">]</span><span class="token comment"># cat read-2.sh </span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">#!/bin/bash</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">#********************************************************************</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">#Author     : XuYong</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">#Date       : 2025-09-17</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">#FileName   : read-2.sh</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">#Description: The test script</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">#********************************************************************</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"Login: "</span> acc</pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token builtin class-name">read</span> <span class="token parameter variable">-t</span> <span class="token number">60</span> <span class="token parameter variable">-n</span> <span class="token number">6</span> <span class="token parameter variable">-s</span> <span class="token parameter variable">-p</span> <span class="token string">"Passwd: "</span> <span class="token function">passwd</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"account: <span class="token variable">$acc</span> password: <span class="token variable">$passwd</span>"</span></pre></td></tr></table></figure><h6 id="241-场景1模拟登陆页面脚本"><a class="anchor" href="#241-场景1模拟登陆页面脚本">#</a> 2.4.1 场景 1 模拟登陆页面脚本</h6><p>使用 read 模拟 Linux 登陆页面:</p><ul><li>1. 如果输入用户为 root，密码为 123，则输出欢迎登陆；</li><li>2. 否则输出用户或密码错误；</li></ul><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@web01 read<span class="token punctuation">]</span><span class="token comment"># cat read-2.sh </span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">#!/bin/bash</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">#********************************************************************</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">#Author     : XuYong</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">#Date       : 2025-09-17</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">#FileName   : read-2.sh</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">#Description: The test script</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">#********************************************************************</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">#!/bin/bash</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">#********************************************************************</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">#Author     : Oldxu</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment">#Date       : 2021-09-22</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment">#FileName   : read-2.sh</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token comment">#Description: The test script</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">#********************************************************************</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token assign-left variable">System</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>hostnamectl  <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'/Operating/'</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">': '</span> <span class="token string">'&#123;print $NF&#125;'</span><span class="token variable">)</span></span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token assign-left variable">Kernel</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>hostnamectl  <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'/Kernel/'</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">'[: ]+'</span> <span class="token string">'&#123;print $2&#125;'</span><span class="token variable">)</span></span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token assign-left variable">Kernel_version</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>hostnamectl  <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'/Kernel/'</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">'[: ]+'</span> <span class="token string">'&#123;print $4&#125;'</span><span class="token variable">)</span></span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token comment"># 打印系统信息</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token variable">$System</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$&#123;Kernel&#125;</span> <span class="token variable">$&#123;Kernel_version&#125;</span> on an <span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> <span class="token parameter variable">-m</span><span class="token variable">)</span></span>"</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token comment"># 交互输入</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span>  <span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token function">hostname</span><span class="token variable">)</span></span> login: "</span> user</pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token builtin class-name">read</span> <span class="token parameter variable">-s</span> <span class="token parameter variable">-p</span> <span class="token string">"Password: "</span> pass</pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">""</span></pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token comment"># 判断用户输入的用户名称 + 密码是否正确</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$user</span> <span class="token operator">==</span> <span class="token string">"root"</span> <span class="token parameter variable">-a</span> <span class="token variable">$pass</span> <span class="token operator">==</span> <span class="token string">"123"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token builtin class-name">echo</span> <span class="token string">"欢迎 <span class="token variable">$user</span> 用户登录节点.."</span></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token keyword">else</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token builtin class-name">echo</span> <span class="token string">"用户密码错误...."</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token builtin class-name">exit</span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token keyword">fi</span></pre></td></tr></table></figure><h6 id="242-场景2-系统备份脚本"><a class="anchor" href="#242-场景2-系统备份脚本">#</a> 2.4.2 场景 2 - 系统备份脚本</h6><p>使用 read 编写一个备份脚本，需要用户传递 2 个参数，源和目标。</p><ul><li>1. 提示用户，你需要备份的文件在哪个路径下；</li><li>2. 提示用户，你要备份到哪个目录；</li><li>3. 你确定要备份吗？[yes | no]</li><li>4. 如果输入 yes 就进行备份的操作，如果输入 no，则取消备份；</li></ul><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token shebang important">#!/bin/bash</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">cat</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF</span></pre></td></tr><tr><td data-num="3"></td><td><pre>###################################################################################</pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>############################Backup Scripts ########################################</pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>###################################################################################</pre></td></tr><tr><td data-num="8"></td><td><pre>EOF</pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"你要备份的源文件在哪里: "</span>  src_file</pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"你要备份到哪个目录下: "</span> dest_dir</pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">" 你要备份的源文件 <span class="token variable">$src_file</span> 要备份到 <span class="token variable">$dest_dir</span> 你确定吗? [ yes | no ]: "</span> Action</pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$&#123;Action<span class="token operator">:=</span>yes&#125;</span> <span class="token operator">==</span> <span class="token string">"yes"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token function">cp</span> <span class="token parameter variable">-rpv</span> <span class="token variable">$src_file</span> <span class="token variable">$dest_dir</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">else</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token builtin class-name">exit</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token keyword">fi</span></pre></td></tr></table></figure><h6 id="243-场景3-探测主机存活脚本"><a class="anchor" href="#243-场景3-探测主机存活脚本">#</a> 2.4.3 场景 3 - 探测主机存活脚本</h6><p>使用 read 编写一个探测主机存活脚本，需要用户传递测试的 IP 地址。</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token shebang important">#!/usr/bin/bash</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"请输入你要探测的IP地址: "</span> Ip</pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token function">ping</span> <span class="token parameter variable">-W</span> <span class="token number">1</span> <span class="token parameter variable">-c</span> <span class="token number">1</span> <span class="token variable">$Ip</span> <span class="token operator">&amp;></span>/dev/null</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$?</span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">"<span class="token entity" title="\033">\033</span>[32m <span class="token variable">$Ip</span> 通... <span class="token entity" title="\033">\033</span>[0m"</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">else</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">"<span class="token entity" title="\033">\033</span>[31m <span class="token variable">$Ip</span> 不通... <span class="token entity" title="\033">\033</span>[0m"</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">fi</span></pre></td></tr></table></figure><h6 id="244-场景4-修改主机名称脚本"><a class="anchor" href="#244-场景4-修改主机名称脚本">#</a> 2.4.4 场景 4 - 修改主机名称脚本</h6><p>使用 read 编写一个修改系统主机名称脚本。</p><ul><li>1. 打印当前主机名称；</li><li>2. 询问用户需要修改的新主机名称是什么；</li><li>3. 你是否要将 旧的名称 --- 新的名称 是：</li><li>4. 调用 shell 命令执行修改；</li></ul><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token shebang important">#!/usr/bin/bash</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token assign-left variable">old_host</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">hostname</span><span class="token variable">)</span></span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"当前主机名称是 <span class="token variable">$&#123;old_host&#125;</span> "</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"你要修改的新主机名称是: "</span> new_host</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"你要将 <span class="token variable">$old_host</span> --> <span class="token variable">$new_host</span>: [ yes | no ]"</span> Action</pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$Action</span> <span class="token operator">==</span> <span class="token string">"yes"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    hostnamectl set-hostname <span class="token variable">$new_host</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">fi</span></pre></td></tr></table></figure><h5 id="25-shell变量删除"><a class="anchor" href="#25-shell变量删除">#</a> 2.5 Shell 变量删除</h5><h6 id="251-什么是变量删除"><a class="anchor" href="#251-什么是变量删除">#</a> <strong>2.5.1</strong> <strong>什么是变量删除</strong></h6><p>简单来说，就是在不改变原有变量的情况下，对变量值进行删除。</p><h6 id="252-为什么要用变量删除"><a class="anchor" href="#252-为什么要用变量删除">#</a> <strong>2.5.2</strong> <strong>为什么要用变量删除</strong></h6><p>比如：我们需要对某个变量的值进行整数比对，但变量的值是一个小数。怎么办？</p><p>我们可以使用变量删除的方式，将小数位进行删除，然后在进行整数比对。</p><h6 id="253-变量删除的几种方式"><a class="anchor" href="#253-变量删除的几种方式">#</a> <strong>2.5.3</strong> <strong>变量删除的几种方式</strong></h6><table><thead><tr><th><strong>变量</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td 变量#匹配规则="">$</td><td>从头开始匹配，最短删除</td></tr><tr><td 变量##匹配规则="">$</td><td>从头开始匹配，最长删除</td></tr><tr><td 变量%匹配规则="">$</td><td>从尾开始匹配，最短删除</td></tr><tr><td 变量%%匹配规则="">$</td><td>从尾开始匹配，最长删除</td></tr></tbody></table><h6 id="254-变量删除语法示例"><a class="anchor" href="#254-变量删除语法示例">#</a> <strong>2.5.4</strong> <strong>变量删除语法示例</strong></h6><p>示例 1：从前往后删除变量内容</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">#定义变量</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>root@client ~<span class="token punctuation">]</span><span class="token comment"># url=www.sina.com.cn </span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">#输出变量的值</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">[</span>root@client ~<span class="token punctuation">]</span><span class="token comment"># echo $&#123;url&#125; </span></pre></td></tr><tr><td data-num="6"></td><td><pre>www.sina.com.cn</pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">#从前往后，最短匹配</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">[</span>root@client ~<span class="token punctuation">]</span><span class="token comment"># echo $&#123;url#*.&#125; </span></pre></td></tr><tr><td data-num="10"></td><td><pre>sina.com.cn</pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment">#从前往后，最长匹配</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">[</span>root@client ~<span class="token punctuation">]</span><span class="token comment"># echo $&#123;url##*.&#125; </span></pre></td></tr><tr><td data-num="14"></td><td><pre>cn</pre></td></tr></table></figure><p>示例 2：从后往前删除变量内容</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">#定义变量</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>root@client ~<span class="token punctuation">]</span><span class="token comment"># url=www.sina.com.cn </span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">#输出变量结果</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">[</span>root@client ~<span class="token punctuation">]</span><span class="token comment"># echo $&#123;url&#125; </span></pre></td></tr><tr><td data-num="6"></td><td><pre>www.sina.com.cn</pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">#从后往前，最短匹配</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">[</span>root@client ~<span class="token punctuation">]</span><span class="token comment"># echo $&#123;url%.*&#125; </span></pre></td></tr><tr><td data-num="10"></td><td><pre>www.sina.com</pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment">#从后往前，最长匹配 贪婪匹配</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">[</span>root@client ~<span class="token punctuation">]</span><span class="token comment"># echo $&#123;url%%.*&#125; </span></pre></td></tr><tr><td data-num="14"></td><td><pre>www</pre></td></tr></table></figure><h6 id="255-场景1-提取内存百分比脚本"><a class="anchor" href="#255-场景1-提取内存百分比脚本">#</a> <strong>2.5.5</strong> <strong>场景</strong> 1 - 提取内存百分比脚本</h6><p>查看内存 / 当前使用状态，如果使用率超过 80% 则报警发邮件</p><ul><li>1. 如何获取内存指标； free -m</li><li>2. 拿到使用率的百分比；free -m | awk '/^Mem/{print <img loading="lazy" data-src="https://cdn.nlark.com/yuque/__latex/4492725109ab9345dc5198110c625caf.svg" alt="image">2*100}'</li><li>3. 与定义的阈值做比对 80%；</li><li>4. 超过 80，则发送邮件，否则没有任何提示；</li></ul><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token shebang important">#!/usr/bin/bash</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token assign-left variable">Free_use</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">free</span> <span class="token parameter variable">-m</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'/^Mem/ &#123;print $3/$2*100&#125;'</span><span class="token variable">)</span></span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$&#123;Free_use<span class="token operator">%</span>.*&#125;</span> <span class="token parameter variable">-ge</span> <span class="token number">5</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token builtin class-name">echo</span> <span class="token string">"你的内存已经满了.，当前已经使用了多少 <span class="token variable">$&#123;Free_use&#125;</span>%"</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">else</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token builtin class-name">echo</span> <span class="token string">"当前内存足够应用使用,目前已使用 <span class="token variable">$&#123;Free_use&#125;</span>%"</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">fi</span></pre></td></tr></table></figure><h6 id="256-场景2-为不同版本系统安装源"><a class="anchor" href="#256-场景2-为不同版本系统安装源">#</a> 2.5.6 场景 2 - 为不同版本系统安装源</h6><p>写一个脚本，在 CentOS6 上运行则安装 6 的 epel，在 CentOS7 系统运行则安装 7 系统的 epel；</p><p>1. 判断系统的版本；cat /etc/redhat-release | awk '{print $(NF-1)}'</p><p>2. 根据不同的版本安装不同的源；</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token shebang important">#!/usr/bin/bash</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token assign-left variable">system_version</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> /etc/redhat-release  <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'&#123;print $(NF-1)&#125;'</span><span class="token variable">)</span></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment"># -ne 不等于 -eq 等于</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$&#123;system_version<span class="token operator">%%</span>.*&#125;</span> <span class="token parameter variable">-eq</span> <span class="token number">7</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token function">wget</span> <span class="token parameter variable">-O</span> /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo <span class="token operator">&amp;></span>/dev/null</pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token builtin class-name">echo</span> <span class="token string">"CentOS <span class="token variable">$&#123;system_version&#125;</span> Epel OK"</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">fi</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$&#123;system_version<span class="token operator">%%</span>.*&#125;</span> <span class="token parameter variable">-eq</span> <span class="token number">6</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token function">wget</span> <span class="token parameter variable">-O</span> /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-6.repo</pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token builtin class-name">echo</span> <span class="token string">"CentOS <span class="token variable">$&#123;system_version&#125;</span> Epel OK"</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">fi</span></pre></td></tr></table></figure><h5 id="26-shell变量替换"><a class="anchor" href="#26-shell变量替换">#</a> <strong>2.6 Shell</strong> 变量替换</h5><h6 id="261-什么是变量替换"><a class="anchor" href="#261-什么是变量替换">#</a> <strong>2.6.1</strong> <strong>什么是变量替换</strong></h6><p>简单来说，就是在不改变原有变量的情况下，对变量进行替换。</p><p>比如：原本输出 linux 是小写，可以将其转为 LINUX 大写，或者直接删除；</p><p><strong>2.6.2</strong> <strong>变量替换的方式</strong></p><table><thead><tr><th><strong>变量</strong></th><th>说明</th></tr></thead><tbody><tr><td 变量旧字符串新字符串="">$</td><td>替换变量内的旧字符串为新字符串，只替换第一个</td></tr><tr><td 变量旧字符串新字符串="">$</td><td>替换变量内的旧字符串为新字符串，全部替换</td></tr></tbody></table><h6 id="263-场景1-替换path变量"><a class="anchor" href="#263-场景1-替换path变量">#</a> <strong>2.6.3</strong> <strong>场景</strong> 1 - 替换 PATH 变量</h6><p>如何替换 $PATH 中的 /bin/ 替换为 / BIN</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@client ~<span class="token punctuation">]</span><span class="token comment"># echo $PATH</span></pre></td></tr><tr><td data-num="2"></td><td><pre>/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">#替换操作</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">[</span>root@client ~<span class="token punctuation">]</span><span class="token comment"># echo $&#123;PATH//bin/BIN&#125;</span></pre></td></tr></table></figure><h6 id="264-场景2-字符串替换脚本"><a class="anchor" href="#264-场景2-字符串替换脚本">#</a> <strong>2.6.4</strong> <strong>场景</strong> 2 - 字符串替换脚本</h6><p>需求：变量 string=&quot;Bigdata process is Hadoop, Hadoop is open source project&quot; 执行脚本后，打印输出 string 变量，并给出用户以下选项：</p><ul><li>1)、打印 string 长度</li><li>2)、删除字符串中所有的 Hadoop</li><li>3)、替换第一个 Hadoop 为 Linux</li><li>4)、替换全部 Hadoop 为 Linux</li><li>5)、用户输入数字 1|2|3|4，可以执行对应项的功能，输入 q|Q 则退出交互模式</li></ul><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token shebang important">#!/usr/bin/bash</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token assign-left variable">string</span><span class="token operator">=</span><span class="token string">"Bigdata process is Hadoop, Hadoop is open source project"</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token variable">$&#123;string&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">""</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token function">cat</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF</span></pre></td></tr><tr><td data-num="7"></td><td><pre>1)、打印 string 长度</pre></td></tr><tr><td data-num="8"></td><td><pre>2)、删除字符串中所有的 Hadoop</pre></td></tr><tr><td data-num="9"></td><td><pre>3)、替换第一个Hadoop为Linux</pre></td></tr><tr><td data-num="10"></td><td><pre>4)、替换全部Hadoop为Linux</pre></td></tr><tr><td data-num="11"></td><td><pre>EOF</pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">while</span> <span class="token boolean">true</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">do</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"请输入你要操作的编号 [ 1 | 2 | 3 | 4 ]: "</span> Action</pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$Action</span> <span class="token parameter variable">-eq</span> <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token builtin class-name">echo</span> <span class="token variable">$&#123;<span class="token operator">#</span>string&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">fi</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    </pre></td></tr><tr><td data-num="20"></td><td><pre>    </pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$Action</span> <span class="token parameter variable">-eq</span> <span class="token number">2</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token builtin class-name">echo</span> <span class="token variable">$&#123;string<span class="token operator">/</span><span class="token operator">/</span>Hadoop<span class="token operator">/</span>&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token keyword">fi</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    </pre></td></tr><tr><td data-num="25"></td><td><pre>    </pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$Action</span> <span class="token parameter variable">-eq</span> <span class="token number">3</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token builtin class-name">echo</span> <span class="token variable">$&#123;string<span class="token operator">/</span>Hadoop<span class="token operator">/</span>Linux&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token keyword">fi</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    </pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$Action</span> <span class="token parameter variable">-eq</span> <span class="token number">4</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token builtin class-name">echo</span> <span class="token variable">$&#123;string<span class="token operator">/</span><span class="token operator">/</span>Hadoop<span class="token operator">/</span>Linux&#125;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token keyword">fi</span></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token keyword">done</span></pre></td></tr></table></figure><h5 id="27-shell变量运算"><a class="anchor" href="#27-shell变量运算">#</a> <strong>2.7 Shell</strong> 变量运算</h5><h6 id="271-什么是变量运算"><a class="anchor" href="#271-什么是变量运算">#</a> <strong>2.7.1</strong> <strong>什么是变量运算</strong></h6><p>其实就是我们以前学习过的 加 减 乘 除。</p><h6 id="272-为什么需要变量运算"><a class="anchor" href="#272-为什么需要变量运算">#</a> <strong>2.7.2</strong> <strong>为什么需要变量运算</strong></h6><p>当我们需要开发一个计算器程序时，是不是就需要运算了？</p><p>当我们要对结果进行单位换算时，是不是就需要变量运算了？</p><h6 id="273-变量运算实现的方式"><a class="anchor" href="#273-变量运算实现的方式">#</a> <strong>2.7.3</strong> <strong>变量运算实现的方式</strong></h6><p>通常整数运算有 expr、<img loading="lazy" data-src="https://cdn.nlark.com/yuque/__latex/bde0406f36a6e98d607aee37208881c3.svg" alt="image"> [] 等方式，小数运算有 bc、awk 方式。</p><p>定义变量，使用 expr、<img loading="lazy" data-src="https://cdn.nlark.com/yuque/__latex/bde0406f36a6e98d607aee37208881c3.svg" alt="image"> []、进行加减乘除。expr 必须空格隔开。</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@client ~<span class="token punctuation">]</span><span class="token comment"># num1=10</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>root@client ~<span class="token punctuation">]</span><span class="token comment"># num2=20</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">[</span>root@client ~<span class="token punctuation">]</span><span class="token comment"># expr $num1 + $num2</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">[</span>root@client ~<span class="token punctuation">]</span><span class="token comment"># echo $(( $num1 + $num2 ))</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">[</span>root@client ~<span class="token punctuation">]</span><span class="token comment"># echo $[ $num1 + $num2 ]</span></pre></td></tr></table></figure><h6 id="274-场景1-根据当前时间计算明年时间"><a class="anchor" href="#274-场景1-根据当前时间计算明年时间">#</a> <strong>2.7.4</strong> <strong>场景</strong> 1 - 根据当前时间计算明年时间</h6><p>根据系统时间，打印今年和明年时间。</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@client ~<span class="token punctuation">]</span><span class="token comment"># echo "This is $(date +%Y) year"</span></pre></td></tr><tr><td data-num="2"></td><td><pre>This is <span class="token number">2019</span> year</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">[</span>root@client ~<span class="token punctuation">]</span><span class="token comment"># echo "This is $(($(date +%Y)+1)) year"</span></pre></td></tr><tr><td data-num="4"></td><td><pre>This is <span class="token number">2020</span> year</pre></td></tr></table></figure><h6 id="275-场景2-计算今年还剩下多少周"><a class="anchor" href="#275-场景2-计算今年还剩下多少周">#</a> <strong>2.7.5</strong> <strong>场景</strong> 2 - 计算今年还剩下多少周</h6><p>需求 2：根据系统时间获取今年还剩下多少星期，已经过了多少星期。思路如下:</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">[</span>root@client ~<span class="token punctuation">]</span><span class="token comment"># echo "今年已经过了 $(date +% j) days"</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>root@client ~<span class="token punctuation">]</span><span class="token comment"># echo "今年已经过了 $(($(date +% j)/7 )) weeks"</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">[</span>root@client ~<span class="token punctuation">]</span><span class="token comment"># echo "今年还剩下 $(((365 - $(date +% j) )/7 )) weeks"</span></pre></td></tr></table></figure><h5 id="28-shell默认变量"><a class="anchor" href="#28-shell默认变量">#</a> <strong>2.8 Shell 默认</strong>变量</h5><ol><li var:-string="">场景一 $</li></ol><ul><li>若变量 var 为空时，则用 string 作为变量 var 的值；</li><li>若变量 var 不为空时，则直接使用变量 var 的值；</li></ul><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">#1. 脚本示例</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>root@client ~<span class="token punctuation">]</span><span class="token comment"># cat var-default.sh </span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">#!/usr/bin/bash</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"请输入你要安装的路径 [default: /usr/local/teleport]:"</span> var</pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$&#123;var<span class="token operator">:-</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>teleport&#125;</span>"</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$&#123;var&#125;</span>"</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">#2. 变量 var 不为空示例</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">[</span>root@client ~<span class="token punctuation">]</span><span class="token comment"># sh var-default.sh </span></pre></td></tr><tr><td data-num="11"></td><td><pre>请输入你要安装的路径 <span class="token punctuation">[</span>default: /usr/local/teleport<span class="token punctuation">]</span>:/test</pre></td></tr><tr><td data-num="12"></td><td><pre>/test</pre></td></tr><tr><td data-num="13"></td><td><pre>/test</pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">#3. 变量 var 为空示例</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">[</span>root@client ~<span class="token punctuation">]</span><span class="token comment"># sh var-default.sh </span></pre></td></tr><tr><td data-num="17"></td><td><pre>请输入你要安装的路径 <span class="token punctuation">[</span>default: /usr/local/teleport<span class="token punctuation">]</span>:</pre></td></tr><tr><td data-num="18"></td><td><pre>/usr/local/teleport</pre></td></tr></table></figure><ol start="2"><li var:="string">场景二 $</li></ol><ul><li>若变量 var 为空时，则用 string 作为变量 var 的值，同时将 string 赋值给变量 var；</li><li>若变量 var 不为空时，则直接使用变量 var 的值；</li></ul><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">#1. 脚本示例</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>root@client ~<span class="token punctuation">]</span><span class="token comment"># cat var-default.sh </span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">#!/usr/bin/bash</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"请输入你要安装的路径 [default: /usr/local/teleport]:"</span> var</pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$&#123;var<span class="token operator">:=</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>teleport&#125;</span>"</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$&#123;var&#125;</span>"</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">#2. 变量 var 不为空示例</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">[</span>root@client ~<span class="token punctuation">]</span><span class="token comment"># sh var-default.sh </span></pre></td></tr><tr><td data-num="11"></td><td><pre>请输入你要安装的路径 <span class="token punctuation">[</span>default: /usr/local/teleport<span class="token punctuation">]</span>:/test</pre></td></tr><tr><td data-num="12"></td><td><pre>/test</pre></td></tr><tr><td data-num="13"></td><td><pre>/test</pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">#3. 变量 var 为空示例</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">[</span>root@client ~<span class="token punctuation">]</span><span class="token comment"># sh var-default.sh </span></pre></td></tr><tr><td data-num="17"></td><td><pre>请输入你要安装的路径 <span class="token punctuation">[</span>default: /usr/local/teleport<span class="token punctuation">]</span>:</pre></td></tr><tr><td data-num="18"></td><td><pre>/usr/local/teleport</pre></td></tr><tr><td data-num="19"></td><td><pre>/usr/local/teleport</pre></td></tr></table></figure><p><em>${var:=string} 很常用的一种用法是，判断某个变量是否赋值，没有的话则给它赋上一个默认值。</em></p><ol start="3"><li var:+string="">场景三 $</li></ol><ul><li>若变量 var 为空时，则 不替换或者说是替换成变量 var 的值，即空值（因为变量 var 此时为空，所以这两种说法是等价的）；</li><li>若变量 var 不为空时，则将 string 作为 var 变量的值，同时将 string 复制给 var 变量；</li></ul><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">#1. 脚本示例</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>root@client ~<span class="token punctuation">]</span><span class="token comment"># cat var-default.sh </span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">#!/usr/bin/bash</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"请输入你要安装的路径 [default: /usr/local/teleport]:"</span> var</pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$&#123;var<span class="token operator">:+</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>teleport&#125;</span>"</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$&#123;var&#125;</span>"</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">#2. 变量 var 不为空示例</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">[</span>root@client ~<span class="token punctuation">]</span><span class="token comment"># sh var-default.sh </span></pre></td></tr><tr><td data-num="11"></td><td><pre>请输入你要安装的路径 <span class="token punctuation">[</span>default: /usr/local/teleport<span class="token punctuation">]</span>:/test</pre></td></tr><tr><td data-num="12"></td><td><pre>/usr/local/teleport</pre></td></tr><tr><td data-num="13"></td><td><pre>/test</pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">#3. 变量 var 为空示例</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">[</span>root@client ~<span class="token punctuation">]</span><span class="token comment"># sh var-default.sh </span></pre></td></tr><tr><td data-num="17"></td><td><pre>请输入你要安装的路径 <span class="token punctuation">[</span>default: /usr/local/teleport<span class="token punctuation">]</span>:</pre></td></tr></table></figure><div class="tags"><a href="/tags/Shell/" rel="tag"><i class="ic i-tag"></i>Shell</a></div></div><footer><div class="meta"><span class="icon"><i class="ic i-eye"></i></span><span>此文章已被阅读次数:</span><span class="waline-pageview-count" id="twikoo_visitors" data-path="/posts/1361162481.html">正在加载...</span><span class="item"><span class="icon"><i class="ic i-calendar-check"></i></span><span class="text">更新于</span><time title="修改时间：2025-09-27 21:24:20" itemprop="dateModified" datetime="2025-09-27T21:24:20+08:00">2025-09-27</time></span></div><div class="reward"><button><i class="ic i-heartbeat"></i>赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img loading="lazy" data-src="/assets/wechatpay.png" alt="Xu Yong 微信支付"><p>微信支付</p></div><div><img loading="lazy" data-src="/assets/alipay.png" alt="Xu Yong 支付宝"><p>支付宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者：</strong>Xu Yong<i class="ic i-at"><em>@</em></i>LinuxSre云原生</li><li class="link"><strong>本文链接：</strong><a href="http://ixuyong.cn/posts/1361162481.html" title="Shell脚本基础与变量">http://ixuyong.cn/posts/1361162481.html</a></li><li class="license"><strong>版权声明：</strong>本站所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/posts/4120829732.html" rel="prev" itemprop="url" data-background-image="https:&#x2F;&#x2F;wp-cdn.4ce.cn&#x2F;v2&#x2F;9BoJlSz.jpeg" title="DNS域名解析服务"><span class="type">上一篇</span><span class="category"><i class="ic i-flag"></i>Linux</span><h3>DNS域名解析服务</h3></a></div><div class="item right"><a href="/posts/4031268474.html" rel="next" itemprop="url" data-background-image="https:&#x2F;&#x2F;wp-cdn.4ce.cn&#x2F;v2&#x2F;QUdjsXb.jpeg" title="Shell流程控制-if-case"><span class="type">下一篇</span><span class="category"><i class="ic i-flag"></i>Shell</span><h3>Shell流程控制-if-case</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#shell%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B%E5%8F%8Ased-awk%E8%BF%9B%E9%98%B6%E5%AE%9E%E8%B7%B5"><span class="toc-number">1.</span> <span class="toc-text">Shell 脚本编程及 Sed、AWK 进阶实践</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-shell%E8%84%9A%E6%9C%AC%E6%A6%82%E8%BF%B0"><span class="toc-number">1.1.</span> <span class="toc-text">1. Shell 脚本概述</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#11%E4%BB%80%E4%B9%88%E6%98%AFshell"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1. 什么是 shell</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#12-shell%E8%84%9A%E6%9C%AC%E5%8F%B7%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">1.1.2.</span> <span class="toc-text">1.2 Shell 脚本 #号的使用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#13-%E8%87%AA%E5%8A%A8%E6%B7%BB%E5%8A%A0shell%E7%9A%84%E9%A6%96%E9%83%A8"><span class="toc-number">1.1.3.</span> <span class="toc-text">1.3 自动添加 Shell 的首部</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-shell%E5%8F%98%E9%87%8F"><span class="toc-number">1.2.</span> <span class="toc-text">2. Shell 变量</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#21-%E4%BB%80%E4%B9%88%E6%98%AF%E5%8F%98%E9%87%8F"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1 什么是变量</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#22-%E5%8F%98%E9%87%8F%E5%91%BD%E5%90%8D%E8%A7%84%E8%8C%83"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.2 变量命名规范</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#23-%E5%8F%98%E9%87%8F%E5%AE%9A%E4%B9%89%E6%96%B9%E5%BC%8F"><span class="toc-number">1.2.3.</span> <span class="toc-text">2.3 变量定义方式</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#231-%E7%94%A8%E6%88%B7%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">2.3.1 用户自定义变量</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#232-%E7%B3%BB%E7%BB%9F%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">2.3.2 系统环境变量</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#233-%E4%BD%8D%E7%BD%AE%E5%8F%82%E6%95%B0%E5%8F%98%E9%87%8F"><span class="toc-number">1.2.3.3.</span> <span class="toc-text">2.3.3 位置参数变量</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#234-%E7%89%B9%E6%AE%8A%E5%8F%82%E6%95%B0%E5%8F%98%E9%87%8F"><span class="toc-number">1.2.3.4.</span> <span class="toc-text">2.3.4 特殊参数变量</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#235-%E5%8F%82%E6%95%B0%E5%9C%BA%E6%99%AF%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.2.3.5.</span> <span class="toc-text">2.3.5 参数场景示例</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#24-read%E4%BA%A4%E4%BA%92%E4%BC%A0%E9%80%92%E5%8F%98%E9%87%8F"><span class="toc-number">1.2.4.</span> <span class="toc-text">2.4 read 交互传递变量</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#241-%E5%9C%BA%E6%99%AF1%E6%A8%A1%E6%8B%9F%E7%99%BB%E9%99%86%E9%A1%B5%E9%9D%A2%E8%84%9A%E6%9C%AC"><span class="toc-number">1.2.4.1.</span> <span class="toc-text">2.4.1 场景 1 模拟登陆页面脚本</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#242-%E5%9C%BA%E6%99%AF2-%E7%B3%BB%E7%BB%9F%E5%A4%87%E4%BB%BD%E8%84%9A%E6%9C%AC"><span class="toc-number">1.2.4.2.</span> <span class="toc-text">2.4.2 场景 2 - 系统备份脚本</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#243-%E5%9C%BA%E6%99%AF3-%E6%8E%A2%E6%B5%8B%E4%B8%BB%E6%9C%BA%E5%AD%98%E6%B4%BB%E8%84%9A%E6%9C%AC"><span class="toc-number">1.2.4.3.</span> <span class="toc-text">2.4.3 场景 3 - 探测主机存活脚本</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#244-%E5%9C%BA%E6%99%AF4-%E4%BF%AE%E6%94%B9%E4%B8%BB%E6%9C%BA%E5%90%8D%E7%A7%B0%E8%84%9A%E6%9C%AC"><span class="toc-number">1.2.4.4.</span> <span class="toc-text">2.4.4 场景 4 - 修改主机名称脚本</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#25-shell%E5%8F%98%E9%87%8F%E5%88%A0%E9%99%A4"><span class="toc-number">1.2.5.</span> <span class="toc-text">2.5 Shell 变量删除</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#251-%E4%BB%80%E4%B9%88%E6%98%AF%E5%8F%98%E9%87%8F%E5%88%A0%E9%99%A4"><span class="toc-number">1.2.5.1.</span> <span class="toc-text">2.5.1 什么是变量删除</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#252-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E7%94%A8%E5%8F%98%E9%87%8F%E5%88%A0%E9%99%A4"><span class="toc-number">1.2.5.2.</span> <span class="toc-text">2.5.2 为什么要用变量删除</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#253-%E5%8F%98%E9%87%8F%E5%88%A0%E9%99%A4%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">1.2.5.3.</span> <span class="toc-text">2.5.3 变量删除的几种方式</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#254-%E5%8F%98%E9%87%8F%E5%88%A0%E9%99%A4%E8%AF%AD%E6%B3%95%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.2.5.4.</span> <span class="toc-text">2.5.4 变量删除语法示例</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#255-%E5%9C%BA%E6%99%AF1-%E6%8F%90%E5%8F%96%E5%86%85%E5%AD%98%E7%99%BE%E5%88%86%E6%AF%94%E8%84%9A%E6%9C%AC"><span class="toc-number">1.2.5.5.</span> <span class="toc-text">2.5.5 场景 1 - 提取内存百分比脚本</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#256-%E5%9C%BA%E6%99%AF2-%E4%B8%BA%E4%B8%8D%E5%90%8C%E7%89%88%E6%9C%AC%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E6%BA%90"><span class="toc-number">1.2.5.6.</span> <span class="toc-text">2.5.6 场景 2 - 为不同版本系统安装源</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#26-shell%E5%8F%98%E9%87%8F%E6%9B%BF%E6%8D%A2"><span class="toc-number">1.2.6.</span> <span class="toc-text">2.6 Shell 变量替换</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#261-%E4%BB%80%E4%B9%88%E6%98%AF%E5%8F%98%E9%87%8F%E6%9B%BF%E6%8D%A2"><span class="toc-number">1.2.6.1.</span> <span class="toc-text">2.6.1 什么是变量替换</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#263-%E5%9C%BA%E6%99%AF1-%E6%9B%BF%E6%8D%A2path%E5%8F%98%E9%87%8F"><span class="toc-number">1.2.6.2.</span> <span class="toc-text">2.6.3 场景 1 - 替换 PATH 变量</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#264-%E5%9C%BA%E6%99%AF2-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%9B%BF%E6%8D%A2%E8%84%9A%E6%9C%AC"><span class="toc-number">1.2.6.3.</span> <span class="toc-text">2.6.4 场景 2 - 字符串替换脚本</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#27-shell%E5%8F%98%E9%87%8F%E8%BF%90%E7%AE%97"><span class="toc-number">1.2.7.</span> <span class="toc-text">2.7 Shell 变量运算</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#271-%E4%BB%80%E4%B9%88%E6%98%AF%E5%8F%98%E9%87%8F%E8%BF%90%E7%AE%97"><span class="toc-number">1.2.7.1.</span> <span class="toc-text">2.7.1 什么是变量运算</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#272-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E5%8F%98%E9%87%8F%E8%BF%90%E7%AE%97"><span class="toc-number">1.2.7.2.</span> <span class="toc-text">2.7.2 为什么需要变量运算</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#273-%E5%8F%98%E9%87%8F%E8%BF%90%E7%AE%97%E5%AE%9E%E7%8E%B0%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-number">1.2.7.3.</span> <span class="toc-text">2.7.3 变量运算实现的方式</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#274-%E5%9C%BA%E6%99%AF1-%E6%A0%B9%E6%8D%AE%E5%BD%93%E5%89%8D%E6%97%B6%E9%97%B4%E8%AE%A1%E7%AE%97%E6%98%8E%E5%B9%B4%E6%97%B6%E9%97%B4"><span class="toc-number">1.2.7.4.</span> <span class="toc-text">2.7.4 场景 1 - 根据当前时间计算明年时间</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#275-%E5%9C%BA%E6%99%AF2-%E8%AE%A1%E7%AE%97%E4%BB%8A%E5%B9%B4%E8%BF%98%E5%89%A9%E4%B8%8B%E5%A4%9A%E5%B0%91%E5%91%A8"><span class="toc-number">1.2.7.5.</span> <span class="toc-text">2.7.5 场景 2 - 计算今年还剩下多少周</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#28-shell%E9%BB%98%E8%AE%A4%E5%8F%98%E9%87%8F"><span class="toc-number">1.2.8.</span> <span class="toc-text">2.8 Shell 默认变量</span></a></li></ol></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li class="active"><a href="/posts/1361162481.html" rel="bookmark" title="Shell脚本基础与变量">Shell脚本基础与变量</a></li><li><a href="/posts/4031268474.html" rel="bookmark" title="Shell流程控制-if-case">Shell流程控制-if-case</a></li><li><a href="/posts/4281775956.html" rel="bookmark" title="Shell循环控制-for-while">Shell循环控制-for-while</a></li><li><a href="/posts/2848848125.html" rel="bookmark" title="Shell常用命令-grep-sed">Shell常用命令-grep-sed</a></li><li><a href="/posts/2633625892.html" rel="bookmark" title="Shell文本处理工具awk">Shell文本处理工具awk</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" loading="lazy" decoding="async" itemprop="image" alt="Xu Yong" src="/assets/avatar.png"><p class="name" itemprop="name">Xu Yong</p><div class="description" itemprop="description">专注于 Linux 运维、云计算、云原⽣等技术</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">75</span><span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">19</span><span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">22</span><span class="name">标签</span></a></div></nav><div class="social"><a target="_blank" rel="noopener" href="https://github.com/xyapples" class="item github" title="https:&#x2F;&#x2F;github.com&#x2F;xyapples"><i class="ic i-github"></i></a><a target="_blank" rel="noopener" href="https://gitee.com/chinagei" class="item gitee" title="https:&#x2F;&#x2F;gitee.com&#x2F;chinagei"><i class="ic i-gitee"></i></a><a href="mailto:373370405@qq.com" class="item email" title="mailto:373370405@qq.com"><i class="ic i-envelope"></i></a></div><div class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-about"></i>关于</a></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友链</a></li></div></div></div></div><ul id="quick"><li class="prev pjax"><a href="/posts/4031268474.html" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/posts/4120829732.html" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/Iptables/" title="分类于Iptables">Iptables</a></div><span><a href="/posts/3327248306.html">Firewalld防火墙实战</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Linux/" title="分类于Linux">Linux</a></div><span><a href="/posts/2889248111.html">Vsftp服务实践</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Redis/" title="分类于Redis">Redis</a></div><span><a href="/posts/1414180692.html">Redis集群（主从+哨兵）模式</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Kubernetes/" title="分类于Kubernetes">Kubernetes</a></div><span><a href="/posts/1771242682.html">K8s零宕机服务发布-探针</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Shell/" title="分类于Shell">Shell</a></div><span><a href="/posts/4031268474.html">Shell流程控制-if-case</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Linux/" title="分类于Linux">Linux</a></div><span><a href="/posts/269104229.html">Samba服务实践</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Nginx/" title="分类于Nginx">Nginx</a></div><span><a href="/posts/2279050448.html">Nginx代理-动静分离(九)</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Nginx/" title="分类于Nginx">Nginx</a></div><span><a href="/posts/1292941645.html">Nginx平滑升级（十四）</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/ELKStack/" title="分类于ELKStack">ELKStack</a></div><span><a href="/posts/170066797.html">消费租赁项目Kubernetes基于ELK日志分析与实践</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Linux/" title="分类于Linux">Linux</a></div><span><a href="/posts/1922841233.html">Rsync服务实践</a></span></li></ul></div><div class="rpost pjax"><h2>最新评论</h2><ul class="leancloud-recent-comment" id="new-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2022 -<span itemprop="copyrightYear">2025</span><span class="with-love"><i class="ic i-sakura rotate"></i></span><span class="author" itemprop="copyrightHolder">Xu Yong @ LinuxSre云原生</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i></span><span title="站点总字数">1.9m 字</span><span class="post-meta-divider"> | </span><span class="post-meta-item-icon"><i class="ic i-coffee"></i></span><span title="站点阅读时长">28:43</span></div><div class="powered-by">基于 <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> & Theme.<a target="_blank" rel="noopener" href="https://github.com/theme-shoka-x/hexo-theme-shokaX/">ShokaX</a></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL = {
    ispost: true,
        path: `posts/1361162481.html`,
        favicon: {
        show: `（●´3｀●）やれやれだぜ`,
        hide: `(´Д｀)大変だ！`
    },
    search: {
        placeholder: "文章搜索",
        empty: "关于 「 ${query} 」，什么也没搜到",
        stats: "${time} ms 内找到 ${hits} 条结果"
    },
    copy_tex: false,
    katex: false,
    mermaid: false,
    audio: undefined,
    fancybox: true,
    nocopy: false,
    outime: true,
    template: `<div class="note warning"><p><span class="label warning">文章时效性提示</span><br>这是一篇发布于 {{publish}} 天前，最后一次更新在 {{updated}} 天前的文章，部分信息可能已经发生改变，请注意甄别。</p></div>`,
    quiz: {
        choice: `单选题`,
        multiple: `多选题`,
        true_false: `判断题`,
        essay: `问答题`,
        gap_fill: `填空题`,
        mistake: `错题备注`
    },
    ignores: [
        (uri) => uri.includes('#'),
        (uri) => new RegExp(LOCAL.path + '$').test(uri),
            []
    ]
};</script><script src="https://s4.zstatic.net/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha384-k6YtvFUEIuEFBdrLKJ3YAUbBki333tj1CSUisai5Cswsg9wcLNaPzsTHDswp4Az8" crossorigin="anonymous" fetchpriority="high"></script><script src="https://s4.zstatic.net/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha384-ZvpUoO&#x2F;+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn&#x2F;6Z&#x2F;hRTt8+pR6L4N2" crossorigin="anonymous" fetchpriority="high"></script><script src="/js/siteInit.js?v=0.4.17" type="module" fetchpriority="high" defer></script></body></html><!-- rebuild by hrmmi -->